function Ti(t,e){const n=Object.create(null),s=t.split(",");for(let r=0;r<s.length;r++)n[s[r]]=!0;return e?r=>!!n[r.toLowerCase()]:r=>!!n[r]}const td="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",nd=Ti(td);function rl(t){return!!t||t===""}function bi(t){if(K(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=_e(s)?id(s):bi(s);if(r)for(const i in r)e[i]=r[i]}return e}else{if(_e(t))return t;if(Te(t))return t}}const sd=/;(?![^(]*\))/g,rd=/:(.+)/;function id(t){const e={};return t.split(sd).forEach(n=>{if(n){const s=n.split(rd);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Ai(t){let e="";if(_e(t))e=t;else if(K(t))for(let n=0;n<t.length;n++){const s=Ai(t[n]);s&&(e+=s+" ")}else if(Te(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const cE=t=>t==null?"":K(t)||Te(t)&&(t.toString===cl||!z(t.toString))?JSON.stringify(t,il,2):String(t),il=(t,e)=>e&&e.__v_isRef?il(t,e.value):gn(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r])=>(n[`${s} =>`]=r,n),{})}:al(e)?{[`Set(${e.size})`]:[...e.values()]}:Te(e)&&!K(e)&&!ul(e)?String(e):e,he={},pn=[],st=()=>{},od=()=>!1,ad=/^on[^a-z]/,Gs=t=>ad.test(t),_i=t=>t.startsWith("onUpdate:"),Fe=Object.assign,ol=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},ld=Object.prototype.hasOwnProperty,Z=(t,e)=>ld.call(t,e),K=Array.isArray,gn=t=>Ws(t)==="[object Map]",al=t=>Ws(t)==="[object Set]",z=t=>typeof t=="function",_e=t=>typeof t=="string",Si=t=>typeof t=="symbol",Te=t=>t!==null&&typeof t=="object",ll=t=>Te(t)&&z(t.then)&&z(t.catch),cl=Object.prototype.toString,Ws=t=>cl.call(t),cd=t=>Ws(t).slice(8,-1),ul=t=>Ws(t)==="[object Object]",Ci=t=>_e(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Qs=Ti(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ys=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},ud=/-(\w)/g,lt=Ys(t=>t.replace(ud,(e,n)=>n?n.toUpperCase():"")),hd=/\B([A-Z])/g,mn=Ys(t=>t.replace(hd,"-$1").toLowerCase()),Xs=Ys(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ni=Ys(t=>t?`on${Xs(t)}`:""),Xn=(t,e)=>!Object.is(t,e),Ri=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Js=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},fd=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let hl;const dd=()=>hl||(hl=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let Ut;const Zs=[];class pd{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&Ut&&(this.parent=Ut,this.index=(Ut.scopes||(Ut.scopes=[])).push(this)-1)}run(e){if(this.active)try{return this.on(),e()}finally{this.off()}}on(){this.active&&(Zs.push(this),Ut=this)}off(){this.active&&(Zs.pop(),Ut=Zs[Zs.length-1])}stop(e){if(this.active){if(this.effects.forEach(n=>n.stop()),this.cleanups.forEach(n=>n()),this.scopes&&this.scopes.forEach(n=>n.stop(!0)),this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.active=!1}}}function gd(t,e){e=e||Ut,e&&e.active&&e.effects.push(t)}const xi=t=>{const e=new Set(t);return e.w=0,e.n=0,e},fl=t=>(t.w&Nt)>0,dl=t=>(t.n&Nt)>0,md=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Nt},yd=t=>{const{deps:e}=t;if(e.length){let n=0;for(let s=0;s<e.length;s++){const r=e[s];fl(r)&&!dl(r)?r.delete(t):e[n++]=r,r.w&=~Nt,r.n&=~Nt}e.length=n}},Di=new WeakMap;let Jn=0,Nt=1;const Oi=30,Zn=[];let $t;const jt=Symbol(""),Pi=Symbol("");class ki{constructor(e,n=null,s){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],gd(this,s)}run(){if(!this.active)return this.fn();if(!Zn.includes(this))try{return Zn.push($t=this),vd(),Nt=1<<++Jn,Jn<=Oi?md(this):pl(this),this.fn()}finally{Jn<=Oi&&yd(this),Nt=1<<--Jn,qt(),Zn.pop();const e=Zn.length;$t=e>0?Zn[e-1]:void 0}}stop(){this.active&&(pl(this),this.onStop&&this.onStop(),this.active=!1)}}function pl(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let yn=!0;const Mi=[];function vn(){Mi.push(yn),yn=!1}function vd(){Mi.push(yn),yn=!0}function qt(){const t=Mi.pop();yn=t===void 0?!0:t}function We(t,e,n){if(!gl())return;let s=Di.get(t);s||Di.set(t,s=new Map);let r=s.get(n);r||s.set(n,r=xi()),ml(r)}function gl(){return yn&&$t!==void 0}function ml(t,e){let n=!1;Jn<=Oi?dl(t)||(t.n|=Nt,n=!fl(t)):n=!t.has($t),n&&(t.add($t),$t.deps.push(t))}function wt(t,e,n,s,r,i){const o=Di.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&K(t))o.forEach((l,c)=>{(c==="length"||c>=s)&&a.push(l)});else switch(n!==void 0&&a.push(o.get(n)),e){case"add":K(t)?Ci(n)&&a.push(o.get("length")):(a.push(o.get(jt)),gn(t)&&a.push(o.get(Pi)));break;case"delete":K(t)||(a.push(o.get(jt)),gn(t)&&a.push(o.get(Pi)));break;case"set":gn(t)&&a.push(o.get(jt));break}if(a.length===1)a[0]&&Li(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);Li(xi(l))}}function Li(t,e){for(const n of K(t)?t:[...t])(n!==$t||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const wd=Ti("__proto__,__v_isRef,__isVue"),yl=new Set(Object.getOwnPropertyNames(Symbol).map(t=>Symbol[t]).filter(Si)),Ed=Fi(),Id=Fi(!1,!0),Td=Fi(!0),vl=bd();function bd(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const s=te(this);for(let i=0,o=this.length;i<o;i++)We(s,"get",i+"");const r=s[e](...n);return r===-1||r===!1?s[e](...n.map(te)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){vn();const s=te(this)[e].apply(this,n);return qt(),s}}),t}function Fi(t=!1,e=!1){return function(s,r,i){if(r==="__v_isReactive")return!t;if(r==="__v_isReadonly")return t;if(r==="__v_raw"&&i===(t?e?Ud:Cl:e?Sl:_l).get(s))return s;const o=K(s);if(!t&&o&&Z(vl,r))return Reflect.get(vl,r,i);const a=Reflect.get(s,r,i);return(Si(r)?yl.has(r):wd(r))||(t||We(s,"get",r),e)?a:Ke(a)?!o||!Ci(r)?a.value:a:Te(a)?t?Nl(a):es(a):a}}const Ad=wl(),_d=wl(!0);function wl(t=!1){return function(n,s,r,i){let o=n[s];if(!t&&(r=te(r),o=te(o),!K(n)&&Ke(o)&&!Ke(r)))return o.value=r,!0;const a=K(n)&&Ci(s)?Number(s)<n.length:Z(n,s),l=Reflect.set(n,s,r,i);return n===te(i)&&(a?Xn(r,o)&&wt(n,"set",s,r):wt(n,"add",s,r)),l}}function Sd(t,e){const n=Z(t,e);t[e];const s=Reflect.deleteProperty(t,e);return s&&n&&wt(t,"delete",e,void 0),s}function Cd(t,e){const n=Reflect.has(t,e);return(!Si(e)||!yl.has(e))&&We(t,"has",e),n}function Nd(t){return We(t,"iterate",K(t)?"length":jt),Reflect.ownKeys(t)}const El={get:Ed,set:Ad,deleteProperty:Sd,has:Cd,ownKeys:Nd},Rd={get:Td,set(t,e){return!0},deleteProperty(t,e){return!0}},xd=Fe({},El,{get:Id,set:_d}),Vi=t=>t,er=t=>Reflect.getPrototypeOf(t);function tr(t,e,n=!1,s=!1){t=t.__v_raw;const r=te(t),i=te(e);e!==i&&!n&&We(r,"get",e),!n&&We(r,"get",i);const{has:o}=er(r),a=s?Vi:n?ji:ts;if(o.call(r,e))return a(t.get(e));if(o.call(r,i))return a(t.get(i));t!==r&&t.get(e)}function nr(t,e=!1){const n=this.__v_raw,s=te(n),r=te(t);return t!==r&&!e&&We(s,"has",t),!e&&We(s,"has",r),t===r?n.has(t):n.has(t)||n.has(r)}function sr(t,e=!1){return t=t.__v_raw,!e&&We(te(t),"iterate",jt),Reflect.get(t,"size",t)}function Il(t){t=te(t);const e=te(this);return er(e).has.call(e,t)||(e.add(t),wt(e,"add",t,t)),this}function Tl(t,e){e=te(e);const n=te(this),{has:s,get:r}=er(n);let i=s.call(n,t);i||(t=te(t),i=s.call(n,t));const o=r.call(n,t);return n.set(t,e),i?Xn(e,o)&&wt(n,"set",t,e):wt(n,"add",t,e),this}function bl(t){const e=te(this),{has:n,get:s}=er(e);let r=n.call(e,t);r||(t=te(t),r=n.call(e,t)),s&&s.call(e,t);const i=e.delete(t);return r&&wt(e,"delete",t,void 0),i}function Al(){const t=te(this),e=t.size!==0,n=t.clear();return e&&wt(t,"clear",void 0,void 0),n}function rr(t,e){return function(s,r){const i=this,o=i.__v_raw,a=te(o),l=e?Vi:t?ji:ts;return!t&&We(a,"iterate",jt),o.forEach((c,u)=>s.call(r,l(c),l(u),i))}}function ir(t,e,n){return function(...s){const r=this.__v_raw,i=te(r),o=gn(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=r[t](...s),u=n?Vi:e?ji:ts;return!e&&We(i,"iterate",l?Pi:jt),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function Rt(t){return function(...e){return t==="delete"?!1:this}}function Dd(){const t={get(i){return tr(this,i)},get size(){return sr(this)},has:nr,add:Il,set:Tl,delete:bl,clear:Al,forEach:rr(!1,!1)},e={get(i){return tr(this,i,!1,!0)},get size(){return sr(this)},has:nr,add:Il,set:Tl,delete:bl,clear:Al,forEach:rr(!1,!0)},n={get(i){return tr(this,i,!0)},get size(){return sr(this,!0)},has(i){return nr.call(this,i,!0)},add:Rt("add"),set:Rt("set"),delete:Rt("delete"),clear:Rt("clear"),forEach:rr(!0,!1)},s={get(i){return tr(this,i,!0,!0)},get size(){return sr(this,!0)},has(i){return nr.call(this,i,!0)},add:Rt("add"),set:Rt("set"),delete:Rt("delete"),clear:Rt("clear"),forEach:rr(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=ir(i,!1,!1),n[i]=ir(i,!0,!1),e[i]=ir(i,!1,!0),s[i]=ir(i,!0,!0)}),[t,n,e,s]}const[Od,Pd,kd,Md]=Dd();function Ui(t,e){const n=e?t?Md:kd:t?Pd:Od;return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(Z(n,r)&&r in s?n:s,r,i)}const Ld={get:Ui(!1,!1)},Fd={get:Ui(!1,!0)},Vd={get:Ui(!0,!1)},_l=new WeakMap,Sl=new WeakMap,Cl=new WeakMap,Ud=new WeakMap;function $d(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function jd(t){return t.__v_skip||!Object.isExtensible(t)?0:$d(cd(t))}function es(t){return t&&t.__v_isReadonly?t:$i(t,!1,El,Ld,_l)}function qd(t){return $i(t,!1,xd,Fd,Sl)}function Nl(t){return $i(t,!0,Rd,Vd,Cl)}function $i(t,e,n,s,r){if(!Te(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=r.get(t);if(i)return i;const o=jd(t);if(o===0)return t;const a=new Proxy(t,o===2?s:n);return r.set(t,a),a}function wn(t){return Rl(t)?wn(t.__v_raw):!!(t&&t.__v_isReactive)}function Rl(t){return!!(t&&t.__v_isReadonly)}function xl(t){return wn(t)||Rl(t)}function te(t){const e=t&&t.__v_raw;return e?te(e):t}function Dl(t){return Js(t,"__v_skip",!0),t}const ts=t=>Te(t)?es(t):t,ji=t=>Te(t)?Nl(t):t;function Ol(t){gl()&&(t=te(t),t.dep||(t.dep=xi()),ml(t.dep))}function Pl(t,e){t=te(t),t.dep&&Li(t.dep)}function Ke(t){return Boolean(t&&t.__v_isRef===!0)}function Bd(t){return kl(t,!1)}function Hd(t){return kl(t,!0)}function kl(t,e){return Ke(t)?t:new Kd(t,e)}class Kd{constructor(e,n){this._shallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:te(e),this._value=n?e:ts(e)}get value(){return Ol(this),this._value}set value(e){e=this._shallow?e:te(e),Xn(e,this._rawValue)&&(this._rawValue=e,this._value=this._shallow?e:ts(e),Pl(this))}}function ns(t){return Ke(t)?t.value:t}const zd={get:(t,e,n)=>ns(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return Ke(r)&&!Ke(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function Ml(t){return wn(t)?t:new Proxy(t,zd)}class Gd{constructor(e,n,s){this._setter=n,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new ki(e,()=>{this._dirty||(this._dirty=!0,Pl(this))}),this.__v_isReadonly=s}get value(){const e=te(this);return Ol(e),e._dirty&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function ct(t,e){let n,s;const r=z(t);return r?(n=t,s=st):(n=t.get,s=t.set),new Gd(n,s,r||!s)}Promise.resolve();function Wd(t,e,...n){const s=t.vnode.props||he;let r=n;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in s){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=s[u]||he;d?r=n.map(g=>g.trim()):h&&(r=n.map(fd))}let a,l=s[a=Ni(e)]||s[a=Ni(lt(e))];!l&&i&&(l=s[a=Ni(mn(e))]),l&&rt(l,t,6,r);const c=s[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,rt(c,t,6,r)}}function Ll(t,e,n=!1){const s=e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!z(t)){const l=c=>{const u=Ll(c,e,!0);u&&(a=!0,Fe(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(s.set(t,null),null):(K(i)?i.forEach(l=>o[l]=null):Fe(o,i),s.set(t,o),o)}function qi(t,e){return!t||!Gs(e)?!1:(e=e.slice(2).replace(/Once$/,""),Z(t,e[0].toLowerCase()+e.slice(1))||Z(t,mn(e))||Z(t,e))}let ut=null,or=null;function ar(t){const e=ut;return ut=t,or=t&&t.type.__scopeId||null,e}function uE(t){or=t}function hE(){or=null}function Qd(t,e=ut,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&ic(-1);const i=ar(e),o=t(...r);return ar(i),s._d&&ic(1),o};return s._n=!0,s._c=!0,s._d=!0,s}function Bi(t){const{type:e,vnode:n,proxy:s,withProxy:r,props:i,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:d,setupState:g,ctx:w,inheritAttrs:M}=t;let S,N;const $=ar(t);try{if(n.shapeFlag&4){const J=r||s;S=dt(u.call(J,J,h,i,g,d,w)),N=l}else{const J=e;S=dt(J.length>1?J(i,{attrs:l,slots:a,emit:c}):J(i,null)),N=e.props?l:Yd(l)}}catch(J){rs.length=0,yr(J,t,1),S=Ze(ss)}let Q=S;if(N&&M!==!1){const J=Object.keys(N),{shapeFlag:Oe}=Q;J.length&&Oe&(1|6)&&(o&&J.some(_i)&&(N=Xd(N,o)),Q=os(Q,N))}return n.dirs&&(Q.dirs=Q.dirs?Q.dirs.concat(n.dirs):n.dirs),n.transition&&(Q.transition=n.transition),S=Q,ar($),S}const Yd=t=>{let e;for(const n in t)(n==="class"||n==="style"||Gs(n))&&((e||(e={}))[n]=t[n]);return e},Xd=(t,e)=>{const n={};for(const s in t)(!_i(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function Jd(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?Fl(s,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==s[d]&&!qi(c,d))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Fl(s,o,c):!0:!!o;return!1}function Fl(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!qi(n,i))return!0}return!1}function Zd({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const ep=t=>t.__isSuspense;function tp(t,e){e&&e.pendingBranch?K(t)?e.effects.push(...t):e.effects.push(t):Jp(t)}function lr(t,e){if(Se){let n=Se.provides;const s=Se.parent&&Se.parent.provides;s===n&&(n=Se.provides=Object.create(s)),n[t]=e}}function ht(t,e,n=!1){const s=Se||ut;if(s){const r=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(r&&t in r)return r[t];if(arguments.length>1)return n&&z(e)?e.call(s.proxy):e}}function Vl(t){return z(t)?{setup:t,name:t.name}:t}const Hi=t=>!!t.type.__asyncLoader,Ul=t=>t.type.__isKeepAlive;function np(t,e){$l(t,"a",e)}function sp(t,e){$l(t,"da",e)}function $l(t,e,n=Se){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}t()});if(cr(e,s,n),n){let r=n.parent;for(;r&&r.parent;)Ul(r.parent.vnode)&&rp(s,e,n,r),r=r.parent}}function rp(t,e,n,s){const r=cr(e,t,s,!0);jl(()=>{ol(s[e],r)},n)}function cr(t,e,n=Se,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;vn(),En(n);const a=rt(e,n,t,o);return zt(),qt(),a});return s?r.unshift(i):r.push(i),i}}const Et=t=>(e,n=Se)=>(!mr||t==="sp")&&cr(t,e,n),ip=Et("bm"),op=Et("m"),ap=Et("bu"),lp=Et("u"),cp=Et("bum"),jl=Et("um"),up=Et("sp"),hp=Et("rtg"),fp=Et("rtc");function dp(t,e=Se){cr("ec",t,e)}let Ki=!0;function pp(t){const e=Hl(t),n=t.proxy,s=t.ctx;Ki=!1,e.beforeCreate&&ql(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:g,updated:w,activated:M,deactivated:S,beforeDestroy:N,beforeUnmount:$,destroyed:Q,unmounted:J,render:Oe,renderTracked:Pe,renderTriggered:gt,errorCaptured:ln,serverPrefetch:it,expose:Ct,inheritAttrs:mt,components:yt,directives:cn,filters:un}=e;if(c&&gp(c,s,null,t.appContext.config.unwrapInjectedRef),o)for(const ce in o){const ie=o[ce];z(ie)&&(s[ce]=ie.bind(n))}if(r){const ce=r.call(n,n);Te(ce)&&(t.data=es(ce))}if(Ki=!0,i)for(const ce in i){const ie=i[ce],Xe=z(ie)?ie.bind(n,n):z(ie.get)?ie.get.bind(n,n):st,fn=!z(ie)&&z(ie.set)?ie.set.bind(n):st,vt=ct({get:Xe,set:fn});Object.defineProperty(s,ce,{enumerable:!0,configurable:!0,get:()=>vt.value,set:ot=>vt.value=ot})}if(a)for(const ce in a)Bl(a[ce],s,n,ce);if(l){const ce=z(l)?l.call(n):l;Reflect.ownKeys(ce).forEach(ie=>{lr(ie,ce[ie])})}u&&ql(u,t,"c");function Ie(ce,ie){K(ie)?ie.forEach(Xe=>ce(Xe.bind(n))):ie&&ce(ie.bind(n))}if(Ie(ip,h),Ie(op,d),Ie(ap,g),Ie(lp,w),Ie(np,M),Ie(sp,S),Ie(dp,ln),Ie(fp,Pe),Ie(hp,gt),Ie(cp,$),Ie(jl,J),Ie(up,it),K(Ct))if(Ct.length){const ce=t.exposed||(t.exposed={});Ct.forEach(ie=>{Object.defineProperty(ce,ie,{get:()=>n[ie],set:Xe=>n[ie]=Xe})})}else t.exposed||(t.exposed={});Oe&&t.render===st&&(t.render=Oe),mt!=null&&(t.inheritAttrs=mt),yt&&(t.components=yt),cn&&(t.directives=cn)}function gp(t,e,n=st,s=!1){K(t)&&(t=zi(t));for(const r in t){const i=t[r];let o;Te(i)?"default"in i?o=ht(i.from||r,i.default,!0):o=ht(i.from||r):o=ht(i),Ke(o)&&s?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[r]=o}}function ql(t,e,n){rt(K(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function Bl(t,e,n,s){const r=s.includes(".")?Ic(n,s):()=>n[s];if(_e(t)){const i=e[t];z(i)&&wr(r,i)}else if(z(t))wr(r,t.bind(n));else if(Te(t))if(K(t))t.forEach(i=>Bl(i,e,n,s));else{const i=z(t.handler)?t.handler.bind(n):e[t.handler];z(i)&&wr(r,i,t)}}function Hl(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!r.length&&!n&&!s?l=e:(l={},r.length&&r.forEach(c=>ur(l,c,o,!0)),ur(l,e,o)),i.set(e,l),l}function ur(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&ur(t,i,n,!0),r&&r.forEach(o=>ur(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=mp[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const mp={data:Kl,props:Bt,emits:Bt,methods:Bt,computed:Bt,beforeCreate:Ve,created:Ve,beforeMount:Ve,mounted:Ve,beforeUpdate:Ve,updated:Ve,beforeDestroy:Ve,beforeUnmount:Ve,destroyed:Ve,unmounted:Ve,activated:Ve,deactivated:Ve,errorCaptured:Ve,serverPrefetch:Ve,components:Bt,directives:Bt,watch:vp,provide:Kl,inject:yp};function Kl(t,e){return e?t?function(){return Fe(z(t)?t.call(this,this):t,z(e)?e.call(this,this):e)}:e:t}function yp(t,e){return Bt(zi(t),zi(e))}function zi(t){if(K(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ve(t,e){return t?[...new Set([].concat(t,e))]:e}function Bt(t,e){return t?Fe(Fe(Object.create(null),t),e):e}function vp(t,e){if(!t)return e;if(!e)return t;const n=Fe(Object.create(null),t);for(const s in e)n[s]=Ve(t[s],e[s]);return n}function wp(t,e,n,s=!1){const r={},i={};Js(i,dr,1),t.propsDefaults=Object.create(null),zl(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:qd(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function Ep(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=te(r),[l]=t.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];const g=e[d];if(l)if(Z(i,d))g!==i[d]&&(i[d]=g,c=!0);else{const w=lt(d);r[w]=Gi(l,a,w,g,t,!1)}else g!==i[d]&&(i[d]=g,c=!0)}}}else{zl(t,e,r,i)&&(c=!0);let u;for(const h in a)(!e||!Z(e,h)&&((u=mn(h))===h||!Z(e,u)))&&(l?n&&(n[h]!==void 0||n[u]!==void 0)&&(r[h]=Gi(l,a,h,void 0,t,!0)):delete r[h]);if(i!==a)for(const h in i)(!e||!Z(e,h))&&(delete i[h],c=!0)}c&&wt(t,"set","$attrs")}function zl(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Qs(l))continue;const c=e[l];let u;r&&Z(r,u=lt(l))?!i||!i.includes(u)?n[u]=c:(a||(a={}))[u]=c:qi(t.emitsOptions,l)||c!==s[l]&&(s[l]=c,o=!0)}if(i){const l=te(n),c=a||he;for(let u=0;u<i.length;u++){const h=i[u];n[h]=Gi(r,l,h,c[h],t,!Z(c,h))}}return o}function Gi(t,e,n,s,r,i){const o=t[n];if(o!=null){const a=Z(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&z(l)){const{propsDefaults:c}=r;n in c?s=c[n]:(En(r),s=c[n]=l.call(null,e),zt())}else s=l}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===mn(n))&&(s=!0))}return s}function Gl(t,e,n=!1){const s=e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},a=[];let l=!1;if(!z(t)){const u=h=>{l=!0;const[d,g]=Gl(h,e,!0);Fe(o,d),g&&a.push(...g)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return s.set(t,pn),pn;if(K(i))for(let u=0;u<i.length;u++){const h=lt(i[u]);Wl(h)&&(o[h]=he)}else if(i)for(const u in i){const h=lt(u);if(Wl(h)){const d=i[u],g=o[h]=K(d)||z(d)?{type:d}:d;if(g){const w=Xl(Boolean,g.type),M=Xl(String,g.type);g[0]=w>-1,g[1]=M<0||w<M,(w>-1||Z(g,"default"))&&a.push(h)}}}const c=[o,a];return s.set(t,c),c}function Wl(t){return t[0]!=="$"}function Ql(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function Yl(t,e){return Ql(t)===Ql(e)}function Xl(t,e){return K(e)?e.findIndex(n=>Yl(n,t)):z(e)&&Yl(e,t)?0:-1}const Jl=t=>t[0]==="_"||t==="$stable",Wi=t=>K(t)?t.map(dt):[dt(t)],Ip=(t,e,n)=>{const s=Qd((...r)=>Wi(e(...r)),n);return s._c=!1,s},Zl=(t,e,n)=>{const s=t._ctx;for(const r in t){if(Jl(r))continue;const i=t[r];if(z(i))e[r]=Ip(r,i,s);else if(i!=null){const o=Wi(i);e[r]=()=>o}}},ec=(t,e)=>{const n=Wi(e);t.slots.default=()=>n},Tp=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=te(e),Js(e,"_",n)):Zl(e,t.slots={})}else t.slots={},e&&ec(t,e);Js(t.slots,dr,1)},bp=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=he;if(s.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:(Fe(r,e),!n&&a===1&&delete r._):(i=!e.$stable,Zl(e,r)),o=e}else e&&(ec(t,e),o={default:1});if(i)for(const a in r)!Jl(a)&&!(a in o)&&delete r[a]};function Ht(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let l=a.dir[s];l&&(vn(),rt(l,n,8,[t.el,a,t,e]),qt())}}function tc(){return{app:null,config:{isNativeTag:od,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ap=0;function _p(t,e){return function(s,r=null){r!=null&&!Te(r)&&(r=null);const i=tc(),o=new Set;let a=!1;const l=i.app={_uid:Ap++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:eg,get config(){return i.config},set config(c){},use(c,...u){return o.has(c)||(c&&z(c.install)?(o.add(c),c.install(l,...u)):z(c)&&(o.add(c),c(l,...u))),l},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),l},component(c,u){return u?(i.components[c]=u,l):i.components[c]},directive(c,u){return u?(i.directives[c]=u,l):i.directives[c]},mount(c,u,h){if(!a){const d=Ze(s,r);return d.appContext=i,u&&e?e(d,c):t(d,c,h),a=!0,l._container=c,c.__vue_app__=l,eo(d.component)||d.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return i.provides[c]=u,l}};return l}}const Ue=tp;function Sp(t){return Cp(t)}function Cp(t,e){const n=dd();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:d,setScopeId:g=st,cloneNode:w,insertStaticContent:M}=t,S=(f,p,m,E=null,v=null,_=null,R=!1,T=null,b=!!p.dynamicChildren)=>{if(f===p)return;f&&!is(f,p)&&(E=L(f),Je(f,v,_,!0),f=null),p.patchFlag===-2&&(b=!1,p.dynamicChildren=null);const{type:I,ref:F,shapeFlag:O}=p;switch(I){case Yi:N(f,p,m,E);break;case ss:$(f,p,m,E);break;case hr:f==null&&Q(p,m,E,R);break;case It:cn(f,p,m,E,v,_,R,T,b);break;default:O&1?Pe(f,p,m,E,v,_,R,T,b):O&6?un(f,p,m,E,v,_,R,T,b):(O&64||O&128)&&I.process(f,p,m,E,v,_,R,T,b,ue)}F!=null&&v&&Qi(F,f&&f.ref,_,p||f,!p)},N=(f,p,m,E)=>{if(f==null)s(p.el=a(p.children),m,E);else{const v=p.el=f.el;p.children!==f.children&&c(v,p.children)}},$=(f,p,m,E)=>{f==null?s(p.el=l(p.children||""),m,E):p.el=f.el},Q=(f,p,m,E)=>{[f.el,f.anchor]=M(f.children,p,m,E)},J=({el:f,anchor:p},m,E)=>{let v;for(;f&&f!==p;)v=d(f),s(f,m,E),f=v;s(p,m,E)},Oe=({el:f,anchor:p})=>{let m;for(;f&&f!==p;)m=d(f),r(f),f=m;r(p)},Pe=(f,p,m,E,v,_,R,T,b)=>{R=R||p.type==="svg",f==null?gt(p,m,E,v,_,R,T,b):Ct(f,p,v,_,R,T,b)},gt=(f,p,m,E,v,_,R,T)=>{let b,I;const{type:F,props:O,shapeFlag:V,transition:q,patchFlag:X,dirs:de}=f;if(f.el&&w!==void 0&&X===-1)b=f.el=w(f.el);else{if(b=f.el=o(f.type,_,O&&O.is,O),V&8?u(b,f.children):V&16&&it(f.children,b,null,E,v,_&&F!=="foreignObject",R,T),de&&Ht(f,null,E,"created"),O){for(const fe in O)fe!=="value"&&!Qs(fe)&&i(b,fe,null,O[fe],_,f.children,E,v,C);"value"in O&&i(b,"value",null,O.value),(I=O.onVnodeBeforeMount)&&ft(I,E,f)}ln(b,f,f.scopeId,R,E)}de&&Ht(f,null,E,"beforeMount");const ae=(!v||v&&!v.pendingBranch)&&q&&!q.persisted;ae&&q.beforeEnter(b),s(b,p,m),((I=O&&O.onVnodeMounted)||ae||de)&&Ue(()=>{I&&ft(I,E,f),ae&&q.enter(b),de&&Ht(f,null,E,"mounted")},v)},ln=(f,p,m,E,v)=>{if(m&&g(f,m),E)for(let _=0;_<E.length;_++)g(f,E[_]);if(v){let _=v.subTree;if(p===_){const R=v.vnode;ln(f,R,R.scopeId,R.slotScopeIds,v.parent)}}},it=(f,p,m,E,v,_,R,T,b=0)=>{for(let I=b;I<f.length;I++){const F=f[I]=T?xt(f[I]):dt(f[I]);S(null,F,p,m,E,v,_,R,T)}},Ct=(f,p,m,E,v,_,R)=>{const T=p.el=f.el;let{patchFlag:b,dynamicChildren:I,dirs:F}=p;b|=f.patchFlag&16;const O=f.props||he,V=p.props||he;let q;(q=V.onVnodeBeforeUpdate)&&ft(q,m,p,f),F&&Ht(p,f,m,"beforeUpdate");const X=v&&p.type!=="foreignObject";if(I?mt(f.dynamicChildren,I,T,m,E,X,_):R||Xe(f,p,T,null,m,E,X,_,!1),b>0){if(b&16)yt(T,p,O,V,m,E,v);else if(b&2&&O.class!==V.class&&i(T,"class",null,V.class,v),b&4&&i(T,"style",O.style,V.style,v),b&8){const de=p.dynamicProps;for(let ae=0;ae<de.length;ae++){const fe=de[ae],nt=O[fe],dn=V[fe];(dn!==nt||fe==="value")&&i(T,fe,nt,dn,v,f.children,m,E,C)}}b&1&&f.children!==p.children&&u(T,p.children)}else!R&&I==null&&yt(T,p,O,V,m,E,v);((q=V.onVnodeUpdated)||F)&&Ue(()=>{q&&ft(q,m,p,f),F&&Ht(p,f,m,"updated")},E)},mt=(f,p,m,E,v,_,R)=>{for(let T=0;T<p.length;T++){const b=f[T],I=p[T],F=b.el&&(b.type===It||!is(b,I)||b.shapeFlag&(6|64))?h(b.el):m;S(b,I,F,null,E,v,_,R,!0)}},yt=(f,p,m,E,v,_,R)=>{if(m!==E){for(const T in E){if(Qs(T))continue;const b=E[T],I=m[T];b!==I&&T!=="value"&&i(f,T,I,b,R,p.children,v,_,C)}if(m!==he)for(const T in m)!Qs(T)&&!(T in E)&&i(f,T,m[T],null,R,p.children,v,_,C);"value"in E&&i(f,"value",m.value,E.value)}},cn=(f,p,m,E,v,_,R,T,b)=>{const I=p.el=f?f.el:a(""),F=p.anchor=f?f.anchor:a("");let{patchFlag:O,dynamicChildren:V,slotScopeIds:q}=p;q&&(T=T?T.concat(q):q),f==null?(s(I,m,E),s(F,m,E),it(p.children,m,F,v,_,R,T,b)):O>0&&O&64&&V&&f.dynamicChildren?(mt(f.dynamicChildren,V,m,v,_,R,T),(p.key!=null||v&&p===v.subTree)&&nc(f,p,!0)):Xe(f,p,m,F,v,_,R,T,b)},un=(f,p,m,E,v,_,R,T,b)=>{p.slotScopeIds=T,f==null?p.shapeFlag&512?v.ctx.activate(p,m,E,R,b):hn(p,m,E,v,_,R,b):Ie(f,p,b)},hn=(f,p,m,E,v,_,R)=>{const T=f.component=jp(f,E,v);if(Ul(f)&&(T.ctx.renderer=ue),qp(T),T.asyncDep){if(v&&v.registerDep(T,ce),!f.el){const b=T.subTree=Ze(ss);$(null,b,p,m)}return}ce(T,f,p,m,v,_,R)},Ie=(f,p,m)=>{const E=p.component=f.component;if(Jd(f,p,m))if(E.asyncDep&&!E.asyncResolved){ie(E,p,m);return}else E.next=p,Yp(E.update),E.update();else p.component=f.component,p.el=f.el,E.vnode=p},ce=(f,p,m,E,v,_,R)=>{const T=()=>{if(f.isMounted){let{next:F,bu:O,u:V,parent:q,vnode:X}=f,de=F,ae;b.allowRecurse=!1,F?(F.el=X.el,ie(f,F,R)):F=X,O&&Ri(O),(ae=F.props&&F.props.onVnodeBeforeUpdate)&&ft(ae,q,F,X),b.allowRecurse=!0;const fe=Bi(f),nt=f.subTree;f.subTree=fe,S(nt,fe,h(nt.el),L(nt),f,v,_),F.el=fe.el,de===null&&Zd(f,fe.el),V&&Ue(V,v),(ae=F.props&&F.props.onVnodeUpdated)&&Ue(()=>ft(ae,q,F,X),v)}else{let F;const{el:O,props:V}=p,{bm:q,m:X,parent:de}=f,ae=Hi(p);if(b.allowRecurse=!1,q&&Ri(q),!ae&&(F=V&&V.onVnodeBeforeMount)&&ft(F,de,p),b.allowRecurse=!0,O&&H){const fe=()=>{f.subTree=Bi(f),H(O,f.subTree,f,v,null)};ae?p.type.__asyncLoader().then(()=>!f.isUnmounted&&fe()):fe()}else{const fe=f.subTree=Bi(f);S(null,fe,m,E,f,v,_),p.el=fe.el}if(X&&Ue(X,v),!ae&&(F=V&&V.onVnodeMounted)){const fe=p;Ue(()=>ft(F,de,fe),v)}p.shapeFlag&256&&f.a&&Ue(f.a,v),f.isMounted=!0,p=m=E=null}},b=new ki(T,()=>pc(f.update),f.scope),I=f.update=b.run.bind(b);I.id=f.uid,b.allowRecurse=I.allowRecurse=!0,I()},ie=(f,p,m)=>{p.component=f;const E=f.vnode.props;f.vnode=p,f.next=null,Ep(f,p.props,E,m),bp(f,p.children,m),vn(),ro(void 0,f.update),qt()},Xe=(f,p,m,E,v,_,R,T,b=!1)=>{const I=f&&f.children,F=f?f.shapeFlag:0,O=p.children,{patchFlag:V,shapeFlag:q}=p;if(V>0){if(V&128){vt(I,O,m,E,v,_,R,T,b);return}else if(V&256){fn(I,O,m,E,v,_,R,T,b);return}}q&8?(F&16&&C(I,v,_),O!==I&&u(m,O)):F&16?q&16?vt(I,O,m,E,v,_,R,T,b):C(I,v,_,!0):(F&8&&u(m,""),q&16&&it(O,m,E,v,_,R,T,b))},fn=(f,p,m,E,v,_,R,T,b)=>{f=f||pn,p=p||pn;const I=f.length,F=p.length,O=Math.min(I,F);let V;for(V=0;V<O;V++){const q=p[V]=b?xt(p[V]):dt(p[V]);S(f[V],q,m,null,v,_,R,T,b)}I>F?C(f,v,_,!0,!1,O):it(p,m,E,v,_,R,T,b,O)},vt=(f,p,m,E,v,_,R,T,b)=>{let I=0;const F=p.length;let O=f.length-1,V=F-1;for(;I<=O&&I<=V;){const q=f[I],X=p[I]=b?xt(p[I]):dt(p[I]);if(is(q,X))S(q,X,m,null,v,_,R,T,b);else break;I++}for(;I<=O&&I<=V;){const q=f[O],X=p[V]=b?xt(p[V]):dt(p[V]);if(is(q,X))S(q,X,m,null,v,_,R,T,b);else break;O--,V--}if(I>O){if(I<=V){const q=V+1,X=q<F?p[q].el:E;for(;I<=V;)S(null,p[I]=b?xt(p[I]):dt(p[I]),m,X,v,_,R,T,b),I++}}else if(I>V)for(;I<=O;)Je(f[I],v,_,!0),I++;else{const q=I,X=I,de=new Map;for(I=X;I<=V;I++){const Ge=p[I]=b?xt(p[I]):dt(p[I]);Ge.key!=null&&de.set(Ge.key,I)}let ae,fe=0;const nt=V-X+1;let dn=!1,tl=0;const Yn=new Array(nt);for(I=0;I<nt;I++)Yn[I]=0;for(I=q;I<=O;I++){const Ge=f[I];if(fe>=nt){Je(Ge,v,_,!0);continue}let at;if(Ge.key!=null)at=de.get(Ge.key);else for(ae=X;ae<=V;ae++)if(Yn[ae-X]===0&&is(Ge,p[ae])){at=ae;break}at===void 0?Je(Ge,v,_,!0):(Yn[at-X]=I+1,at>=tl?tl=at:dn=!0,S(Ge,p[at],m,null,v,_,R,T,b),fe++)}const nl=dn?Np(Yn):pn;for(ae=nl.length-1,I=nt-1;I>=0;I--){const Ge=X+I,at=p[Ge],sl=Ge+1<F?p[Ge+1].el:E;Yn[I]===0?S(null,at,m,sl,v,_,R,T,b):dn&&(ae<0||I!==nl[ae]?ot(at,m,sl,2):ae--)}}},ot=(f,p,m,E,v=null)=>{const{el:_,type:R,transition:T,children:b,shapeFlag:I}=f;if(I&6){ot(f.component.subTree,p,m,E);return}if(I&128){f.suspense.move(p,m,E);return}if(I&64){R.move(f,p,m,ue);return}if(R===It){s(_,p,m);for(let O=0;O<b.length;O++)ot(b[O],p,m,E);s(f.anchor,p,m);return}if(R===hr){J(f,p,m);return}if(E!==2&&I&1&&T)if(E===0)T.beforeEnter(_),s(_,p,m),Ue(()=>T.enter(_),v);else{const{leave:O,delayLeave:V,afterLeave:q}=T,X=()=>s(_,p,m),de=()=>{O(_,()=>{X(),q&&q()})};V?V(_,X,de):de()}else s(_,p,m)},Je=(f,p,m,E=!1,v=!1)=>{const{type:_,props:R,ref:T,children:b,dynamicChildren:I,shapeFlag:F,patchFlag:O,dirs:V}=f;if(T!=null&&Qi(T,null,m,f,!0),F&256){p.ctx.deactivate(f);return}const q=F&1&&V,X=!Hi(f);let de;if(X&&(de=R&&R.onVnodeBeforeUnmount)&&ft(de,p,f),F&6)k(f.component,m,E);else{if(F&128){f.suspense.unmount(m,E);return}q&&Ht(f,null,p,"beforeUnmount"),F&64?f.type.remove(f,p,m,v,ue,E):I&&(_!==It||O>0&&O&64)?C(I,p,m,!1,!0):(_===It&&O&(128|256)||!v&&F&16)&&C(b,p,m),E&&Ii(f)}(X&&(de=R&&R.onVnodeUnmounted)||q)&&Ue(()=>{de&&ft(de,p,f),q&&Ht(f,null,p,"unmounted")},m)},Ii=f=>{const{type:p,el:m,anchor:E,transition:v}=f;if(p===It){y(m,E);return}if(p===hr){Oe(f);return}const _=()=>{r(m),v&&!v.persisted&&v.afterLeave&&v.afterLeave()};if(f.shapeFlag&1&&v&&!v.persisted){const{leave:R,delayLeave:T}=v,b=()=>R(m,_);T?T(f.el,_,b):b()}else _()},y=(f,p)=>{let m;for(;f!==p;)m=d(f),r(f),f=m;r(p)},k=(f,p,m)=>{const{bum:E,scope:v,update:_,subTree:R,um:T}=f;E&&Ri(E),v.stop(),_&&(_.active=!1,Je(R,f,p,m)),T&&Ue(T,p),Ue(()=>{f.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&f.asyncDep&&!f.asyncResolved&&f.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},C=(f,p,m,E=!1,v=!1,_=0)=>{for(let R=_;R<f.length;R++)Je(f[R],p,m,E,v)},L=f=>f.shapeFlag&6?L(f.component.subTree):f.shapeFlag&128?f.suspense.next():d(f.anchor||f.el),oe=(f,p,m)=>{f==null?p._vnode&&Je(p._vnode,null,null,!0):S(p._vnode||null,f,p,null,null,null,m),yc(),p._vnode=f},ue={p:S,um:Je,m:ot,r:Ii,mt:hn,mc:it,pc:Xe,pbc:mt,n:L,o:t};let W,H;return e&&([W,H]=e(ue)),{render:oe,hydrate:W,createApp:_p(oe,W)}}function Qi(t,e,n,s,r=!1){if(K(t)){t.forEach((d,g)=>Qi(d,e&&(K(e)?e[g]:e),n,s,r));return}if(Hi(s)&&!r)return;const i=s.shapeFlag&4?eo(s.component)||s.component.proxy:s.el,o=r?null:i,{i:a,r:l}=t,c=e&&e.r,u=a.refs===he?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(_e(c)?(u[c]=null,Z(h,c)&&(h[c]=null)):Ke(c)&&(c.value=null)),_e(l)){const d=()=>{u[l]=o,Z(h,l)&&(h[l]=o)};o?(d.id=-1,Ue(d,n)):d()}else if(Ke(l)){const d=()=>{l.value=o};o?(d.id=-1,Ue(d,n)):d()}else z(l)&&Dt(l,a,12,[o,u])}function ft(t,e,n,s=null){rt(t,e,7,[n,s])}function nc(t,e,n=!1){const s=t.children,r=e.children;if(K(s)&&K(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=xt(r[i]),a.el=o.el),n||nc(o,a))}}function Np(t){const e=t.slice(),n=[0];let s,r,i,o,a;const l=t.length;for(s=0;s<l;s++){const c=t[s];if(c!==0){if(r=n[n.length-1],t[r]<c){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<c?i=a+1:o=a;c<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}const Rp=t=>t.__isTeleport,sc="components";function fE(t,e){return Dp(sc,t,!0,e)||t}const xp=Symbol();function Dp(t,e,n=!0,s=!1){const r=ut||Se;if(r){const i=r.type;if(t===sc){const a=zp(i);if(a&&(a===e||a===lt(e)||a===Xs(lt(e))))return i}const o=rc(r[t]||i[t],e)||rc(r.appContext[t],e);return!o&&s?i:o}}function rc(t,e){return t&&(t[e]||t[lt(e)]||t[Xs(lt(e))])}const It=Symbol(void 0),Yi=Symbol(void 0),ss=Symbol(void 0),hr=Symbol(void 0),rs=[];let Kt=null;function dE(t=!1){rs.push(Kt=t?null:[])}function Op(){rs.pop(),Kt=rs[rs.length-1]||null}let fr=1;function ic(t){fr+=t}function Pp(t){return t.dynamicChildren=fr>0?Kt||pn:null,Op(),fr>0&&Kt&&Kt.push(t),t}function pE(t,e,n,s,r,i){return Pp(ac(t,e,n,s,r,i,!0))}function Xi(t){return t?t.__v_isVNode===!0:!1}function is(t,e){return t.type===e.type&&t.key===e.key}const dr="__vInternal",oc=({key:t})=>t!=null?t:null,pr=({ref:t})=>t!=null?_e(t)||Ke(t)||z(t)?{i:ut,r:t}:t:null;function ac(t,e=null,n=null,s=0,r=null,i=t===It?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&oc(e),ref:e&&pr(e),scopeId:or,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null};return a?(Ji(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=_e(n)?8:16),fr>0&&!o&&Kt&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Kt.push(l),l}const Ze=kp;function kp(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===xp)&&(t=ss),Xi(t)){const a=os(t,e,!0);return n&&Ji(a,n),a}if(Gp(t)&&(t=t.__vccOpts),e){e=Mp(e);let{class:a,style:l}=e;a&&!_e(a)&&(e.class=Ai(a)),Te(l)&&(xl(l)&&!K(l)&&(l=Fe({},l)),e.style=bi(l))}const o=_e(t)?1:ep(t)?128:Rp(t)?64:Te(t)?4:z(t)?2:0;return ac(t,e,n,s,r,o,i,!0)}function Mp(t){return t?xl(t)||dr in t?Fe({},t):t:null}function os(t,e,n=!1){const{props:s,ref:r,patchFlag:i,children:o}=t,a=e?Fp(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&oc(a),ref:e&&e.ref?n&&r?K(r)?r.concat(pr(e)):[r,pr(e)]:pr(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==It?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&os(t.ssContent),ssFallback:t.ssFallback&&os(t.ssFallback),el:t.el,anchor:t.anchor}}function Lp(t=" ",e=0){return Ze(Yi,null,t,e)}function gE(t,e){const n=Ze(hr,null,t);return n.staticCount=e,n}function dt(t){return t==null||typeof t=="boolean"?Ze(ss):K(t)?Ze(It,null,t.slice()):typeof t=="object"?xt(t):Ze(Yi,null,String(t))}function xt(t){return t.el===null||t.memo?t:os(t)}function Ji(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(K(e))n=16;else if(typeof e=="object")if(s&(1|64)){const r=e.default;r&&(r._c&&(r._d=!1),Ji(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!(dr in e)?e._ctx=ut:r===3&&ut&&(ut.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else z(e)?(e={default:e,_ctx:ut},n=32):(e=String(e),s&64?(n=16,e=[Lp(e)]):n=8);t.children=e,t.shapeFlag|=n}function Fp(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=Ai([e.class,s.class]));else if(r==="style")e.style=bi([e.style,s.style]);else if(Gs(r)){const i=e[r],o=s[r];i!==o&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function mE(t,e,n,s){let r;const i=n&&n[s];if(K(t)||_e(t)){r=new Array(t.length);for(let o=0,a=t.length;o<a;o++)r[o]=e(t[o],o,void 0,i&&i[o])}else if(typeof t=="number"){r=new Array(t);for(let o=0;o<t;o++)r[o]=e(o+1,o,void 0,i&&i[o])}else if(Te(t))if(t[Symbol.iterator])r=Array.from(t,(o,a)=>e(o,a,void 0,i&&i[a]));else{const o=Object.keys(t);r=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];r[a]=e(t[c],c,a,i&&i[a])}}else r=[];return n&&(n[s]=r),r}const Zi=t=>t?lc(t)?eo(t)||t.proxy:Zi(t.parent):null,gr=Fe(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Zi(t.parent),$root:t=>Zi(t.root),$emit:t=>t.emit,$options:t=>Hl(t),$forceUpdate:t=>()=>pc(t.update),$nextTick:t=>dc.bind(t.proxy),$watch:t=>Zp.bind(t)}),Vp={get({_:t},e){const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 0:return s[e];case 1:return r[e];case 3:return n[e];case 2:return i[e]}else{if(s!==he&&Z(s,e))return o[e]=0,s[e];if(r!==he&&Z(r,e))return o[e]=1,r[e];if((c=t.propsOptions[0])&&Z(c,e))return o[e]=2,i[e];if(n!==he&&Z(n,e))return o[e]=3,n[e];Ki&&(o[e]=4)}}const u=gr[e];let h,d;if(u)return e==="$attrs"&&We(t,"get",e),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==he&&Z(n,e))return o[e]=3,n[e];if(d=l.config.globalProperties,Z(d,e))return d[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;if(r!==he&&Z(r,e))r[e]=n;else if(s!==he&&Z(s,e))s[e]=n;else if(Z(t.props,e))return!1;return e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:i}},o){let a;return n[o]!==void 0||t!==he&&Z(t,o)||e!==he&&Z(e,o)||(a=i[0])&&Z(a,o)||Z(s,o)||Z(gr,o)||Z(r.config.globalProperties,o)}},Up=tc();let $p=0;function jp(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||Up,i={uid:$p++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,update:null,scope:new pd(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Gl(s,r),emitsOptions:Ll(s,r),emit:null,emitted:null,propsDefaults:he,inheritAttrs:s.inheritAttrs,ctx:he,data:he,props:he,attrs:he,slots:he,refs:he,setupState:he,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Wd.bind(null,i),t.ce&&t.ce(i),i}let Se=null;const En=t=>{Se=t,t.scope.on()},zt=()=>{Se&&Se.scope.off(),Se=null};function lc(t){return t.vnode.shapeFlag&4}let mr=!1;function qp(t,e=!1){mr=e;const{props:n,children:s}=t.vnode,r=lc(t);wp(t,n,r,e),Tp(t,s);const i=r?Bp(t,e):void 0;return mr=!1,i}function Bp(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Dl(new Proxy(t.ctx,Vp));const{setup:s}=n;if(s){const r=t.setupContext=s.length>1?Kp(t):null;En(t),vn();const i=Dt(s,t,0,[t.props,r]);if(qt(),zt(),ll(i)){if(i.then(zt,zt),e)return i.then(o=>{cc(t,o,e)}).catch(o=>{yr(o,t,0)});t.asyncDep=i}else cc(t,i,e)}else hc(t,e)}function cc(t,e,n){z(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Te(e)&&(t.setupState=Ml(e)),hc(t,n)}let uc;function hc(t,e,n){const s=t.type;if(!t.render){if(!e&&uc&&!s.render){const r=s.template;if(r){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=s,c=Fe(Fe({isCustomElement:i,delimiters:a},o),l);s.render=uc(r,c)}}t.render=s.render||st}En(t),vn(),pp(t),qt(),zt()}function Hp(t){return new Proxy(t.attrs,{get(e,n){return We(t,"get","$attrs"),e[n]}})}function Kp(t){const e=s=>{t.exposed=s||{}};let n;return{get attrs(){return n||(n=Hp(t))},slots:t.slots,emit:t.emit,expose:e}}function eo(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Ml(Dl(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in gr)return gr[n](t)}}))}function zp(t){return z(t)&&t.displayName||t.name}function Gp(t){return z(t)&&"__vccOpts"in t}function Dt(t,e,n,s){let r;try{r=s?t(...s):t()}catch(i){yr(i,e,n)}return r}function rt(t,e,n,s){if(z(t)){const i=Dt(t,e,n,s);return i&&ll(i)&&i.catch(o=>{yr(o,e,n)}),i}const r=[];for(let i=0;i<t.length;i++)r.push(rt(t[i],e,n,s));return r}function yr(t,e,n,s=!0){const r=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a=n;for(;i;){const c=i.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,o,a)===!1)return}i=i.parent}const l=e.appContext.config.errorHandler;if(l){Dt(l,null,10,[t,o,a]);return}}Wp(t,n,r,s)}function Wp(t,e,n,s=!0){console.error(t)}let vr=!1,to=!1;const Qe=[];let Tt=0;const as=[];let ls=null,In=0;const cs=[];let Ot=null,Tn=0;const fc=Promise.resolve();let no=null,so=null;function dc(t){const e=no||fc;return t?e.then(this?t.bind(this):t):e}function Qp(t){let e=Tt+1,n=Qe.length;for(;e<n;){const s=e+n>>>1;us(Qe[s])<t?e=s+1:n=s}return e}function pc(t){(!Qe.length||!Qe.includes(t,vr&&t.allowRecurse?Tt+1:Tt))&&t!==so&&(t.id==null?Qe.push(t):Qe.splice(Qp(t.id),0,t),gc())}function gc(){!vr&&!to&&(to=!0,no=fc.then(vc))}function Yp(t){const e=Qe.indexOf(t);e>Tt&&Qe.splice(e,1)}function mc(t,e,n,s){K(t)?n.push(...t):(!e||!e.includes(t,t.allowRecurse?s+1:s))&&n.push(t),gc()}function Xp(t){mc(t,ls,as,In)}function Jp(t){mc(t,Ot,cs,Tn)}function ro(t,e=null){if(as.length){for(so=e,ls=[...new Set(as)],as.length=0,In=0;In<ls.length;In++)ls[In]();ls=null,In=0,so=null,ro(t,e)}}function yc(t){if(cs.length){const e=[...new Set(cs)];if(cs.length=0,Ot){Ot.push(...e);return}for(Ot=e,Ot.sort((n,s)=>us(n)-us(s)),Tn=0;Tn<Ot.length;Tn++)Ot[Tn]();Ot=null,Tn=0}}const us=t=>t.id==null?1/0:t.id;function vc(t){to=!1,vr=!0,ro(t),Qe.sort((n,s)=>us(n)-us(s));const e=st;try{for(Tt=0;Tt<Qe.length;Tt++){const n=Qe[Tt];n&&n.active!==!1&&Dt(n,null,14)}}finally{Tt=0,Qe.length=0,yc(),vr=!1,no=null,(Qe.length||as.length||cs.length)&&vc(t)}}const wc={};function wr(t,e,n){return Ec(t,e,n)}function Ec(t,e,{immediate:n,deep:s,flush:r,onTrack:i,onTrigger:o}=he){const a=Se;let l,c=!1,u=!1;if(Ke(t)?(l=()=>t.value,c=!!t._shallow):wn(t)?(l=()=>t,s=!0):K(t)?(u=!0,c=t.some(wn),l=()=>t.map(N=>{if(Ke(N))return N.value;if(wn(N))return bn(N);if(z(N))return Dt(N,a,2)})):z(t)?e?l=()=>Dt(t,a,2):l=()=>{if(!(a&&a.isUnmounted))return h&&h(),rt(t,a,3,[d])}:l=st,e&&s){const N=l;l=()=>bn(N())}let h,d=N=>{h=S.onStop=()=>{Dt(N,a,4)}};if(mr)return d=st,e?n&&rt(e,a,3,[l(),u?[]:void 0,d]):l(),st;let g=u?[]:wc;const w=()=>{if(!!S.active)if(e){const N=S.run();(s||c||(u?N.some(($,Q)=>Xn($,g[Q])):Xn(N,g)))&&(h&&h(),rt(e,a,3,[N,g===wc?void 0:g,d]),g=N)}else S.run()};w.allowRecurse=!!e;let M;r==="sync"?M=w:r==="post"?M=()=>Ue(w,a&&a.suspense):M=()=>{!a||a.isMounted?Xp(w):w()};const S=new ki(l,M);return e?n?w():g=S.run():r==="post"?Ue(S.run.bind(S),a&&a.suspense):S.run(),()=>{S.stop(),a&&a.scope&&ol(a.scope.effects,S)}}function Zp(t,e,n){const s=this.proxy,r=_e(t)?t.includes(".")?Ic(s,t):()=>s[t]:t.bind(s,s);let i;z(e)?i=e:(i=e.handler,n=e);const o=Se;En(this);const a=Ec(r,i.bind(s),n);return o?En(o):zt(),a}function Ic(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}function bn(t,e){if(!Te(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Ke(t))bn(t.value,e);else if(K(t))for(let n=0;n<t.length;n++)bn(t[n],e);else if(al(t)||gn(t))t.forEach(n=>{bn(n,e)});else if(ul(t))for(const n in t)bn(t[n],e);return t}function Tc(t,e,n){const s=arguments.length;return s===2?Te(e)&&!K(e)?Xi(e)?Ze(t,null,[e]):Ze(t,e):Ze(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Xi(n)&&(n=[n]),Ze(t,e,n))}const eg="3.2.20",tg="http://www.w3.org/2000/svg",An=typeof document!="undefined"?document:null,bc=new Map,ng={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e?An.createElementNS(tg,t):An.createElement(t,n?{is:n}:void 0);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>An.createTextNode(t),createComment:t=>An.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>An.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,n,s){const r=n?n.previousSibling:e.lastChild;let i=bc.get(t);if(!i){const o=An.createElement("template");if(o.innerHTML=s?`<svg>${t}</svg>`:t,i=o.content,s){const a=i.firstChild;for(;a.firstChild;)i.appendChild(a.firstChild);i.removeChild(a)}bc.set(t,i)}return e.insertBefore(i.cloneNode(!0),n),[r?r.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function sg(t,e,n){const s=t._vtc;s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function rg(t,e,n){const s=t.style,r=s.display;if(!n)t.removeAttribute("style");else if(_e(n))e!==n&&(s.cssText=n);else{for(const i in n)io(s,i,n[i]);if(e&&!_e(e))for(const i in e)n[i]==null&&io(s,i,"")}"_vod"in t&&(s.display=r)}const Ac=/\s*!important$/;function io(t,e,n){if(K(n))n.forEach(s=>io(t,e,s));else if(e.startsWith("--"))t.setProperty(e,n);else{const s=ig(t,e);Ac.test(n)?t.setProperty(mn(s),n.replace(Ac,""),"important"):t[s]=n}}const _c=["Webkit","Moz","ms"],oo={};function ig(t,e){const n=oo[e];if(n)return n;let s=lt(e);if(s!=="filter"&&s in t)return oo[e]=s;s=Xs(s);for(let r=0;r<_c.length;r++){const i=_c[r]+s;if(i in t)return oo[e]=i}return e}const Sc="http://www.w3.org/1999/xlink";function og(t,e,n,s,r){if(s&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(Sc,e.slice(6,e.length)):t.setAttributeNS(Sc,e,n);else{const i=nd(e);n==null||i&&!rl(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function ag(t,e,n,s,r,i,o){if(e==="innerHTML"||e==="textContent"){s&&o(s,r,i),t[e]=n==null?"":n;return}if(e==="value"&&t.tagName!=="PROGRESS"){t._value=n;const a=n==null?"":n;t.value!==a&&(t.value=a),n==null&&t.removeAttribute(e);return}if(n===""||n==null){const a=typeof t[e];if(a==="boolean"){t[e]=rl(n);return}else if(n==null&&a==="string"){t[e]="",t.removeAttribute(e);return}else if(a==="number"){try{t[e]=0}catch{}t.removeAttribute(e);return}}try{t[e]=n}catch{}}let Er=Date.now,Cc=!1;if(typeof window!="undefined"){Er()>document.createEvent("Event").timeStamp&&(Er=()=>performance.now());const t=navigator.userAgent.match(/firefox\/(\d+)/i);Cc=!!(t&&Number(t[1])<=53)}let ao=0;const lg=Promise.resolve(),cg=()=>{ao=0},ug=()=>ao||(lg.then(cg),ao=Er());function hg(t,e,n,s){t.addEventListener(e,n,s)}function fg(t,e,n,s){t.removeEventListener(e,n,s)}function dg(t,e,n,s,r=null){const i=t._vei||(t._vei={}),o=i[e];if(s&&o)o.value=s;else{const[a,l]=pg(e);if(s){const c=i[e]=gg(s,r);hg(t,a,c,l)}else o&&(fg(t,a,o,l),i[e]=void 0)}}const Nc=/(?:Once|Passive|Capture)$/;function pg(t){let e;if(Nc.test(t)){e={};let n;for(;n=t.match(Nc);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[mn(t.slice(2)),e]}function gg(t,e){const n=s=>{const r=s.timeStamp||Er();(Cc||r>=n.attached-1)&&rt(mg(s,n.value),e,5,[s])};return n.value=t,n.attached=ug(),n}function mg(t,e){if(K(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s(r))}else return e}const Rc=/^on[a-z]/,yg=(t,e,n,s,r=!1,i,o,a,l)=>{e==="class"?sg(t,s,r):e==="style"?rg(t,n,s):Gs(e)?_i(e)||dg(t,e,n,s,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):vg(t,e,s,r))?ag(t,e,s,i,o,a,l):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),og(t,e,s,r))};function vg(t,e,n,s){return s?!!(e==="innerHTML"||e==="textContent"||e in t&&Rc.test(e)&&z(n)):e==="spellcheck"||e==="draggable"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||Rc.test(e)&&_e(n)?!1:e in t}const wg=Fe({patchProp:yg},ng);let xc;function Eg(){return xc||(xc=Sp(wg))}const yE=(...t)=>{const e=Eg().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=Ig(s);if(!r)return;const i=e._component;!z(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function Ig(t){return _e(t)?document.querySelector(t):t}/*!
  * vue-router v4.0.12
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */const Dc=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",_n=t=>Dc?Symbol(t):"_vr_"+t,Tg=_n("rvlm"),Oc=_n("rvd"),Ir=_n("r"),lo=_n("rl"),co=_n("rvl"),Sn=typeof window!="undefined";function bg(t){return t.__esModule||Dc&&t[Symbol.toStringTag]==="Module"}const le=Object.assign;function uo(t,e){const n={};for(const s in e){const r=e[s];n[s]=Array.isArray(r)?r.map(t):t(r)}return n}const hs=()=>{},Ag=/\/$/,_g=t=>t.replace(Ag,"");function ho(t,e,n="/"){let s,r={},i="",o="";const a=e.indexOf("?"),l=e.indexOf("#",a>-1?a:0);return a>-1&&(s=e.slice(0,a),i=e.slice(a+1,l>-1?l:e.length),r=t(i)),l>-1&&(s=s||e.slice(0,l),o=e.slice(l,e.length)),s=Rg(s!=null?s:e,n),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:o}}function Sg(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Pc(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Cg(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&Cn(e.matched[s],n.matched[r])&&kc(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Cn(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function kc(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!Ng(t[n],e[n]))return!1;return!0}function Ng(t,e){return Array.isArray(t)?Mc(t,e):Array.isArray(e)?Mc(e,t):t===e}function Mc(t,e){return Array.isArray(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function Rg(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/");let r=n.length-1,i,o;for(i=0;i<s.length;i++)if(o=s[i],!(r===1||o==="."))if(o==="..")r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(i-(i===s.length?1:0)).join("/")}var fs;(function(t){t.pop="pop",t.push="push"})(fs||(fs={}));var ds;(function(t){t.back="back",t.forward="forward",t.unknown=""})(ds||(ds={}));function xg(t){if(!t)if(Sn){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),_g(t)}const Dg=/^[^#]+#/;function Og(t,e){return t.replace(Dg,"#")+e}function Pg(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const Tr=()=>({left:window.pageXOffset,top:window.pageYOffset});function kg(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=Pg(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function Lc(t,e){return(history.state?history.state.position-e:-1)+t}const fo=new Map;function Mg(t,e){fo.set(t,e)}function Lg(t){const e=fo.get(t);return fo.delete(t),e}let Fg=()=>location.protocol+"//"+location.host;function Fc(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let a=r.includes(t.slice(i))?t.slice(i).length:1,l=r.slice(a);return l[0]!=="/"&&(l="/"+l),Pc(l,"")}return Pc(n,t)+s+r}function Vg(t,e,n,s){let r=[],i=[],o=null;const a=({state:d})=>{const g=Fc(t,location),w=n.value,M=e.value;let S=0;if(d){if(n.value=g,e.value=d,o&&o===w){o=null;return}S=M?d.position-M.position:0}else s(g);r.forEach(N=>{N(n.value,w,{delta:S,type:fs.pop,direction:S?S>0?ds.forward:ds.back:ds.unknown})})};function l(){o=n.value}function c(d){r.push(d);const g=()=>{const w=r.indexOf(d);w>-1&&r.splice(w,1)};return i.push(g),g}function u(){const{history:d}=window;!d.state||d.replaceState(le({},d.state,{scroll:Tr()}),"")}function h(){for(const d of i)d();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u),{pauseListeners:l,listen:c,destroy:h}}function Vc(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?Tr():null}}function Ug(t){const{history:e,location:n}=window,s={value:Fc(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const h=t.indexOf("#"),d=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+l:Fg()+t+l;try{e[u?"replaceState":"pushState"](c,"",d),r.value=c}catch(g){console.error(g),n[u?"replace":"assign"](d)}}function o(l,c){const u=le({},e.state,Vc(r.value.back,l,r.value.forward,!0),c,{position:r.value.position});i(l,u,!0),s.value=l}function a(l,c){const u=le({},r.value,e.state,{forward:l,scroll:Tr()});i(u.current,u,!0);const h=le({},Vc(s.value,l,null),{position:u.position+1},c);i(l,h,!1),s.value=l}return{location:s,state:r,push:a,replace:o}}function vE(t){t=xg(t);const e=Ug(t),n=Vg(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=le({location:"",base:t,go:s,createHref:Og.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function $g(t){return typeof t=="string"||t&&typeof t=="object"}function Uc(t){return typeof t=="string"||typeof t=="symbol"}const Pt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},$c=_n("nf");var jc;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(jc||(jc={}));function Nn(t,e){return le(new Error,{type:t,[$c]:!0},e)}function Gt(t,e){return t instanceof Error&&$c in t&&(e==null||!!(t.type&e))}const qc="[^/]+?",jg={sensitive:!1,strict:!1,start:!0,end:!0},qg=/[.+*?^${}()[\]/\\]/g;function Bg(t,e){const n=le({},jg,e),s=[];let r=n.start?"^":"";const i=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(r+="/");for(let h=0;h<c.length;h++){const d=c[h];let g=40+(n.sensitive?.25:0);if(d.type===0)h||(r+="/"),r+=d.value.replace(qg,"\\$&"),g+=40;else if(d.type===1){const{value:w,repeatable:M,optional:S,regexp:N}=d;i.push({name:w,repeatable:M,optional:S});const $=N||qc;if($!==qc){g+=10;try{new RegExp(`(${$})`)}catch(J){throw new Error(`Invalid custom RegExp for param "${w}" (${$}): `+J.message)}}let Q=M?`((?:${$})(?:/(?:${$}))*)`:`(${$})`;h||(Q=S&&c.length<2?`(?:/${Q})`:"/"+Q),S&&(Q+="?"),r+=Q,g+=20,S&&(g+=-8),M&&(g+=-20),$===".*"&&(g+=-50)}u.push(g)}s.push(u)}if(n.strict&&n.end){const c=s.length-1;s[c][s[c].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const g=u[d]||"",w=i[d-1];h[w.name]=g&&w.repeatable?g.split("/"):g}return h}function l(c){let u="",h=!1;for(const d of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const g of d)if(g.type===0)u+=g.value;else if(g.type===1){const{value:w,repeatable:M,optional:S}=g,N=w in c?c[w]:"";if(Array.isArray(N)&&!M)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const $=Array.isArray(N)?N.join("/"):N;if(!$)if(S)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${w}"`);u+=$}}return u}return{re:o,score:s,keys:i,parse:a,stringify:l}}function Hg(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function Kg(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=Hg(s[n],r[n]);if(i)return i;n++}return r.length-s.length}const zg={type:0,value:""},Gg=/[a-zA-Z0-9_]/;function Wg(t){if(!t)return[[]];if(t==="/")return[[zg]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(g){throw new Error(`ERR (${n})/"${c}": ${g}`)}let n=0,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,l,c="",u="";function h(){!c||(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),n=1):d();break;case 4:d(),n=s;break;case 1:l==="("?n=2:Gg.test(l)?d():(h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),h(),o(),r}function Qg(t,e,n){const s=Bg(Wg(t.path),n),r=le(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function Yg(t,e){const n=[],s=new Map;e=Hc({strict:!1,end:!0,sensitive:!1},e);function r(u){return s.get(u)}function i(u,h,d){const g=!d,w=Jg(u);w.aliasOf=d&&d.record;const M=Hc(e,u),S=[w];if("alias"in u){const Q=typeof u.alias=="string"?[u.alias]:u.alias;for(const J of Q)S.push(le({},w,{components:d?d.record.components:w.components,path:J,aliasOf:d?d.record:w}))}let N,$;for(const Q of S){const{path:J}=Q;if(h&&J[0]!=="/"){const Oe=h.record.path,Pe=Oe[Oe.length-1]==="/"?"":"/";Q.path=h.record.path+(J&&Pe+J)}if(N=Qg(Q,h,M),d?d.alias.push(N):($=$||N,$!==N&&$.alias.push(N),g&&u.name&&!Bc(N)&&o(u.name)),"children"in w){const Oe=w.children;for(let Pe=0;Pe<Oe.length;Pe++)i(Oe[Pe],N,d&&d.children[Pe])}d=d||N,l(N)}return $?()=>{o($)}:hs}function o(u){if(Uc(u)){const h=s.get(u);h&&(s.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&s.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let h=0;for(;h<n.length&&Kg(u,n[h])>=0;)h++;n.splice(h,0,u),u.record.name&&!Bc(u)&&s.set(u.record.name,u)}function c(u,h){let d,g={},w,M;if("name"in u&&u.name){if(d=s.get(u.name),!d)throw Nn(1,{location:u});M=d.record.name,g=le(Xg(h.params,d.keys.filter($=>!$.optional).map($=>$.name)),u.params),w=d.stringify(g)}else if("path"in u)w=u.path,d=n.find($=>$.re.test(w)),d&&(g=d.parse(w),M=d.record.name);else{if(d=h.name?s.get(h.name):n.find($=>$.re.test(h.path)),!d)throw Nn(1,{location:u,currentLocation:h});M=d.record.name,g=le({},h.params,u.params),w=d.stringify(g)}const S=[];let N=d;for(;N;)S.unshift(N.record),N=N.parent;return{name:M,path:w,params:g,matched:S,meta:em(S)}}return t.forEach(u=>i(u)),{addRoute:i,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:r}}function Xg(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function Jg(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:Zg(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||{}:{default:t.component}}}function Zg(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="boolean"?n:n[s];return e}function Bc(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function em(t){return t.reduce((e,n)=>le(e,n.meta),{})}function Hc(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}const Kc=/#/g,tm=/&/g,nm=/\//g,sm=/=/g,rm=/\?/g,zc=/\+/g,im=/%5B/g,om=/%5D/g,Gc=/%5E/g,am=/%60/g,Wc=/%7B/g,lm=/%7C/g,Qc=/%7D/g,cm=/%20/g;function po(t){return encodeURI(""+t).replace(lm,"|").replace(im,"[").replace(om,"]")}function um(t){return po(t).replace(Wc,"{").replace(Qc,"}").replace(Gc,"^")}function go(t){return po(t).replace(zc,"%2B").replace(cm,"+").replace(Kc,"%23").replace(tm,"%26").replace(am,"`").replace(Wc,"{").replace(Qc,"}").replace(Gc,"^")}function hm(t){return go(t).replace(sm,"%3D")}function fm(t){return po(t).replace(Kc,"%23").replace(rm,"%3F")}function dm(t){return t==null?"":fm(t).replace(nm,"%2F")}function br(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function pm(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<s.length;++r){const i=s[r].replace(zc," "),o=i.indexOf("="),a=br(o<0?i:i.slice(0,o)),l=o<0?null:br(i.slice(o+1));if(a in e){let c=e[a];Array.isArray(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function Yc(t){let e="";for(let n in t){const s=t[n];if(n=hm(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(Array.isArray(s)?s.map(i=>i&&go(i)):[s&&go(s)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function gm(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=Array.isArray(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}function ps(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function kt(t,e,n,s,r){const i=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((o,a)=>{const l=h=>{h===!1?a(Nn(4,{from:n,to:e})):h instanceof Error?a(h):$g(h)?a(Nn(2,{from:e,to:h})):(i&&s.enterCallbacks[r]===i&&typeof h=="function"&&i.push(h),o())},c=t.call(s&&s.instances[r],e,n,l);let u=Promise.resolve(c);t.length<3&&(u=u.then(l)),u.catch(h=>a(h))})}function mo(t,e,n,s){const r=[];for(const i of t)for(const o in i.components){let a=i.components[o];if(!(e!=="beforeRouteEnter"&&!i.instances[o]))if(mm(a)){const c=(a.__vccOpts||a)[e];c&&r.push(kt(c,n,s,i,o))}else{let l=a();r.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${i.path}"`));const u=bg(c)?c.default:c;i.components[o]=u;const d=(u.__vccOpts||u)[e];return d&&kt(d,n,s,i,o)()}))}}return r}function mm(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Xc(t){const e=ht(Ir),n=ht(lo),s=ct(()=>e.resolve(ns(t.to))),r=ct(()=>{const{matched:l}=s.value,{length:c}=l,u=l[c-1],h=n.matched;if(!u||!h.length)return-1;const d=h.findIndex(Cn.bind(null,u));if(d>-1)return d;const g=Jc(l[c-2]);return c>1&&Jc(u)===g&&h[h.length-1].path!==g?h.findIndex(Cn.bind(null,l[c-2])):d}),i=ct(()=>r.value>-1&&Em(n.params,s.value.params)),o=ct(()=>r.value>-1&&r.value===n.matched.length-1&&kc(n.params,s.value.params));function a(l={}){return wm(l)?e[ns(t.replace)?"replace":"push"](ns(t.to)).catch(hs):Promise.resolve()}return{route:s,href:ct(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}const ym=Vl({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Xc,setup(t,{slots:e}){const n=es(Xc(t)),{options:s}=ht(Ir),r=ct(()=>({[Zc(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Zc(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&e.default(n);return t.custom?i:Tc("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),vm=ym;function wm(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Em(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!Array.isArray(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function Jc(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Zc=(t,e,n)=>t!=null?t:e!=null?e:n,Im=Vl({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(t,{attrs:e,slots:n}){const s=ht(co),r=ct(()=>t.route||s.value),i=ht(Oc,0),o=ct(()=>r.value.matched[i]);lr(Oc,i+1),lr(Tg,o),lr(co,r);const a=Bd();return wr(()=>[a.value,o.value,t.name],([l,c,u],[h,d,g])=>{c&&(c.instances[u]=l,d&&d!==c&&l&&l===h&&(c.leaveGuards.size||(c.leaveGuards=d.leaveGuards),c.updateGuards.size||(c.updateGuards=d.updateGuards))),l&&c&&(!d||!Cn(c,d)||!h)&&(c.enterCallbacks[u]||[]).forEach(w=>w(l))},{flush:"post"}),()=>{const l=r.value,c=o.value,u=c&&c.components[t.name],h=t.name;if(!u)return eu(n.default,{Component:u,route:l});const d=c.props[t.name],g=d?d===!0?l.params:typeof d=="function"?d(l):d:null,M=Tc(u,le({},g,e,{onVnodeUnmounted:S=>{S.component.isUnmounted&&(c.instances[h]=null)},ref:a}));return eu(n.default,{Component:M,route:l})||M}}});function eu(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Tm=Im;function wE(t){const e=Yg(t.routes,t),n=t.parseQuery||pm,s=t.stringifyQuery||Yc,r=t.history,i=ps(),o=ps(),a=ps(),l=Hd(Pt);let c=Pt;Sn&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=uo.bind(null,y=>""+y),h=uo.bind(null,dm),d=uo.bind(null,br);function g(y,k){let C,L;return Uc(y)?(C=e.getRecordMatcher(y),L=k):L=y,e.addRoute(L,C)}function w(y){const k=e.getRecordMatcher(y);k&&e.removeRoute(k)}function M(){return e.getRoutes().map(y=>y.record)}function S(y){return!!e.getRecordMatcher(y)}function N(y,k){if(k=le({},k||l.value),typeof y=="string"){const H=ho(n,y,k.path),f=e.resolve({path:H.path},k),p=r.createHref(H.fullPath);return le(H,f,{params:d(f.params),hash:br(H.hash),redirectedFrom:void 0,href:p})}let C;if("path"in y)C=le({},y,{path:ho(n,y.path,k.path).path});else{const H=le({},y.params);for(const f in H)H[f]==null&&delete H[f];C=le({},y,{params:h(y.params)}),k.params=h(k.params)}const L=e.resolve(C,k),oe=y.hash||"";L.params=u(d(L.params));const ue=Sg(s,le({},y,{hash:um(oe),path:L.path})),W=r.createHref(ue);return le({fullPath:ue,hash:oe,query:s===Yc?gm(y.query):y.query||{}},L,{redirectedFrom:void 0,href:W})}function $(y){return typeof y=="string"?ho(n,y,l.value.path):le({},y)}function Q(y,k){if(c!==y)return Nn(8,{from:k,to:y})}function J(y){return gt(y)}function Oe(y){return J(le($(y),{replace:!0}))}function Pe(y){const k=y.matched[y.matched.length-1];if(k&&k.redirect){const{redirect:C}=k;let L=typeof C=="function"?C(y):C;return typeof L=="string"&&(L=L.includes("?")||L.includes("#")?L=$(L):{path:L},L.params={}),le({query:y.query,hash:y.hash,params:y.params},L)}}function gt(y,k){const C=c=N(y),L=l.value,oe=y.state,ue=y.force,W=y.replace===!0,H=Pe(C);if(H)return gt(le($(H),{state:oe,force:ue,replace:W}),k||C);const f=C;f.redirectedFrom=k;let p;return!ue&&Cg(s,L,C)&&(p=Nn(16,{to:f,from:L}),fn(L,L,!0,!1)),(p?Promise.resolve(p):it(f,L)).catch(m=>Gt(m)?m:ce(m,f,L)).then(m=>{if(m){if(Gt(m,2))return gt(le($(m.to),{state:oe,force:ue,replace:W}),k||f)}else m=mt(f,L,!0,W,oe);return Ct(f,L,m),m})}function ln(y,k){const C=Q(y,k);return C?Promise.reject(C):Promise.resolve()}function it(y,k){let C;const[L,oe,ue]=bm(y,k);C=mo(L.reverse(),"beforeRouteLeave",y,k);for(const H of L)H.leaveGuards.forEach(f=>{C.push(kt(f,y,k))});const W=ln.bind(null,y,k);return C.push(W),Rn(C).then(()=>{C=[];for(const H of i.list())C.push(kt(H,y,k));return C.push(W),Rn(C)}).then(()=>{C=mo(oe,"beforeRouteUpdate",y,k);for(const H of oe)H.updateGuards.forEach(f=>{C.push(kt(f,y,k))});return C.push(W),Rn(C)}).then(()=>{C=[];for(const H of y.matched)if(H.beforeEnter&&!k.matched.includes(H))if(Array.isArray(H.beforeEnter))for(const f of H.beforeEnter)C.push(kt(f,y,k));else C.push(kt(H.beforeEnter,y,k));return C.push(W),Rn(C)}).then(()=>(y.matched.forEach(H=>H.enterCallbacks={}),C=mo(ue,"beforeRouteEnter",y,k),C.push(W),Rn(C))).then(()=>{C=[];for(const H of o.list())C.push(kt(H,y,k));return C.push(W),Rn(C)}).catch(H=>Gt(H,8)?H:Promise.reject(H))}function Ct(y,k,C){for(const L of a.list())L(y,k,C)}function mt(y,k,C,L,oe){const ue=Q(y,k);if(ue)return ue;const W=k===Pt,H=Sn?history.state:{};C&&(L||W?r.replace(y.fullPath,le({scroll:W&&H&&H.scroll},oe)):r.push(y.fullPath,oe)),l.value=y,fn(y,k,C,W),Xe()}let yt;function cn(){yt=r.listen((y,k,C)=>{const L=N(y),oe=Pe(L);if(oe){gt(le(oe,{replace:!0}),L).catch(hs);return}c=L;const ue=l.value;Sn&&Mg(Lc(ue.fullPath,C.delta),Tr()),it(L,ue).catch(W=>Gt(W,4|8)?W:Gt(W,2)?(gt(W.to,L).then(H=>{Gt(H,4|16)&&!C.delta&&C.type===fs.pop&&r.go(-1,!1)}).catch(hs),Promise.reject()):(C.delta&&r.go(-C.delta,!1),ce(W,L,ue))).then(W=>{W=W||mt(L,ue,!1),W&&(C.delta?r.go(-C.delta,!1):C.type===fs.pop&&Gt(W,4|16)&&r.go(-1,!1)),Ct(L,ue,W)}).catch(hs)})}let un=ps(),hn=ps(),Ie;function ce(y,k,C){Xe(y);const L=hn.list();return L.length?L.forEach(oe=>oe(y,k,C)):console.error(y),Promise.reject(y)}function ie(){return Ie&&l.value!==Pt?Promise.resolve():new Promise((y,k)=>{un.add([y,k])})}function Xe(y){Ie||(Ie=!0,cn(),un.list().forEach(([k,C])=>y?C(y):k()),un.reset())}function fn(y,k,C,L){const{scrollBehavior:oe}=t;if(!Sn||!oe)return Promise.resolve();const ue=!C&&Lg(Lc(y.fullPath,0))||(L||!C)&&history.state&&history.state.scroll||null;return dc().then(()=>oe(y,k,ue)).then(W=>W&&kg(W)).catch(W=>ce(W,y,k))}const vt=y=>r.go(y);let ot;const Je=new Set;return{currentRoute:l,addRoute:g,removeRoute:w,hasRoute:S,getRoutes:M,resolve:N,options:t,push:J,replace:Oe,go:vt,back:()=>vt(-1),forward:()=>vt(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:hn.add,isReady:ie,install(y){const k=this;y.component("RouterLink",vm),y.component("RouterView",Tm),y.config.globalProperties.$router=k,Object.defineProperty(y.config.globalProperties,"$route",{enumerable:!0,get:()=>ns(l)}),Sn&&!ot&&l.value===Pt&&(ot=!0,J(r.location).catch(oe=>{}));const C={};for(const oe in Pt)C[oe]=ct(()=>l.value[oe]);y.provide(Ir,k),y.provide(lo,es(C)),y.provide(co,l);const L=y.unmount;Je.add(y),y.unmount=function(){Je.delete(y),Je.size<1&&(c=Pt,yt&&yt(),l.value=Pt,ot=!1,Ie=!1),L()}}}}function Rn(t){return t.reduce((e,n)=>e.then(()=>n()),Promise.resolve())}function bm(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(c=>Cn(c,a))?s.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>Cn(c,l))||r.push(l))}return[n,s,r]}function EE(){return ht(Ir)}function IE(){return ht(lo)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Am(t,e,n,s){function r(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(s.next(u))}catch(h){o(h)}}function l(u){try{c(s.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):r(u.value).then(a,l)}c((s=s.apply(t,e||[])).next())})}function _m(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},s,r,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,r&&(i=c[0]&2?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,r=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],r=0}finally{s=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function yo(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ar(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),r,i=[],o;try{for(;(e===void 0||e-- >0)&&!(r=s.next()).done;)i.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return i}function tu(t,e,n){if(n||arguments.length===2)for(var s=0,r=e.length,i;s<r;s++)(i||!(s in e))&&(i||(i=Array.prototype.slice.call(e,0,s)),i[s]=e[s]);return t.concat(i||Array.prototype.slice.call(e))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Cm(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_r())}function Nm(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Rm(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xm(){return _r().indexOf("Electron/")>=0}function Dm(){const t=_r();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Om(){return _r().indexOf("MSAppHost/")>=0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm="FirebaseError";class vo extends Error{constructor(e,n,s){super(n);this.code=e,this.customData=s,this.name=Pm,Object.setPrototypeOf(this,vo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nu.prototype.create)}}class nu{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?km(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new vo(r,a,s)}}function km(t,e){return t.replace(Mm,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const Mm=/\{\$([^}]+)}/g;function wo(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(su(i)&&su(o)){if(!wo(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function su(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(t){return t&&t._delegate?t._delegate:t}var Cr=function(){function t(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},t.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},t.prototype.setServiceProps=function(e){return this.serviceProps=e,this},t.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},t}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wt="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lm=function(){function t(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(e){var n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){var s=new Sm;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise},t.prototype.getImmediate=function(e){var n,s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error("Service "+this.name+" is not available")}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(e){var n,s;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,!!this.shouldAutoInitialize()){if(Vm(e))try{this.getOrInitializeService({instanceIdentifier:Wt})}catch{}try{for(var r=yo(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=Ar(i.value,2),a=o[0],l=o[1],c=this.normalizeInstanceIdentifier(a);try{var u=this.getOrInitializeService({instanceIdentifier:c});l.resolve(u)}catch{}}}catch(h){n={error:h}}finally{try{i&&!i.done&&(s=r.return)&&s.call(r)}finally{if(n)throw n.error}}}},t.prototype.clearInstance=function(e){e===void 0&&(e=Wt),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},t.prototype.delete=function(){return Am(this,void 0,void 0,function(){var e;return _m(this,function(n){switch(n.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(tu(tu([],Ar(e.filter(function(s){return"INTERNAL"in s}).map(function(s){return s.INTERNAL.delete()}))),Ar(e.filter(function(s){return"_delete"in s}).map(function(s){return s._delete()}))))];case 1:return n.sent(),[2]}})})},t.prototype.isComponentSet=function(){return this.component!=null},t.prototype.isInitialized=function(e){return e===void 0&&(e=Wt),this.instances.has(e)},t.prototype.getOptions=function(e){return e===void 0&&(e=Wt),this.instancesOptions.get(e)||{}},t.prototype.initialize=function(e){var n,s;e===void 0&&(e={});var r=e.options,i=r===void 0?{}:r,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:o,options:i});try{for(var l=yo(this.instancesDeferred.entries()),c=l.next();!c.done;c=l.next()){var u=Ar(c.value,2),h=u[0],d=u[1],g=this.normalizeInstanceIdentifier(h);o===g&&d.resolve(a)}}catch(w){n={error:w}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(n)throw n.error}}return a},t.prototype.onInit=function(e,n){var s,r=this.normalizeInstanceIdentifier(n),i=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;i.add(e),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&e(o,r),function(){i.delete(e)}},t.prototype.invokeOnInitCallbacks=function(e,n){var s,r,i=this.onInitCallbacks.get(n);if(!!i)try{for(var o=yo(i),a=o.next();!a.done;a=o.next()){var l=a.value;try{l(e,n)}catch{}}}catch(c){s={error:c}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(s)throw s.error}}},t.prototype.getOrInitializeService=function(e){var n=e.instanceIdentifier,s=e.options,r=s===void 0?{}:s,i=this.instances.get(n);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Fm(n),options:r}),this.instances.set(n,i),this.instancesOptions.set(n,r),this.invokeOnInitCallbacks(i,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,i)}catch{}return i||null},t.prototype.normalizeInstanceIdentifier=function(e){return e===void 0&&(e=Wt),this.component?this.component.multipleInstances?e:Wt:e},t.prototype.shouldAutoInitialize=function(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"},t}();function Fm(t){return t===Wt?void 0:t}function Vm(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Um=function(){function t(e){this.name=e,this.providers=new Map}return t.prototype.addComponent=function(e){var n=this.getProvider(e.name);if(n.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);n.setComponent(e)},t.prototype.addOrOverwriteComponent=function(e){var n=this.getProvider(e.name);n.isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},t.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var n=new Lm(e,this);return this.providers.set(e,n),n},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ne||(ne={}));const $m={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},jm=ne.INFO,qm={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},Bm=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=qm[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ru{constructor(e){this.name=e,this._logLevel=jm,this._logHandler=Bm,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$m[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Km(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Km(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Eo="@firebase/app",iu="0.7.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io=new ru("@firebase/app"),zm="@firebase/app-compat",Gm="@firebase/analytics-compat",Wm="@firebase/analytics",Qm="@firebase/app-check-compat",Ym="@firebase/app-check",Xm="@firebase/auth",Jm="@firebase/auth-compat",Zm="@firebase/database",ey="@firebase/database-compat",ty="@firebase/functions",ny="@firebase/functions-compat",sy="@firebase/installations",ry="@firebase/installations-compat",iy="@firebase/messaging",oy="@firebase/messaging-compat",ay="@firebase/performance",ly="@firebase/performance-compat",cy="@firebase/remote-config",uy="@firebase/remote-config-compat",hy="@firebase/storage",fy="@firebase/storage-compat",dy="@firebase/firestore",py="@firebase/firestore-compat",gy="firebase",my="9.1.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou="[DEFAULT]",yy={[Eo]:"fire-core",[zm]:"fire-core-compat",[Wm]:"fire-analytics",[Gm]:"fire-analytics-compat",[Ym]:"fire-app-check",[Qm]:"fire-app-check-compat",[Xm]:"fire-auth",[Jm]:"fire-auth-compat",[Zm]:"fire-rtdb",[ey]:"fire-rtdb-compat",[ty]:"fire-fn",[ny]:"fire-fn-compat",[sy]:"fire-iid",[ry]:"fire-iid-compat",[iy]:"fire-fcm",[oy]:"fire-fcm-compat",[ay]:"fire-perf",[ly]:"fire-perf-compat",[cy]:"fire-rc",[uy]:"fire-rc-compat",[hy]:"fire-gcs",[fy]:"fire-gcs-compat",[dy]:"fire-fst",[py]:"fire-fst-compat","fire-js":"fire-js",[gy]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr=new Map,To=new Map;function vy(t,e){try{t.container.addComponent(e)}catch(n){Io.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function bo(t){const e=t.name;if(To.has(e))return Io.debug(`There were multiple attempts to register component ${e}.`),!1;To.set(e,t);for(const n of Nr.values())vy(n,t);return!0}function wy(t,e){return t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function."},Rr=new nu("app","Firebase",Ey);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Cr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty=my;function TE(t,e={}){typeof e!="object"&&(e={name:e});const n=Object.assign({name:ou,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw Rr.create("bad-app-name",{appName:String(s)});const r=Nr.get(s);if(r){if(wo(t,r.options)&&wo(n,r.config))return r;throw Rr.create("duplicate-app",{appName:s})}const i=new Um(s);for(const a of To.values())i.addComponent(a);const o=new Iy(t,n,i);return Nr.set(s,o),o}function by(t=ou){const e=Nr.get(t);if(!e)throw Rr.create("no-app",{appName:t});return e}function xn(t,e,n){var s;let r=(s=yy[t])!==null&&s!==void 0?s:t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Io.warn(a.join(" "));return}bo(new Cr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ay(t){bo(new Cr("platform-logger",e=>new Hm(e),"PRIVATE")),xn(Eo,iu,t),xn(Eo,iu,"esm2017"),xn("fire-js","")}Ay("");var _y="firebase",Sy="9.1.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn(_y,Sy,"app");var Cy=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},D,Ao=Ao||{},j=Cy||self;function xr(){}function _o(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function gs(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Ny(t){return Object.prototype.hasOwnProperty.call(t,So)&&t[So]||(t[So]=++Ry)}var So="closure_uid_"+(1e9*Math.random()>>>0),Ry=0;function xy(t,e,n){return t.call.apply(t.bind,arguments)}function Dy(t,e,n){if(!t)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,s),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function Ce(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ce=xy:Ce=Dy,Ce.apply(null,arguments)}function Dr(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var s=n.slice();return s.push.apply(s,arguments),t.apply(this,s)}}function Ne(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(s,r,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(s,o)}}function Mt(){this.s=this.s,this.o=this.o}var Oy=0,Py={};Mt.prototype.s=!1;Mt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),Oy!=0)){var t=Ny(this);delete Py[t]}};Mt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const au=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},lu=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const s=t.length,r=typeof t=="string"?t.split(""):t;for(let i=0;i<s;i++)i in r&&e.call(n,r[i],i,t)};function ky(t){e:{var e=_v;const n=t.length,s=typeof t=="string"?t.split(""):t;for(let r=0;r<n;r++)if(r in s&&e.call(void 0,s[r],r,t)){e=r;break e}e=-1}return 0>e?null:typeof t=="string"?t.charAt(e):t[e]}function cu(t){return Array.prototype.concat.apply([],arguments)}function Co(t){const e=t.length;if(0<e){const n=Array(e);for(let s=0;s<e;s++)n[s]=t[s];return n}return[]}function Or(t){return/^[\s\xa0]*$/.test(t)}var uu=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function $e(t,e){return t.indexOf(e)!=-1}function No(t,e){return t<e?-1:t>e?1:0}var je;e:{var hu=j.navigator;if(hu){var fu=hu.userAgent;if(fu){je=fu;break e}}je=""}function Ro(t,e,n){for(const s in t)e.call(n,t[s],s,t)}function du(t){const e={};for(const n in t)e[n]=t[n];return e}var pu="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gu(t,e){let n,s;for(let r=1;r<arguments.length;r++){s=arguments[r];for(n in s)t[n]=s[n];for(let i=0;i<pu.length;i++)n=pu[i],Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}}function xo(t){return xo[" "](t),t}xo[" "]=xr;function My(t){var e=Vy;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var Ly=$e(je,"Opera"),Dn=$e(je,"Trident")||$e(je,"MSIE"),mu=$e(je,"Edge"),Do=mu||Dn,yu=$e(je,"Gecko")&&!($e(je.toLowerCase(),"webkit")&&!$e(je,"Edge"))&&!($e(je,"Trident")||$e(je,"MSIE"))&&!$e(je,"Edge"),Fy=$e(je.toLowerCase(),"webkit")&&!$e(je,"Edge");function vu(){var t=j.document;return t?t.documentMode:void 0}var Pr;e:{var Oo="",Po=function(){var t=je;if(yu)return/rv:([^\);]+)(\)|;)/.exec(t);if(mu)return/Edge\/([\d\.]+)/.exec(t);if(Dn)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Fy)return/WebKit\/(\S+)/.exec(t);if(Ly)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Po&&(Oo=Po?Po[1]:""),Dn){var ko=vu();if(ko!=null&&ko>parseFloat(Oo)){Pr=String(ko);break e}}Pr=Oo}var Vy={};function Uy(){return My(function(){let t=0;const e=uu(String(Pr)).split("."),n=uu("9").split("."),s=Math.max(e.length,n.length);for(let o=0;t==0&&o<s;o++){var r=e[o]||"",i=n[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],r[0].length==0&&i[0].length==0)break;t=No(r[1].length==0?0:parseInt(r[1],10),i[1].length==0?0:parseInt(i[1],10))||No(r[2].length==0,i[2].length==0)||No(r[2],i[2]),r=r[3],i=i[3]}while(t==0)}return 0<=t})}var Mo;if(j.document&&Dn){var wu=vu();Mo=wu||parseInt(Pr,10)||void 0}else Mo=void 0;var $y=Mo,jy=function(){if(!j.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{j.addEventListener("test",xr,e),j.removeEventListener("test",xr,e)}catch{}return t}();function ke(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}ke.prototype.h=function(){this.defaultPrevented=!0};function ms(t,e){if(ke.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,s=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(yu){e:{try{xo(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,s?(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:qy[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ms.Z.h.call(this)}}Ne(ms,ke);var qy={2:"touch",3:"pen",4:"mouse"};ms.prototype.h=function(){ms.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ys="closure_listenable_"+(1e6*Math.random()|0),By=0;function Hy(t,e,n,s,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!s,this.ia=r,this.key=++By,this.ca=this.fa=!1}function kr(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Mr(t){this.src=t,this.g={},this.h=0}Mr.prototype.add=function(t,e,n,s,r){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=Fo(t,e,s,r);return-1<o?(e=t[o],n||(e.fa=!1)):(e=new Hy(e,this.src,i,!!s,r),e.fa=n,t.push(e)),e};function Lo(t,e){var n=e.type;if(n in t.g){var s=t.g[n],r=au(s,e),i;(i=0<=r)&&Array.prototype.splice.call(s,r,1),i&&(kr(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Fo(t,e,n,s){for(var r=0;r<t.length;++r){var i=t[r];if(!i.ca&&i.listener==e&&i.capture==!!n&&i.ia==s)return r}return-1}var Vo="closure_lm_"+(1e6*Math.random()|0),Uo={};function Eu(t,e,n,s,r){if(s&&s.once)return Tu(t,e,n,s,r);if(Array.isArray(e)){for(var i=0;i<e.length;i++)Eu(t,e[i],n,s,r);return null}return n=Bo(n),t&&t[ys]?t.N(e,n,gs(s)?!!s.capture:!!s,r):Iu(t,e,n,!1,s,r)}function Iu(t,e,n,s,r,i){if(!e)throw Error("Invalid event type");var o=gs(r)?!!r.capture:!!r,a=jo(t);if(a||(t[Vo]=a=new Mr(t)),n=a.add(e,n,s,o,i),n.proxy)return n;if(s=Ky(),n.proxy=s,s.src=t,s.listener=n,t.addEventListener)jy||(r=o),r===void 0&&(r=!1),t.addEventListener(e.toString(),s,r);else if(t.attachEvent)t.attachEvent(Au(e.toString()),s);else if(t.addListener&&t.removeListener)t.addListener(s);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Ky(){function t(n){return e.call(t.src,t.listener,n)}var e=zy;return t}function Tu(t,e,n,s,r){if(Array.isArray(e)){for(var i=0;i<e.length;i++)Tu(t,e[i],n,s,r);return null}return n=Bo(n),t&&t[ys]?t.O(e,n,gs(s)?!!s.capture:!!s,r):Iu(t,e,n,!0,s,r)}function bu(t,e,n,s,r){if(Array.isArray(e))for(var i=0;i<e.length;i++)bu(t,e[i],n,s,r);else s=gs(s)?!!s.capture:!!s,n=Bo(n),t&&t[ys]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=Fo(i,n,s,r),-1<n&&(kr(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=jo(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Fo(e,n,s,r)),(n=-1<t?e[t]:null)&&$o(n))}function $o(t){if(typeof t!="number"&&t&&!t.ca){var e=t.src;if(e&&e[ys])Lo(e.i,t);else{var n=t.type,s=t.proxy;e.removeEventListener?e.removeEventListener(n,s,t.capture):e.detachEvent?e.detachEvent(Au(n),s):e.addListener&&e.removeListener&&e.removeListener(s),(n=jo(e))?(Lo(n,t),n.h==0&&(n.src=null,e[Vo]=null)):kr(t)}}}function Au(t){return t in Uo?Uo[t]:Uo[t]="on"+t}function zy(t,e){if(t.ca)t=!0;else{e=new ms(e,this);var n=t.listener,s=t.ia||t.src;t.fa&&$o(t),t=n.call(s,e)}return t}function jo(t){return t=t[Vo],t instanceof Mr?t:null}var qo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bo(t){return typeof t=="function"?t:(t[qo]||(t[qo]=function(e){return t.handleEvent(e)}),t[qo])}function be(){Mt.call(this),this.i=new Mr(this),this.P=this,this.I=null}Ne(be,Mt);be.prototype[ys]=!0;be.prototype.removeEventListener=function(t,e,n,s){bu(this,t,e,n,s)};function Re(t,e){var n,s=t.I;if(s)for(n=[];s;s=s.I)n.push(s);if(t=t.P,s=e.type||e,typeof e=="string")e=new ke(e,t);else if(e instanceof ke)e.target=e.target||t;else{var r=e;e=new ke(s,t),gu(e,r)}if(r=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];r=Lr(o,s,!0,e)&&r}if(o=e.g=t,r=Lr(o,s,!0,e)&&r,r=Lr(o,s,!1,e)&&r,n)for(i=0;i<n.length;i++)o=e.g=n[i],r=Lr(o,s,!1,e)&&r}be.prototype.M=function(){if(be.Z.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],s=0;s<n.length;s++)kr(n[s]);delete t.g[e],t.h--}}this.I=null};be.prototype.N=function(t,e,n,s){return this.i.add(String(t),e,!1,n,s)};be.prototype.O=function(t,e,n,s){return this.i.add(String(t),e,!0,n,s)};function Lr(t,e,n,s){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.ca&&o.capture==n){var a=o.listener,l=o.ia||o.src;o.fa&&Lo(t.i,o),r=a.call(l,s)!==!1&&r}}return r&&!s.defaultPrevented}var Ho=j.JSON.stringify;function Gy(){var t=Su;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class Wy{constructor(){this.h=this.g=null}add(e,n){const s=_u.get();s.set(e,n),this.h?this.h.next=s:this.g=s,this.h=s}}var _u=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new Qy,t=>t.reset());class Qy{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Yy(t){j.setTimeout(()=>{throw t},0)}function Ko(t,e){zo||Xy(),Go||(zo(),Go=!0),Su.add(t,e)}var zo;function Xy(){var t=j.Promise.resolve(void 0);zo=function(){t.then(Jy)}}var Go=!1,Su=new Wy;function Jy(){for(var t;t=Gy();){try{t.h.call(t.g)}catch(n){Yy(n)}var e=_u;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Go=!1}function Fr(t,e){be.call(this),this.h=t||1,this.g=e||j,this.j=Ce(this.kb,this),this.l=Date.now()}Ne(Fr,be);D=Fr.prototype;D.da=!1;D.S=null;D.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Re(this,"tick"),this.da&&(Wo(this),this.start()))}};D.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Wo(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}D.M=function(){Fr.Z.M.call(this),Wo(this),delete this.g};function Qo(t,e,n){if(typeof t=="function")n&&(t=Ce(t,n));else if(t&&typeof t.handleEvent=="function")t=Ce(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:j.setTimeout(t,e||0)}function Cu(t){t.g=Qo(()=>{t.g=null,t.i&&(t.i=!1,Cu(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class Zy extends Mt{constructor(e,n){super();this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Cu(this)}M(){super.M(),this.g&&(j.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vs(t){Mt.call(this),this.h=t,this.g={}}Ne(vs,Mt);var Nu=[];function Ru(t,e,n,s){Array.isArray(n)||(n&&(Nu[0]=n.toString()),n=Nu);for(var r=0;r<n.length;r++){var i=Eu(e,n[r],s||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function xu(t){Ro(t.g,function(e,n){this.g.hasOwnProperty(n)&&$o(e)},t),t.g={}}vs.prototype.M=function(){vs.Z.M.call(this),xu(this)};vs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Vr(){this.g=!0}Vr.prototype.Aa=function(){this.g=!1};function ev(t,e,n,s,r,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+s+") [attempt "+r+"]: "+e+`
`+n+`
`+o})}function tv(t,e,n,s,r,i,o){t.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+r+"]: "+e+`
`+n+`
`+i+" "+o})}function On(t,e,n,s){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+sv(t,n)+(s?" "+s:"")})}function nv(t,e){t.info(function(){return"TIMEOUT: "+e})}Vr.prototype.info=function(){};function sv(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var s=n[t];if(!(2>s.length)){var r=s[1];if(Array.isArray(r)&&!(1>r.length)){var i=r[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return Ho(n)}catch{return e}}var Qt={},Du=null;function Ur(){return Du=Du||new be}Qt.Ma="serverreachability";function Ou(t){ke.call(this,Qt.Ma,t)}Ne(Ou,ke);function ws(t){const e=Ur();Re(e,new Ou(e,t))}Qt.STAT_EVENT="statevent";function Pu(t,e){ke.call(this,Qt.STAT_EVENT,t),this.stat=e}Ne(Pu,ke);function qe(t){const e=Ur();Re(e,new Pu(e,t))}Qt.Na="timingevent";function ku(t,e){ke.call(this,Qt.Na,t),this.size=e}Ne(ku,ke);function Es(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return j.setTimeout(function(){t()},e)}var $r={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Mu={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Yo(){}Yo.prototype.h=null;function Lu(t){return t.h||(t.h=t.i())}function Fu(){}var Is={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Xo(){ke.call(this,"d")}Ne(Xo,ke);function Jo(){ke.call(this,"c")}Ne(Jo,ke);var Zo;function jr(){}Ne(jr,Yo);jr.prototype.g=function(){return new XMLHttpRequest};jr.prototype.i=function(){return{}};Zo=new jr;function Ts(t,e,n,s){this.l=t,this.j=e,this.m=n,this.X=s||1,this.V=new vs(this),this.P=rv,t=Do?125:void 0,this.W=new Fr(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Vu}function Vu(){this.i=null,this.g="",this.h=!1}var rv=45e3,ea={},qr={};D=Ts.prototype;D.setTimeout=function(t){this.P=t};function ta(t,e,n){t.K=1,t.v=Gr(bt(e)),t.s=n,t.U=!0,Uu(t,null)}function Uu(t,e){t.F=Date.now(),bs(t),t.A=bt(t.v);var n=t.A,s=t.X;Array.isArray(s)||(s=[String(s)]),Wu(n.h,"t",s),t.C=0,n=t.l.H,t.h=new Vu,t.g=yh(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Zy(Ce(t.Ia,t,t.g),t.O)),Ru(t.V,t.g,"readystatechange",t.gb),e=t.H?du(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),ws(1),ev(t.j,t.u,t.A,t.m,t.X,t.s)}D.gb=function(t){t=t.target;const e=this.L;e&&At(t)==3?e.l():this.Ia(t)};D.Ia=function(t){try{if(t==this.g)e:{const u=At(this.g);var e=this.g.Da();const h=this.g.ba();if(!(3>u)&&(u!=3||Do||this.g&&(this.h.h||this.g.ga()||oh(this.g)))){this.I||u!=4||e==7||(e==8||0>=h?ws(3):ws(2)),Br(this);var n=this.g.ba();this.N=n;t:if($u(this)){var s=oh(this.g);t="";var r=s.length,i=At(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){Yt(this),As(this);var o="";break t}this.h.i=new j.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(s[e],{stream:i&&e==r-1});s.splice(0,r),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=n==200,tv(this.j,this.u,this.A,this.m,this.X,u,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Or(a)){var c=a;break t}}c=null}if(n=c)On(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,na(this,n);else{this.i=!1,this.o=3,qe(12),Yt(this),As(this);break e}}this.U?(ju(this,u,o),Do&&this.i&&u==3&&(Ru(this.V,this.W,"tick",this.fb),this.W.start())):(On(this.j,this.m,o,null),na(this,o)),u==4&&Yt(this),this.i&&!this.I&&(u==4?dh(this.l,this):(this.i=!1,bs(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,qe(12)):(this.o=0,qe(13)),Yt(this),As(this)}}}catch{}finally{}};function $u(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Ba:!1}function ju(t,e,n){let s=!0,r;for(;!t.I&&t.C<n.length;)if(r=iv(t,n),r==qr){e==4&&(t.o=4,qe(14),s=!1),On(t.j,t.m,null,"[Incomplete Response]");break}else if(r==ea){t.o=4,qe(15),On(t.j,t.m,n,"[Invalid Chunk]"),s=!1;break}else On(t.j,t.m,r,null),na(t,r);$u(t)&&r!=qr&&r!=ea&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,qe(16),s=!1),t.i=t.i&&s,s?0<n.length&&!t.aa&&(t.aa=!0,e=t.l,e.g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),da(e),e.L=!0,qe(11))):(On(t.j,t.m,n,"[Invalid Chunked Response]"),Yt(t),As(t))}D.fb=function(){if(this.g){var t=At(this.g),e=this.g.ga();this.C<e.length&&(Br(this),ju(this,t,e),this.i&&t!=4&&bs(this))}};function iv(t,e){var n=t.C,s=e.indexOf(`
`,n);return s==-1?qr:(n=Number(e.substring(n,s)),isNaN(n)?ea:(s+=1,s+n>e.length?qr:(e=e.substr(s,n),t.C=s+n,e)))}D.cancel=function(){this.I=!0,Yt(this)};function bs(t){t.Y=Date.now()+t.P,qu(t,t.P)}function qu(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Es(Ce(t.eb,t),e)}function Br(t){t.B&&(j.clearTimeout(t.B),t.B=null)}D.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(nv(this.j,this.A),this.K!=2&&(ws(3),qe(17)),Yt(this),this.o=2,As(this)):qu(this,this.Y-t)};function As(t){t.l.G==0||t.I||dh(t.l,t)}function Yt(t){Br(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,Wo(t.W),xu(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function na(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||ia(n.i,t))){if(n.I=t.N,!t.J&&ia(n.i,t)&&n.G==3){try{var s=n.Ca.g.parse(e)}catch{s=null}if(Array.isArray(s)&&s.length==3){var r=s;if(r[0]==0)e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)Zr(n),Xr(n);else break e;fa(n),qe(18)}else n.ta=r[1],0<n.ta-n.U&&37500>r[2]&&n.N&&n.A==0&&!n.v&&(n.v=Es(Ce(n.ab,n),6e3));if(1>=Xu(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else Zt(n,11)}else if((t.J||n.g==t)&&Zr(n),!Or(e))for(r=n.Ca.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(n.U=c[0],c=c[1],n.G==2)if(c[0]=="c"){n.J=c[1],n.la=c[2];const u=c[3];u!=null&&(n.ma=u,n.h.info("VER="+n.ma));const h=c[4];h!=null&&(n.za=h,n.h.info("SVER="+n.za));const d=c[5];d!=null&&typeof d=="number"&&0<d&&(s=1.5*d,n.K=s,n.h.info("backChannelRequestTimeoutMs_="+s)),s=n;const g=t.g;if(g){const w=g.g?g.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(w){var i=s.i;!i.g&&($e(w,"spdy")||$e(w,"quic")||$e(w,"h2"))&&(i.j=i.l,i.g=new Set,i.h&&(oa(i,i.h),i.h=null))}if(s.D){const M=g.g?g.g.getResponseHeader("X-HTTP-Session-Id"):null;M&&(s.sa=M,pe(s.F,s.D,M))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms")),s=n;var o=t;if(s.oa=mh(s,s.H?s.la:null,s.W),o.J){Ju(s.i,o);var a=o,l=s.K;l&&a.setTimeout(l),a.B&&(Br(a),bs(a)),s.g=o}else hh(s);0<n.l.length&&Jr(n)}else c[0]!="stop"&&c[0]!="close"||Zt(n,7);else n.G==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Zt(n,7):ua(n):c[0]!="noop"&&n.j&&n.j.wa(c),n.A=0)}}ws(4)}catch{}}function ov(t){if(t.R&&typeof t.R=="function")return t.R();if(typeof t=="string")return t.split("");if(_o(t)){for(var e=[],n=t.length,s=0;s<n;s++)e.push(t[s]);return e}e=[],n=0;for(s in t)e[n++]=t[s];return e}function sa(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(_o(t)||typeof t=="string")lu(t,e,void 0);else{if(t.T&&typeof t.T=="function")var n=t.T();else if(t.R&&typeof t.R=="function")n=void 0;else if(_o(t)||typeof t=="string"){n=[];for(var s=t.length,r=0;r<s;r++)n.push(r)}else for(r in n=[],s=0,t)n[s++]=r;s=ov(t),r=s.length;for(var i=0;i<r;i++)e.call(void 0,s[i],n&&n[i],t)}}function Pn(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var s=0;s<n;s+=2)this.set(arguments[s],arguments[s+1])}else if(t)if(t instanceof Pn)for(n=t.T(),s=0;s<n.length;s++)this.set(n[s],t.get(n[s]));else for(s in t)this.set(s,t[s])}D=Pn.prototype;D.R=function(){ra(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t};D.T=function(){return ra(this),this.g.concat()};function ra(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var s=t.g[e];Xt(t.h,s)&&(t.g[n++]=s),e++}t.g.length=n}if(t.i!=t.g.length){var r={};for(n=e=0;e<t.g.length;)s=t.g[e],Xt(r,s)||(t.g[n++]=s,r[s]=1),e++;t.g.length=n}}D.get=function(t,e){return Xt(this.h,t)?this.h[t]:e};D.set=function(t,e){Xt(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e};D.forEach=function(t,e){for(var n=this.T(),s=0;s<n.length;s++){var r=n[s],i=this.get(r);t.call(e,i,r,this)}};function Xt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Bu=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function av(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var s=t[n].indexOf("="),r=null;if(0<=s){var i=t[n].substring(0,s);r=t[n].substring(s+1)}else i=t[n];e(i,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function Jt(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Jt){this.g=e!==void 0?e:t.g,Hr(this,t.j),this.s=t.s,Kr(this,t.i),zr(this,t.m),this.l=t.l,e=t.h;var n=new Cs;n.i=e.i,e.g&&(n.g=new Pn(e.g),n.h=e.h),Hu(this,n),this.o=t.o}else t&&(n=String(t).match(Bu))?(this.g=!!e,Hr(this,n[1]||"",!0),this.s=_s(n[2]||""),Kr(this,n[3]||"",!0),zr(this,n[4]),this.l=_s(n[5]||"",!0),Hu(this,n[6]||"",!0),this.o=_s(n[7]||"")):(this.g=!!e,this.h=new Cs(null,this.g))}Jt.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ss(e,Ku,!0),":");var n=this.i;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Ss(e,Ku,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&t.push("/"),t.push(Ss(n,n.charAt(0)=="/"?fv:hv,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ss(n,pv)),t.join("")};function bt(t){return new Jt(t)}function Hr(t,e,n){t.j=n?_s(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Kr(t,e,n){t.i=n?_s(e,!0):e}function zr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Hu(t,e,n){e instanceof Cs?(t.h=e,gv(t.h,t.g)):(n||(e=Ss(e,dv)),t.h=new Cs(e,t.g))}function pe(t,e,n){t.h.set(e,n)}function Gr(t){return pe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function lv(t){return t instanceof Jt?bt(t):new Jt(t,void 0)}function cv(t,e,n,s){var r=new Jt(null,void 0);return t&&Hr(r,t),e&&Kr(r,e),n&&zr(r,n),s&&(r.l=s),r}function _s(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ss(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,uv),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function uv(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Ku=/[#\/\?@]/g,hv=/[#\?:]/g,fv=/[#\?]/g,dv=/[#\?@]/g,pv=/#/g;function Cs(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Lt(t){t.g||(t.g=new Pn,t.h=0,t.i&&av(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}D=Cs.prototype;D.add=function(t,e){Lt(this),this.i=null,t=kn(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function zu(t,e){Lt(t),e=kn(t,e),Xt(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,t=t.g,Xt(t.h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&ra(t)))}function Gu(t,e){return Lt(t),e=kn(t,e),Xt(t.g.h,e)}D.forEach=function(t,e){Lt(this),this.g.forEach(function(n,s){lu(n,function(r){t.call(e,r,s,this)},this)},this)};D.T=function(){Lt(this);for(var t=this.g.R(),e=this.g.T(),n=[],s=0;s<e.length;s++)for(var r=t[s],i=0;i<r.length;i++)n.push(e[s]);return n};D.R=function(t){Lt(this);var e=[];if(typeof t=="string")Gu(this,t)&&(e=cu(e,this.g.get(kn(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=cu(e,t[n])}return e};D.set=function(t,e){return Lt(this),this.i=null,t=kn(this,t),Gu(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};D.get=function(t,e){return t?(t=this.R(t),0<t.length?String(t[0]):e):e};function Wu(t,e,n){zu(t,e),0<n.length&&(t.i=null,t.g.set(kn(t,e),Co(n)),t.h+=n.length)}D.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var s=e[n],r=encodeURIComponent(String(s));s=this.R(s);for(var i=0;i<s.length;i++){var o=r;s[i]!==""&&(o+="="+encodeURIComponent(String(s[i]))),t.push(o)}}return this.i=t.join("&")};function kn(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function gv(t,e){e&&!t.j&&(Lt(t),t.i=null,t.g.forEach(function(n,s){var r=s.toLowerCase();s!=r&&(zu(this,s),Wu(this,r,n))},t)),t.j=e}var mv=class{constructor(t,e){this.h=t,this.g=e}};function Qu(t){this.l=t||yv,j.PerformanceNavigationTiming?(t=j.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(j.g&&j.g.Ea&&j.g.Ea()&&j.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var yv=10;function Yu(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Xu(t){return t.h?1:t.g?t.g.size:0}function ia(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function oa(t,e){t.g?t.g.add(e):t.h=e}function Ju(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Qu.prototype.cancel=function(){if(this.i=Zu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function Zu(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return Co(t.i)}function aa(){}aa.prototype.stringify=function(t){return j.JSON.stringify(t,void 0)};aa.prototype.parse=function(t){return j.JSON.parse(t,void 0)};function vv(){this.g=new aa}function wv(t,e,n){const s=n||"";try{sa(t,function(r,i){let o=r;gs(r)&&(o=Ho(r)),e.push(s+i+"="+encodeURIComponent(o))})}catch(r){throw e.push(s+"type="+encodeURIComponent("_badmap")),r}}function Ev(t,e){const n=new Vr;if(j.Image){const s=new Image;s.onload=Dr(Wr,n,s,"TestLoadImage: loaded",!0,e),s.onerror=Dr(Wr,n,s,"TestLoadImage: error",!1,e),s.onabort=Dr(Wr,n,s,"TestLoadImage: abort",!1,e),s.ontimeout=Dr(Wr,n,s,"TestLoadImage: timeout",!1,e),j.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=t}else e(!1)}function Wr(t,e,n,s,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(s)}catch{}}function Ns(t){this.l=t.$b||null,this.j=t.ib||!1}Ne(Ns,Yo);Ns.prototype.g=function(){return new Qr(this.l,this.j)};Ns.prototype.i=function(t){return function(){return t}}({});function Qr(t,e){be.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=la,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ne(Qr,be);var la=0;D=Qr.prototype;D.open=function(t,e){if(this.readyState!=la)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,xs(this)};D.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||j).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))};D.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Rs(this)),this.readyState=la};D.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,xs(this)),this.g&&(this.readyState=3,xs(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof j.ReadableStream!="undefined"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;eh(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))};function eh(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}D.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Rs(this):xs(this),this.readyState==3&&eh(this)}};D.Ua=function(t){this.g&&(this.response=this.responseText=t,Rs(this))};D.Ta=function(t){this.g&&(this.response=t,Rs(this))};D.ha=function(){this.g&&Rs(this)};function Rs(t){t.readyState=4,t.l=null,t.j=null,t.A=null,xs(t)}D.setRequestHeader=function(t,e){this.v.append(t,e)};D.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};D.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function xs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Qr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var Iv=j.JSON.parse;function ye(t){be.call(this),this.headers=new Pn,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=th,this.K=this.L=!1}Ne(ye,be);var th="",Tv=/^https?$/i,bv=["POST","PUT"];D=ye.prototype;D.ea=function(t,e,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Zo.g(),this.C=this.u?Lu(this.u):Lu(Zo),this.g.onreadystatechange=Ce(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(i){nh(this,i);return}t=n||"";const r=new Pn(this.headers);s&&sa(s,function(i,o){r.set(o,i)}),s=ky(r.T()),n=j.FormData&&t instanceof j.FormData,!(0<=au(bv,e))||s||n||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach(function(i,o){this.g.setRequestHeader(o,i)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ih(this),0<this.B&&((this.K=Av(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ce(this.pa,this)):this.A=Qo(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){nh(this,i)}};function Av(t){return Dn&&Uy()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function _v(t){return t.toLowerCase()=="content-type"}D.pa=function(){typeof Ao!="undefined"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Re(this,"timeout"),this.abort(8))};function nh(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,sh(t),Yr(t)}function sh(t){t.D||(t.D=!0,Re(t,"complete"),Re(t,"error"))}D.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Re(this,"complete"),Re(this,"abort"),Yr(this))};D.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Yr(this,!0)),ye.Z.M.call(this)};D.Fa=function(){this.s||(this.F||this.v||this.l?rh(this):this.cb())};D.cb=function(){rh(this)};function rh(t){if(t.h&&typeof Ao!="undefined"&&(!t.C[1]||At(t)!=4||t.ba()!=2)){if(t.v&&At(t)==4)Qo(t.Fa,0,t);else if(Re(t,"readystatechange"),At(t)==4){t.h=!1;try{const a=t.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var s;if(s=a===0){var r=String(t.H).match(Bu)[1]||null;if(!r&&j.self&&j.self.location){var i=j.self.location.protocol;r=i.substr(0,i.length-1)}s=!Tv.test(r?r.toLowerCase():"")}n=s}if(n)Re(t,"complete"),Re(t,"success");else{t.m=6;try{var o=2<At(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.ba()+"]",sh(t)}}finally{Yr(t)}}}}function Yr(t,e){if(t.g){ih(t);const n=t.g,s=t.C[0]?xr:null;t.g=null,t.C=null,e||Re(t,"ready");try{n.onreadystatechange=s}catch{}}}function ih(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(j.clearTimeout(t.A),t.A=null)}function At(t){return t.g?t.g.readyState:0}D.ba=function(){try{return 2<At(this)?this.g.status:-1}catch{return-1}};D.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};D.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),Iv(e)}};function oh(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case th:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}D.Da=function(){return this.m};D.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function Sv(t){let e="";return Ro(t,function(n,s){e+=s,e+=":",e+=n,e+=`\r
`}),e}function ca(t,e,n){e:{for(s in n){var s=!1;break e}s=!0}s||(n=Sv(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):pe(t,e,n))}function Ds(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function ah(t){this.za=0,this.l=[],this.h=new Vr,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ds("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ds("baseRetryDelayMs",5e3,t),this.$a=Ds("retryDelaySeedMs",1e4,t),this.Ya=Ds("forwardChannelMaxRetries",2,t),this.ra=Ds("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Qu(t&&t.concurrentRequestLimit),this.Ca=new vv,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||t.Xb!==!1}D=ah.prototype;D.ma=8;D.G=1;function ua(t){if(lh(t),t.G==3){var e=t.V++,n=bt(t.F);pe(n,"SID",t.J),pe(n,"RID",e),pe(n,"TYPE","terminate"),Os(t,n),e=new Ts(t,t.h,e,void 0),e.K=2,e.v=Gr(bt(n)),n=!1,j.navigator&&j.navigator.sendBeacon&&(n=j.navigator.sendBeacon(e.v.toString(),"")),!n&&j.Image&&(new Image().src=e.v,n=!0),n||(e.g=yh(e.l,null),e.g.ea(e.v)),e.F=Date.now(),bs(e)}gh(t)}D.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch{}};function Xr(t){t.g&&(da(t),t.g.cancel(),t.g=null)}function lh(t){Xr(t),t.u&&(j.clearTimeout(t.u),t.u=null),Zr(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&j.clearTimeout(t.m),t.m=null)}function ha(t,e){t.l.push(new mv(t.Za++,e)),t.G==3&&Jr(t)}function Jr(t){Yu(t.i)||t.m||(t.m=!0,Ko(t.Ha,t),t.C=0)}function Cv(t,e){return Xu(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.l=e.D.concat(t.l),!0):t.G==1||t.G==2||t.C>=(t.Xa?0:t.Ya)?!1:(t.m=Es(Ce(t.Ha,t,e),ph(t,t.C)),t.C++,!0)}D.Ha=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const r=new Ts(this,this.h,t,void 0);let i=this.s;if(this.P&&(i?(i=du(i),gu(i,this.P)):i=this.P),this.o===null&&(r.H=i),this.ja)e:{for(var e=0,n=0;n<this.l.length;n++){t:{var s=this.l[n];if("__data__"in s.g&&(s=s.g.__data__,typeof s=="string")){s=s.length;break t}s=void 0}if(s===void 0)break;if(e+=s,4096<e){e=n;break e}if(e===4096||n===this.l.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=uh(this,r,e),n=bt(this.F),pe(n,"RID",t),pe(n,"CVER",22),this.D&&pe(n,"X-HTTP-Session-Id",this.D),Os(this,n),this.o&&i&&ca(n,this.o,i),oa(this.i,r),this.Ra&&pe(n,"TYPE","init"),this.ja?(pe(n,"$req",e),pe(n,"SID","null"),r.$=!0,ta(r,n,null)):ta(r,n,e),this.G=2}}else this.G==3&&(t?ch(this,t):this.l.length==0||Yu(this.i)||ch(this))};function ch(t,e){var n;e?n=e.m:n=t.V++;const s=bt(t.F);pe(s,"SID",t.J),pe(s,"RID",n),pe(s,"AID",t.U),Os(t,s),t.o&&t.s&&ca(s,t.o,t.s),n=new Ts(t,t.h,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=uh(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),oa(t.i,n),ta(n,s,e)}function Os(t,e){t.j&&sa({},function(n,s){pe(e,s,n)})}function uh(t,e,n){n=Math.min(t.l.length,n);var s=t.j?Ce(t.j.Oa,t.j,t):null;e:{var r=t.l;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=r[0].h,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=r[l].h;const u=r[l].g;if(c-=i,0>c)i=Math.max(0,r[l].h-100),a=!1;else try{wv(u,o,"req"+c+"_")}catch{s&&s(u)}}if(a){s=o.join("&");break e}}}return t=t.l.splice(0,n),e.D=t,s}function hh(t){t.g||t.u||(t.Y=1,Ko(t.Ga,t),t.A=0)}function fa(t){return t.g||t.u||3<=t.A?!1:(t.Y++,t.u=Es(Ce(t.Ga,t),ph(t,t.A)),t.A++,!0)}D.Ga=function(){if(this.u=null,fh(this),this.$&&!(this.L||this.g==null||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Es(Ce(this.bb,this),t)}};D.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,qe(10),Xr(this),fh(this))};function da(t){t.B!=null&&(j.clearTimeout(t.B),t.B=null)}function fh(t){t.g=new Ts(t,t.h,"rpc",t.Y),t.o===null&&(t.g.H=t.s),t.g.O=0;var e=bt(t.oa);pe(e,"RID","rpc"),pe(e,"SID",t.J),pe(e,"CI",t.N?"0":"1"),pe(e,"AID",t.U),Os(t,e),pe(e,"TYPE","xmlhttp"),t.o&&t.s&&ca(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Gr(bt(e)),n.s=null,n.U=!0,Uu(n,t)}D.ab=function(){this.v!=null&&(this.v=null,Xr(this),fa(this),qe(19))};function Zr(t){t.v!=null&&(j.clearTimeout(t.v),t.v=null)}function dh(t,e){var n=null;if(t.g==e){Zr(t),da(t),t.g=null;var s=2}else if(ia(t.i,e))n=e.D,Ju(t.i,e),s=1;else return;if(t.I=e.N,t.G!=0){if(e.i)if(s==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var r=t.C;s=Ur(),Re(s,new ku(s,n,e,r)),Jr(t)}else hh(t);else if(r=e.o,r==3||r==0&&0<t.I||!(s==1&&Cv(t,e)||s==2&&fa(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:Zt(t,5);break;case 4:Zt(t,10);break;case 3:Zt(t,6);break;default:Zt(t,2)}}}function ph(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Zt(t,e){if(t.h.info("Error code "+e),e==2){var n=null;t.j&&(n=null);var s=Ce(t.jb,t);n||(n=new Jt("//www.google.com/images/cleardot.gif"),j.location&&j.location.protocol=="http"||Hr(n,"https"),Gr(n)),Ev(n.toString(),s)}else qe(2);t.G=0,t.j&&t.j.va(e),gh(t),lh(t)}D.jb=function(t){t?(this.h.info("Successfully pinged google.com"),qe(2)):(this.h.info("Failed to ping google.com"),qe(1))};function gh(t){t.G=0,t.I=-1,t.j&&((Zu(t.i).length!=0||t.l.length!=0)&&(t.i.i.length=0,Co(t.l),t.l.length=0),t.j.ua())}function mh(t,e,n){let s=lv(n);if(s.i!="")e&&Kr(s,e+"."+s.i),zr(s,s.m);else{const r=j.location;s=cv(r.protocol,e?e+"."+r.hostname:r.hostname,+r.port,n)}return t.aa&&Ro(t.aa,function(r,i){pe(s,i,r)}),e=t.D,n=t.sa,e&&n&&pe(s,e,n),pe(s,"VER",t.ma),Os(t,s),s}function yh(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ba&&!t.qa?new ye(new Ns({ib:!0})):new ye(t.qa),e.L=t.H,e}function vh(){}D=vh.prototype;D.xa=function(){};D.wa=function(){};D.va=function(){};D.ua=function(){};D.Oa=function(){};function ei(){if(Dn&&!(10<=Number($y)))throw Error("Environmental error: no available transport.")}ei.prototype.g=function(t,e){return new Ye(t,e)};function Ye(t,e){be.call(this),this.g=new ah(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!Or(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Or(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Mn(this)}Ne(Ye,be);Ye.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Ko(Ce(t.hb,t,e))),qe(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=mh(t,null,t.W),Jr(t)};Ye.prototype.close=function(){ua(this.g)};Ye.prototype.u=function(t){if(typeof t=="string"){var e={};e.__data__=t,ha(this.g,e)}else this.v?(e={},e.__data__=Ho(t),ha(this.g,e)):ha(this.g,t)};Ye.prototype.M=function(){this.g.j=null,delete this.j,ua(this.g),delete this.g,Ye.Z.M.call(this)};function wh(t){Xo.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Ne(wh,Xo);function Eh(){Jo.call(this),this.status=1}Ne(Eh,Jo);function Mn(t){this.g=t}Ne(Mn,vh);Mn.prototype.xa=function(){Re(this.g,"a")};Mn.prototype.wa=function(t){Re(this.g,new wh(t))};Mn.prototype.va=function(t){Re(this.g,new Eh(t))};Mn.prototype.ua=function(){Re(this.g,"b")};ei.prototype.createWebChannel=ei.prototype.g;Ye.prototype.send=Ye.prototype.u;Ye.prototype.open=Ye.prototype.m;Ye.prototype.close=Ye.prototype.close;$r.NO_ERROR=0;$r.TIMEOUT=8;$r.HTTP_ERROR=6;Mu.COMPLETE="complete";Fu.EventType=Is;Is.OPEN="a";Is.CLOSE="b";Is.ERROR="c";Is.MESSAGE="d";be.prototype.listen=be.prototype.N;ye.prototype.listenOnce=ye.prototype.O;ye.prototype.getLastError=ye.prototype.La;ye.prototype.getLastErrorCode=ye.prototype.Da;ye.prototype.getStatus=ye.prototype.ba;ye.prototype.getResponseJson=ye.prototype.Qa;ye.prototype.getResponseText=ye.prototype.ga;ye.prototype.send=ye.prototype.ea;var Nv=function(){return new ei},Rv=function(){return Ur()},pa=$r,xv=Mu,Dv=Qt,Ih={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Ov=Ns,ti=Fu,Pv=ye;const Th="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ze.UNAUTHENTICATED=new ze(null),ze.GOOGLE_CREDENTIALS=new ze("google-credentials-uid"),ze.FIRST_PARTY=new ze("first-party-uid"),ze.MOCK_USER=new ze("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ln="9.1.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en=new ru("@firebase/firestore");function bh(){return en.logLevel}function U(t,...e){if(en.logLevel<=ne.DEBUG){const n=e.map(ga);en.debug(`Firestore (${Ln}): ${t}`,...n)}}function Ft(t,...e){if(en.logLevel<=ne.ERROR){const n=e.map(ga);en.error(`Firestore (${Ln}): ${t}`,...n)}}function Ah(t,...e){if(en.logLevel<=ne.WARN){const n=e.map(ga);en.warn(`Firestore (${Ln}): ${t}`,...n)}}function ga(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(t="Unexpected state"){const e=`FIRESTORE (${Ln}) INTERNAL ASSERTION FAILED: `+t;throw Ft(e),new Error(e)}function ve(t,e){t||G()}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class P extends Error{constructor(e,n){super(n),this.code=e,this.message=n,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,n){this.user=n,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}}class Mv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ze.UNAUTHENTICATED))}shutdown(){}}class Lv{constructor(e){this.t=e,this.currentUser=ze.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let s=this.i;const r=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let i=new tn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new tn,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{U("FirebaseCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(U("FirebaseCredentialsProvider","Auth not yet detected"),i.resolve(),i=new tn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(U("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ve(typeof s.accessToken=="string"),new kv(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string"),new ze(e)}}class Fv{constructor(e,n,s){this.h=e,this.l=n,this.m=s,this.type="FirstParty",this.user=ze.FIRST_PARTY}get authHeaders(){const e={"X-Goog-AuthUser":this.l},n=this.h.auth.getAuthHeaderValueForFirstParty([]);return n&&(e.Authorization=n),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}class Vv{constructor(e,n,s){this.h=e,this.l=n,this.m=s}getToken(){return Promise.resolve(new Fv(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(ze.FIRST_PARTY))}shutdown(){}invalidateToken(){}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.g(s),this.p=s=>n.writeSequenceNumber(s))}g(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.p&&this.p(e),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ma.T=-1;class $v{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const r=Uv(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%e.length))}return s}}function re(t,e){return t<e?-1:t>e?1:0}function Ps(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new P(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new P(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new P(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new et(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.timestamp=e}static fromTimestamp(e){return new se(e)}static min(){return new se(new et(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _h(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ks(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Sh(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,n,s){n===void 0?n=0:n>e.length&&G(),s===void 0?s=e.length-n:s>e.length-n&&G(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Ms.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ms?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=e.get(r),o=n.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class me extends Ms{construct(e,n,s){return new me(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new P(A.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new me(n)}static emptyPath(){return new me([])}}const jv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tt extends Ms{construct(e,n,s){return new tt(e,n,s)}static isValidIdentifier(e){return jv.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new tt(["__name__"])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new P(A.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new P(A.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new P(A.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new P(A.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tt(n)}static emptyPath(){return new tt([])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new Me(n)}static fromUint8Array(e){const n=function(s){let r="";for(let i=0;i<s.length;++i)r+=String.fromCharCode(s[i]);return r}(e);return new Me(n)}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Me.EMPTY_BYTE_STRING=new Me("");const qv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vt(t){if(ve(!!t),typeof t=="string"){let e=0;const n=qv.exec(t);if(ve(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:we(t.seconds),nanos:we(t.nanos)}}function we(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Fn(t){return typeof t=="string"?Me.fromBase64String(t):Me.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ch(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Nh(t){const e=t.mapValue.fields.__previous_value__;return Ch(e)?Nh(e):e}function Ls(t){const e=Vt(t.mapValue.fields.__local_write_time__.timestampValue);return new et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(t){return t==null}function ni(t){return t===0&&1/t==-1/0}function Bv(t){return typeof t=="number"&&Number.isInteger(t)&&!ni(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.path=e}static fromPath(e){return new B(me.fromString(e))}static fromName(e){return new B(me.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return e!==null&&me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new B(new me(e.slice()))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ch(t)?4:10:G()}function pt(t,e){const n=nn(t);if(n!==nn(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ls(t).isEqual(Ls(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const i=Vt(s.timestampValue),o=Vt(r.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,r){return Fn(s.bytesValue).isEqual(Fn(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,r){return we(s.geoPointValue.latitude)===we(r.geoPointValue.latitude)&&we(s.geoPointValue.longitude)===we(r.geoPointValue.longitude)}(t,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return we(s.integerValue)===we(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const i=we(s.doubleValue),o=we(r.doubleValue);return i===o?ni(i)===ni(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return Ps(t.arrayValue.values||[],e.arrayValue.values||[],pt);case 10:return function(s,r){const i=s.mapValue.fields||{},o=r.mapValue.fields||{};if(_h(i)!==_h(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!pt(i[a],o[a])))return!1;return!0}(t,e);default:return G()}}function Fs(t,e){return(t.values||[]).find(n=>pt(n,e))!==void 0}function Un(t,e){const n=nn(t),s=nn(e);if(n!==s)return re(n,s);switch(n){case 0:return 0;case 1:return re(t.booleanValue,e.booleanValue);case 2:return function(r,i){const o=we(r.integerValue||r.doubleValue),a=we(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return Rh(t.timestampValue,e.timestampValue);case 4:return Rh(Ls(t),Ls(e));case 5:return re(t.stringValue,e.stringValue);case 6:return function(r,i){const o=Fn(r),a=Fn(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(r,i){const o=r.split("/"),a=i.split("/");for(let l=0;l<o.length&&l<a.length;l++){const c=re(o[l],a[l]);if(c!==0)return c}return re(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,i){const o=re(we(r.latitude),we(i.latitude));return o!==0?o:re(we(r.longitude),we(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(r,i){const o=r.values||[],a=i.values||[];for(let l=0;l<o.length&&l<a.length;++l){const c=Un(o[l],a[l]);if(c)return c}return re(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(r,i){const o=r.fields||{},a=Object.keys(o),l=i.fields||{},c=Object.keys(l);a.sort(),c.sort();for(let u=0;u<a.length&&u<c.length;++u){const h=re(a[u],c[u]);if(h!==0)return h;const d=Un(o[a[u]],l[c[u]]);if(d!==0)return d}return re(a.length,c.length)}(t.mapValue,e.mapValue);default:throw G()}}function Rh(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return re(t,e);const n=Vt(t),s=Vt(e),r=re(n.seconds,s.seconds);return r!==0?r:re(n.nanos,s.nanos)}function ya(t){return va(t)}function va(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(s){const r=Vt(s);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Fn(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,B.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(s){let r="[",i=!0;for(const o of s.values||[])i?i=!1:r+=",",r+=va(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(s){const r=Object.keys(s.fields||{}).sort();let i="{",o=!0;for(const a of r)o?o=!1:i+=",",i+=`${a}:${va(s.fields[a])}`;return i+"}"}(t.mapValue):G();var e,n}function xh(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function wa(t){return!!t&&"integerValue"in t}function Ea(t){return!!t&&"arrayValue"in t}function Dh(t){return!!t&&"nullValue"in t}function Oh(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ia(t){return!!t&&"mapValue"in t}function Vs(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ks(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Vs(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Vs(t.arrayValue.values[n]);return e}return Object.assign({},t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.value=e}static empty(){return new _t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Ia(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vs(n)}setAll(e){let n=tt.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=Vs(o):r.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());Ia(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pt(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];Ia(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){ks(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new _t(Vs(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,n,s,r,i){this.key=e,this.documentType=n,this.version=s,this.data=r,this.documentState=i}static newInvalidDocument(e){return new Le(e,0,se.min(),_t.empty(),0)}static newFoundDocument(e,n,s){return new Le(e,1,n,s,0)}static newNoDocument(e,n){return new Le(e,2,n,_t.empty(),0)}static newUnknownDocument(e,n){return new Le(e,3,n,_t.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_t.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_t.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Le&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new Le(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.A=null}}function Ph(t,e=null,n=[],s=[],r=null,i=null,o=null){return new Hv(t,e,n,s,r,i,o)}function Ta(t){const e=ee(t);if(e.A===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>zv(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),Vn(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=si(e.startAt)),e.endAt&&(n+="|ub:",n+=si(e.endAt)),e.A=n}return e.A}function Kv(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(s=n).field.canonicalString()} ${s.op} ${ya(s.value)}`;var s}).join(", ")}]`),Vn(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: "+si(t.startAt)),t.endAt&&(e+=", endAt: "+si(t.endAt)),`Target(${e})`}function ba(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!ew(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(n=t.filters[r],s=e.filters[r],n.op!==s.op||!n.field.isEqual(s.field)||!pt(n.value,s.value))return!1;var n,s;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Lh(t.startAt,e.startAt)&&Lh(t.endAt,e.endAt)}function Aa(t){return B.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Be extends class{}{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.R(e,n,s):new Gv(e,n,s):n==="array-contains"?new Yv(e,s):n==="in"?new Xv(e,s):n==="not-in"?new Jv(e,s):n==="array-contains-any"?new Zv(e,s):new Be(e,n,s)}static R(e,n,s){return n==="in"?new Wv(e,s):new Qv(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.P(Un(n,this.value)):n!==null&&nn(this.value)===nn(n)&&this.P(Un(n,this.value))}P(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}function zv(t){return t.field.canonicalString()+t.op.toString()+ya(t.value)}class Gv extends Be{constructor(e,n,s){super(e,n,s),this.key=B.fromName(s.referenceValue)}matches(e){const n=B.comparator(e.key,this.key);return this.P(n)}}class Wv extends Be{constructor(e,n){super(e,"in",n),this.keys=kh("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Qv extends Be{constructor(e,n){super(e,"not-in",n),this.keys=kh("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function kh(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>B.fromName(s.referenceValue))}class Yv extends Be{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ea(n)&&Fs(n.arrayValue,this.value)}}class Xv extends Be{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Fs(this.value.arrayValue,n)}}class Jv extends Be{constructor(e,n){super(e,"not-in",n)}matches(e){if(Fs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Fs(this.value.arrayValue,n)}}class Zv extends Be{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ea(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Fs(this.value.arrayValue,s))}}class _a{constructor(e,n){this.position=e,this.before=n}}function si(t){return`${t.before?"b":"a"}:${t.position.map(e=>ya(e)).join(",")}`}class $n{constructor(e,n="asc"){this.field=e,this.dir=n}}function ew(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Mh(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=B.comparator(B.fromName(o.referenceValue),n.key):s=Un(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return t.before?s<=0:s<0}function Lh(t,e){if(t===null)return e===null;if(e===null||t.before!==e.before||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pt(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.V=null,this.S=null,this.startAt,this.endAt}}function tw(t,e,n,s,r,i,o,a){return new jn(t,e,n,s,r,i,o,a)}function Fh(t){return new jn(t)}function ri(t){return!Vn(t.limit)&&t.limitType==="F"}function ii(t){return!Vn(t.limit)&&t.limitType==="L"}function Sa(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Ca(t){for(const e of t.filters)if(e.v())return e.field;return null}function Vh(t){return t.collectionGroup!==null}function Us(t){const e=ee(t);if(e.V===null){e.V=[];const n=Ca(e),s=Sa(e);if(n!==null&&s===null)n.isKeyField()||e.V.push(new $n(n)),e.V.push(new $n(tt.keyField(),"asc"));else{let r=!1;for(const i of e.explicitOrderBy)e.V.push(i),i.field.isKeyField()&&(r=!0);if(!r){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.V.push(new $n(tt.keyField(),i))}}}return e.V}function sn(t){const e=ee(t);if(!e.S)if(e.limitType==="F")e.S=Ph(e.path,e.collectionGroup,Us(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const i of Us(e)){const o=i.dir==="desc"?"asc":"desc";n.push(new $n(i.field,o))}const s=e.endAt?new _a(e.endAt.position,!e.endAt.before):null,r=e.startAt?new _a(e.startAt.position,!e.startAt.before):null;e.S=Ph(e.path,e.collectionGroup,n,e.filters,e.limit,s,r)}return e.S}function Uh(t,e,n){return new jn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function oi(t,e){return ba(sn(t),sn(e))&&t.limitType===e.limitType}function $h(t){return`${Ta(sn(t))}|lt:${t.limitType}`}function Na(t){return`Query(target=${Kv(sn(t))}; limitType=${t.limitType})`}function ai(t,e){return e.isFoundDocument()&&function(n,s){const r=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):B.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(t,e)&&function(n,s){for(const r of n.explicitOrderBy)if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const r of n.filters)if(!r.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!Mh(n.startAt,Us(n),s)||n.endAt&&Mh(n.endAt,Us(n),s))}(t,e)}function jh(t){return(e,n)=>{let s=!1;for(const r of Us(t)){const i=nw(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function nw(t,e,n){const s=t.field.isKeyField()?B.comparator(e.key,n.key):function(r,i,o){const a=i.data.field(r),l=o.data.field(r);return a!==null&&l!==null?Un(a,l):G()}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return G()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(t,e){if(t.D){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ni(e)?"-0":e}}function Bh(t){return{integerValue:""+t}}function sw(t,e){return Bv(e)?Bh(e):qh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(){this._=void 0}}function rw(t,e,n){return t instanceof Ra?function(s,r){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&(i.fields.__previous_value__=r),{mapValue:i}}(n,e):t instanceof ci?Hh(t,e):t instanceof ui?Kh(t,e):function(s,r){const i=ow(s,r),o=zh(i)+zh(s.C);return wa(i)&&wa(s.C)?Bh(o):qh(s.N,o)}(t,e)}function iw(t,e,n){return t instanceof ci?Hh(t,e):t instanceof ui?Kh(t,e):n}function ow(t,e){return t instanceof xa?wa(n=e)||function(s){return!!s&&"doubleValue"in s}(n)?e:{integerValue:0}:null;var n}class Ra extends li{}class ci extends li{constructor(e){super(),this.elements=e}}function Hh(t,e){const n=Gh(e);for(const s of t.elements)n.some(r=>pt(r,s))||n.push(s);return{arrayValue:{values:n}}}class ui extends li{constructor(e){super(),this.elements=e}}function Kh(t,e){let n=Gh(e);for(const s of t.elements)n=n.filter(r=>!pt(r,s));return{arrayValue:{values:n}}}class xa extends li{constructor(e,n){super(),this.N=e,this.C=n}}function zh(t){return we(t.integerValue||t.doubleValue)}function Gh(t){return Ea(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function aw(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof ci&&s instanceof ci||n instanceof ui&&s instanceof ui?Ps(n.elements,s.elements,pt):n instanceof xa&&s instanceof xa?pt(n.C,s.C):n instanceof Ra&&s instanceof Ra}(t.transform,e.transform)}function hi(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Wh{}function lw(t,e,n){t instanceof Xh?function(s,r,i){const o=s.value.clone(),a=Zh(s.fieldTransforms,r,i.transformResults);o.setAll(a),r.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Oa?function(s,r,i){if(!hi(s.precondition,r))return void r.convertToUnknownDocument(i.version);const o=Zh(s.fieldTransforms,r,i.transformResults),a=r.data;a.setAll(Jh(s)),a.setAll(o),r.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(s,r,i){r.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function Da(t,e,n){t instanceof Xh?function(s,r,i){if(!hi(s.precondition,r))return;const o=s.value.clone(),a=ef(s.fieldTransforms,i,r);o.setAll(a),r.convertToFoundDocument(Yh(r),o).setHasLocalMutations()}(t,e,n):t instanceof Oa?function(s,r,i){if(!hi(s.precondition,r))return;const o=ef(s.fieldTransforms,i,r),a=r.data;a.setAll(Jh(s)),a.setAll(o),r.convertToFoundDocument(Yh(r),a).setHasLocalMutations()}(t,e,n):function(s,r){hi(s.precondition,r)&&r.convertToNoDocument(se.min())}(t,e)}function Qh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Ps(n,s,(r,i)=>aw(r,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Yh(t){return t.isFoundDocument()?t.version:se.min()}class Xh extends Wh{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}}class Oa extends Wh{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}}function Jh(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function Zh(t,e,n){const s=new Map;ve(t.length===n.length);for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,iw(o,a,n[r]))}return s}function ef(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,rw(i,o,e))}return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee,Y;function tf(t){if(t===void 0)return Ft("GRPC error has no .code"),A.UNKNOWN;switch(t){case Ee.OK:return A.OK;case Ee.CANCELLED:return A.CANCELLED;case Ee.UNKNOWN:return A.UNKNOWN;case Ee.DEADLINE_EXCEEDED:return A.DEADLINE_EXCEEDED;case Ee.RESOURCE_EXHAUSTED:return A.RESOURCE_EXHAUSTED;case Ee.INTERNAL:return A.INTERNAL;case Ee.UNAVAILABLE:return A.UNAVAILABLE;case Ee.UNAUTHENTICATED:return A.UNAUTHENTICATED;case Ee.INVALID_ARGUMENT:return A.INVALID_ARGUMENT;case Ee.NOT_FOUND:return A.NOT_FOUND;case Ee.ALREADY_EXISTS:return A.ALREADY_EXISTS;case Ee.PERMISSION_DENIED:return A.PERMISSION_DENIED;case Ee.FAILED_PRECONDITION:return A.FAILED_PRECONDITION;case Ee.ABORTED:return A.ABORTED;case Ee.OUT_OF_RANGE:return A.OUT_OF_RANGE;case Ee.UNIMPLEMENTED:return A.UNIMPLEMENTED;case Ee.DATA_LOSS:return A.DATA_LOSS;default:return G()}}(Y=Ee||(Ee={}))[Y.OK=0]="OK",Y[Y.CANCELLED=1]="CANCELLED",Y[Y.UNKNOWN=2]="UNKNOWN",Y[Y.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Y[Y.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Y[Y.NOT_FOUND=5]="NOT_FOUND",Y[Y.ALREADY_EXISTS=6]="ALREADY_EXISTS",Y[Y.PERMISSION_DENIED=7]="PERMISSION_DENIED",Y[Y.UNAUTHENTICATED=16]="UNAUTHENTICATED",Y[Y.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Y[Y.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Y[Y.ABORTED=10]="ABORTED",Y[Y.OUT_OF_RANGE=11]="OUT_OF_RANGE",Y[Y.UNIMPLEMENTED=12]="UNIMPLEMENTED",Y[Y.INTERNAL=13]="INTERNAL",Y[Y.UNAVAILABLE=14]="UNAVAILABLE",Y[Y.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e,n){this.comparator=e,this.root=n||xe.EMPTY}insert(e,n){return new He(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xe.BLACK,null,null))}remove(e){return new He(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fi(this.root,e,this.comparator,!1)}getReverseIterator(){return new fi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fi(this.root,e,this.comparator,!0)}}class fi{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xe{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s!=null?s:xe.RED,this.left=r!=null?r:xe.EMPTY,this.right=i!=null?i:xe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new xe(e!=null?e:this.key,n!=null?n:this.value,s!=null?s:this.color,r!=null?r:this.left,i!=null?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return xe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return xe.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw G();const e=this.left.check();if(e!==this.right.check())throw G();return e+(this.isRed()?0:1)}}xe.EMPTY=null,xe.RED=!0,xe.BLACK=!1;xe.EMPTY=new class{constructor(){this.size=0}get key(){throw G()}get value(){throw G()}get color(){throw G()}get left(){throw G()}get right(){throw G()}copy(t,e,n,s,r){return this}insert(t,e,n){return new xe(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.comparator=e,this.data=new He(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new nf(this.data.getIterator())}getIteratorFrom(e){return new nf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof De)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new De(this.comparator);return n.data=e,n}}class nf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw=new He(B.comparator);function rn(){return uw}const hw=new He(B.comparator);function Pa(){return hw}new He(B.comparator);const fw=new De(B.comparator);function ge(...t){let e=fw;for(const n of t)e=e.add(n);return e}const dw=new De(re);function sf(){return dw}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n){const s=new Map;return s.set(e,$s.createSynthesizedTargetChangeForCurrentChange(e,n)),new di(se.min(),s,sf(),rn(),ge())}}class $s{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n){return new $s(Me.EMPTY_BYTE_STRING,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n,s,r){this.k=e,this.removedTargetIds=n,this.key=s,this.$=r}}class rf{constructor(e,n){this.targetId=e,this.O=n}}class of{constructor(e,n,s=Me.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class af{constructor(){this.F=0,this.M=cf(),this.L=Me.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return this.F!==0}get K(){return this.U}j(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}W(){let e=ge(),n=ge(),s=ge();return this.M.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:G()}}),new $s(this.L,this.B,e,n,s)}G(){this.U=!1,this.M=cf()}H(e,n){this.U=!0,this.M=this.M.insert(e,n)}J(e){this.U=!0,this.M=this.M.remove(e)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class pw{constructor(e){this.tt=e,this.et=new Map,this.nt=rn(),this.st=lf(),this.it=new De(re)}rt(e){for(const n of e.k)e.$&&e.$.isFoundDocument()?this.ot(n,e.$):this.at(n,e.key,e.$);for(const n of e.removedTargetIds)this.at(n,e.key,e.$)}ct(e){this.forEachTarget(e,n=>{const s=this.ut(n);switch(e.state){case 0:this.ht(n)&&s.j(e.resumeToken);break;case 1:s.X(),s.q||s.G(),s.j(e.resumeToken);break;case 2:s.X(),s.q||this.removeTarget(n);break;case 3:this.ht(n)&&(s.Z(),s.j(e.resumeToken));break;case 4:this.ht(n)&&(this.lt(n),s.j(e.resumeToken));break;default:G()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.et.forEach((s,r)=>{this.ht(r)&&n(r)})}ft(e){const n=e.targetId,s=e.O.count,r=this.dt(n);if(r){const i=r.target;if(Aa(i))if(s===0){const o=new B(i.path);this.at(n,o,Le.newNoDocument(o,se.min()))}else ve(s===1);else this.wt(n)!==s&&(this.lt(n),this.it=this.it.add(n))}}_t(e){const n=new Map;this.et.forEach((i,o)=>{const a=this.dt(o);if(a){if(i.current&&Aa(a.target)){const l=new B(a.target.path);this.nt.get(l)!==null||this.gt(o,l)||this.at(o,l,Le.newNoDocument(l,e))}i.K&&(n.set(o,i.W()),i.G())}});let s=ge();this.st.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.dt(l);return!c||c.purpose===2||(a=!1,!1)}),a&&(s=s.add(i))});const r=new di(e,n,this.it,this.nt,s);return this.nt=rn(),this.st=lf(),this.it=new De(re),r}ot(e,n){if(!this.ht(e))return;const s=this.gt(e,n.key)?2:0;this.ut(e).H(n.key,s),this.nt=this.nt.insert(n.key,n),this.st=this.st.insert(n.key,this.yt(n.key).add(e))}at(e,n,s){if(!this.ht(e))return;const r=this.ut(e);this.gt(e,n)?r.H(n,1):r.J(n),this.st=this.st.insert(n,this.yt(n).delete(e)),s&&(this.nt=this.nt.insert(n,s))}removeTarget(e){this.et.delete(e)}wt(e){const n=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Y(e){this.ut(e).Y()}ut(e){let n=this.et.get(e);return n||(n=new af,this.et.set(e,n)),n}yt(e){let n=this.st.get(e);return n||(n=new De(re),this.st=this.st.insert(e,n)),n}ht(e){const n=this.dt(e)!==null;return n||U("WatchChangeAggregator","Detected inactive target",e),n}dt(e){const n=this.et.get(e);return n&&n.q?null:this.tt.Tt(e)}lt(e){this.et.set(e,new af),this.tt.getRemoteKeysForTarget(e).forEach(n=>{this.at(e,n,null)})}gt(e,n){return this.tt.getRemoteKeysForTarget(e).has(n)}}function lf(){return new He(B.comparator)}function cf(){return new He(B.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),mw=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class yw{constructor(e,n){this.databaseId=e,this.D=n}}function ka(t,e){return t.D?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uf(t,e){return t.D?e.toBase64():e.toUint8Array()}function js(t){return ve(!!t),se.fromTimestamp(function(e){const n=Vt(e);return new et(n.seconds,n.nanos)}(t))}function hf(t,e){return function(n){return new me(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function ff(t){const e=me.fromString(t);return ve(vf(e)),e}function Ma(t,e){const n=ff(e);if(n.get(1)!==t.databaseId.projectId)throw new P(A.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new P(A.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new B(pf(n))}function La(t,e){return hf(t.databaseId,e)}function vw(t){const e=ff(t);return e.length===4?me.emptyPath():pf(e)}function df(t){return new me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function pf(t){return ve(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ww(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:G()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(l,c){return l.D?(ve(c===void 0||typeof c=="string"),Me.fromBase64String(c||"")):(ve(c===void 0||c instanceof Uint8Array),Me.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const c=l.code===void 0?A.UNKNOWN:tf(l.code);return new P(c,l.message||"")}(o);n=new of(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Ma(t,s.document.name),i=js(s.document.updateTime),o=new _t({mapValue:{fields:s.document.fields}}),a=Le.newFoundDocument(r,i,o),l=s.targetIds||[],c=s.removedTargetIds||[];n=new pi(l,c,a.key,a)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Ma(t,s.document),i=s.readTime?js(s.readTime):se.min(),o=Le.newNoDocument(r,i),a=s.removedTargetIds||[];n=new pi([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Ma(t,s.document),i=s.removedTargetIds||[];n=new pi([],i,r,null)}else{if(!("filter"in e))return G();{e.filter;const s=e.filter;s.targetId;const r=s.count||0,i=new cw(r),o=s.targetId;n=new rf(o,i)}}return n}function Ew(t,e){return{documents:[La(t,e.path)]}}function Iw(t,e){const n={structuredQuery:{}},s=e.path;e.collectionGroup!==null?(n.parent=La(t,s),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=La(t,s.popLast()),n.structuredQuery.from=[{collectionId:s.lastSegment()}]);const r=function(a){if(a.length===0)return;const l=a.map(c=>function(u){if(u.op==="=="){if(Oh(u.value))return{unaryFilter:{field:qn(u.field),op:"IS_NAN"}};if(Dh(u.value))return{unaryFilter:{field:qn(u.field),op:"IS_NULL"}}}else if(u.op==="!="){if(Oh(u.value))return{unaryFilter:{field:qn(u.field),op:"IS_NOT_NAN"}};if(Dh(u.value))return{unaryFilter:{field:qn(u.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qn(u.field),op:_w(u.op),value:u.value}}}(c));return l.length===1?l[0]:{compositeFilter:{op:"AND",filters:l}}}(e.filters);r&&(n.structuredQuery.where=r);const i=function(a){if(a.length!==0)return a.map(l=>function(c){return{field:qn(c.field),direction:Aw(c.dir)}}(l))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=function(a,l){return a.D||Vn(l)?l:{value:l}}(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=mf(e.startAt)),e.endAt&&(n.structuredQuery.endAt=mf(e.endAt)),n}function Tw(t){let e=vw(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){ve(s===1);const u=n.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let i=[];n.where&&(i=gf(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(u=>function(h){return new $n(Bn(h.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(u)));let a=null;n.limit&&(a=function(u){let h;return h=typeof u=="object"?u.value:u,Vn(h)?null:h}(n.limit));let l=null;n.startAt&&(l=yf(n.startAt));let c=null;return n.endAt&&(c=yf(n.endAt)),tw(e,r,o,i,a,"F",l,c)}function bw(t,e){const n=function(s,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return G()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function gf(t){return t?t.unaryFilter!==void 0?[Cw(t)]:t.fieldFilter!==void 0?[Sw(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>gf(e)).reduce((e,n)=>e.concat(n)):G():[]}function mf(t){return{before:t.before,values:t.position}}function yf(t){const e=!!t.before,n=t.values||[];return new _a(n,e)}function Aw(t){return gw[t]}function _w(t){return mw[t]}function qn(t){return{fieldPath:t.canonicalString()}}function Bn(t){return tt.fromServerFormat(t.fieldPath)}function Sw(t){return Be.create(Bn(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return G()}}(t.fieldFilter.op),t.fieldFilter.value)}function Cw(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Bn(t.unaryFilter.field);return Be.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Bn(t.unaryFilter.field);return Be.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Bn(t.unaryFilter.field);return Be.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Bn(t.unaryFilter.field);return Be.create(r,"!=",{nullValue:"NULL_VALUE"});default:return G()}}function vf(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}const Nw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Rw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&G(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new x((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof x?n:x.resolve(n)}catch(n){return x.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):x.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):x.reject(n)}static resolve(e){return new x((n,s)=>{n(e)})}static reject(e){return new x((n,s)=>{s(e)})}static waitFor(e){return new x((n,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&n()},l=>s(l))}),o=!0,i===r&&n()})}static or(e){let n=x.resolve(!1);for(const s of e)n=n.next(r=>r?x.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}}function qs(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&lw(i,e,s[r])}}applyToLocalView(e){for(const n of this.baseMutations)n.key.isEqual(e.key)&&Da(n,e,this.localWriteTime);for(const n of this.mutations)n.key.isEqual(e.key)&&Da(n,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(n=>{const s=e.get(n.key),r=s;this.applyToLocalView(r),s.isValidDocument()||r.convertToNoDocument(se.min())})}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&Ps(this.mutations,e.mutations,(n,s)=>Qh(n,s))&&Ps(this.baseMutations,e.baseMutations,(n,s)=>Qh(n,s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,n,s,r,i=se.min(),o=se.min(),a=Me.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new on(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new on(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new on(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e){this.Wt=e}}function Ow(t){const e=Tw({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Uh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(){this.Gt=new kw}addToCollectionParentIndex(e,n){return this.Gt.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this.Gt.getEntries(n))}}class kw{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new De(me.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new De(me.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.ne=e}next(){return this.ne+=2,this.ne}static se(){return new Hn(0)}static ie(){return new Hn(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fa(t){if(t.code!==A.FAILED_PRECONDITION||t.message!==Nw)throw t;U("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={}}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r!==void 0){for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n])}else this.inner[s]=[[e,n]]}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),!0;return!1}forEach(e){ks(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return Sh(this.inner)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(){this.changes=new Bs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}getReadTime(e){const n=this.changes.get(e);return n?n.readTime:se.min()}addEntry(e,n){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:n})}removeEntry(e,n=null){this.assertNotApplied(),this.changes.set(e,{document:Le.newInvalidDocument(e),readTime:n})}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?x.resolve(s.document):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,n,s){this.He=e,this.In=n,this.Ht=s}An(e,n){return this.In.getAllMutationBatchesAffectingDocumentKey(e,n).next(s=>this.Rn(e,n,s))}Rn(e,n,s){return this.He.getEntry(e,n).next(r=>{for(const i of s)i.applyToLocalView(r);return r})}bn(e,n){e.forEach((s,r)=>{for(const i of n)i.applyToLocalView(r)})}Pn(e,n){return this.He.getEntries(e,n).next(s=>this.vn(e,s).next(()=>s))}vn(e,n){return this.In.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>this.bn(n,s))}getDocumentsMatchingQuery(e,n,s){return function(r){return B.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(n)?this.Vn(e,n.path):Vh(n)?this.Sn(e,n,s):this.Dn(e,n,s)}Vn(e,n){return this.An(e,new B(n)).next(s=>{let r=Pa();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}Sn(e,n,s){const r=n.collectionGroup;let i=Pa();return this.Ht.getCollectionParents(e,r).next(o=>x.forEach(o,a=>{const l=function(c,u){return new jn(u,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(n,a.child(r));return this.Dn(e,l,s).next(c=>{c.forEach((u,h)=>{i=i.insert(u,h)})})}).next(()=>i))}Dn(e,n,s){let r,i;return this.He.getDocumentsMatchingQuery(e,n,s).next(o=>(r=o,this.In.getAllMutationBatchesAffectingQuery(e,n))).next(o=>(i=o,this.Cn(e,i,r).next(a=>{r=a;for(const l of i)for(const c of l.mutations){const u=c.key;let h=r.get(u);h==null&&(h=Le.newInvalidDocument(u),r=r.insert(u,h)),Da(c,h,l.localWriteTime),h.isFoundDocument()||(r=r.remove(u))}}))).next(()=>(r.forEach((o,a)=>{ai(n,a)||(r=r.remove(o))}),r))}Cn(e,n,s){let r=ge();for(const o of n)for(const a of o.mutations)a instanceof Oa&&s.get(a.key)===null&&(r=r.add(a.key));let i=s;return this.He.getEntries(e,r).next(o=>(o.forEach((a,l)=>{l.isFoundDocument()&&(i=i.insert(a,l))}),i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Nn=s,this.xn=r}static kn(e,n){let s=ge(),r=ge();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Va(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{$n(e){this.On=e}getDocumentsMatchingQuery(e,n,s,r){return function(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}(n)||s.isEqual(se.min())?this.Fn(e,n):this.On.Pn(e,r).next(i=>{const o=this.Mn(n,i);return(ri(n)||ii(n))&&this.Ln(n.limitType,o,r,s)?this.Fn(e,n):(bh()<=ne.DEBUG&&U("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Na(n)),this.On.getDocumentsMatchingQuery(e,n,s).next(a=>(o.forEach(l=>{a=a.insert(l.key,l)}),a)))})}Mn(e,n){let s=new De(jh(e));return n.forEach((r,i)=>{ai(e,i)&&(s=s.add(i))}),s}Ln(e,n,s,r){if(s.size!==n.size)return!0;const i=e==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Fn(e,n){return bh()<=ne.DEBUG&&U("QueryEngine","Using full collection scan to execute query:",Na(n)),this.On.getDocumentsMatchingQuery(e,n,se.min())}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,n,s,r){this.persistence=e,this.Bn=n,this.N=r,this.Un=new He(re),this.qn=new Bs(i=>Ta(i),ba),this.Kn=se.min(),this.In=e.getMutationQueue(s),this.jn=e.getRemoteDocumentCache(),this.ze=e.getTargetCache(),this.Qn=new wf(this.jn,this.In,this.persistence.getIndexManager()),this.Je=e.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Un))}}function Vw(t,e,n,s){return new Fw(t,e,n,s)}async function Ef(t,e){const n=ee(t);let s=n.In,r=n.Qn;const i=await n.persistence.runTransaction("Handle user change","readonly",o=>{let a;return n.In.getAllMutationBatches(o).next(l=>(a=l,s=n.persistence.getMutationQueue(e),r=new wf(n.jn,s,n.persistence.getIndexManager()),s.getAllMutationBatches(o))).next(l=>{const c=[],u=[];let h=ge();for(const d of a){c.push(d.batchId);for(const g of d.mutations)h=h.add(g.key)}for(const d of l){u.push(d.batchId);for(const g of d.mutations)h=h.add(g.key)}return r.Pn(o,h).next(d=>({Wn:d,removedBatchIds:c,addedBatchIds:u}))})});return n.In=s,n.Qn=r,n.Bn.$n(n.Qn),i}function If(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.ze.getLastRemoteSnapshotVersion(n))}function Uw(t,e){const n=ee(t),s=e.snapshotVersion;let r=n.Un;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.jn.newChangeBuffer({trackRemovals:!0});r=n.Un;const a=[];e.targetChanges.forEach((c,u)=>{const h=r.get(u);if(!h)return;a.push(n.ze.removeMatchingKeys(i,c.removedDocuments,u).next(()=>n.ze.addMatchingKeys(i,c.addedDocuments,u)));const d=c.resumeToken;if(d.approximateByteSize()>0){const g=h.withResumeToken(d,s).withSequenceNumber(i.currentSequenceNumber);r=r.insert(u,g),function(w,M,S){return ve(M.resumeToken.approximateByteSize()>0),w.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(h,g,c)&&a.push(n.ze.updateTargetData(i,g))}});let l=rn();if(e.documentUpdates.forEach((c,u)=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,c))}),a.push($w(i,o,e.documentUpdates,s,void 0).next(c=>{l=c})),!s.isEqual(se.min())){const c=n.ze.getLastRemoteSnapshotVersion(i).next(u=>n.ze.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(c)}return x.waitFor(a).next(()=>o.apply(i)).next(()=>n.Qn.vn(i,l)).next(()=>l)}).then(i=>(n.Un=r,i))}function $w(t,e,n,s,r){let i=ge();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=rn();return n.forEach((l,c)=>{const u=o.get(l),h=(r==null?void 0:r.get(l))||s;c.isNoDocument()&&c.version.isEqual(se.min())?(e.removeEntry(l,h),a=a.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c,h),a=a.insert(l,c)):U("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),a})}function jw(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.ze.getTargetData(s,e).next(i=>i?(r=i,x.resolve(r)):n.ze.allocateTargetId(s).next(o=>(r=new on(e,o,0,s.currentSequenceNumber),n.ze.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Un.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Un=n.Un.insert(s.targetId,s),n.qn.set(e,s.targetId)),s})}async function Ua(t,e,n){const s=ee(t),r=s.Un.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!qs(o))throw o;U("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}s.Un=s.Un.remove(e),s.qn.delete(r.target)}function Tf(t,e,n){const s=ee(t);let r=se.min(),i=ge();return s.persistence.runTransaction("Execute query","readonly",o=>function(a,l,c){const u=ee(a),h=u.qn.get(c);return h!==void 0?x.resolve(u.Un.get(h)):u.ze.getTargetData(l,c)}(s,o,sn(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.ze.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>s.Bn.getDocumentsMatchingQuery(o,e,n?r:se.min(),n?i:ge())).next(a=>({documents:a,Gn:i})))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e){this.N=e,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(e,n){return x.resolve(this.Yn.get(n))}saveBundleMetadata(e,n){var s;return this.Yn.set(n.id,{id:(s=n).id,version:s.version,createTime:js(s.createTime)}),x.resolve()}getNamedQuery(e,n){return x.resolve(this.Xn.get(n))}saveNamedQuery(e,n){return this.Xn.set(n.name,function(s){return{name:s.name,query:Ow(s.bundledQuery),readTime:js(s.readTime)}}(n)),x.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(){this.Zn=new De(Ae.ts),this.es=new De(Ae.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,n){const s=new Ae(e,n);this.Zn=this.Zn.add(s),this.es=this.es.add(s)}ss(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.rs(new Ae(e,n))}os(e,n){e.forEach(s=>this.removeReference(s,n))}cs(e){const n=new B(new me([])),s=new Ae(n,e),r=new Ae(n,e+1),i=[];return this.es.forEachInRange([s,r],o=>{this.rs(o),i.push(o.key)}),i}us(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const n=new B(new me([])),s=new Ae(n,e),r=new Ae(n,e+1);let i=ge();return this.es.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ae(e,0),s=this.Zn.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Ae{constructor(e,n){this.key=e,this.ls=n}static ts(e,n){return B.comparator(e.key,n.key)||re(e.ls,n.ls)}static ns(e,n){return re(e.ls,n.ls)||B.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e,n){this.Ht=e,this.referenceDelegate=n,this.In=[],this.fs=1,this.ds=new De(Ae.ts)}checkEmpty(e){return x.resolve(this.In.length===0)}addMutationBatch(e,n,s,r){const i=this.fs;this.fs++,this.In.length>0&&this.In[this.In.length-1];const o=new xw(i,n,s,r);this.In.push(o);for(const a of r)this.ds=this.ds.add(new Ae(a.key,i)),this.Ht.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(o)}lookupMutationBatch(e,n){return x.resolve(this.ws(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this._s(s),i=r<0?0:r;return x.resolve(this.In.length>i?this.In[i]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.In.length===0?-1:this.fs-1)}getAllMutationBatches(e){return x.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Ae(n,0),r=new Ae(n,Number.POSITIVE_INFINITY),i=[];return this.ds.forEachInRange([s,r],o=>{const a=this.ws(o.ls);i.push(a)}),x.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new De(re);return n.forEach(r=>{const i=new Ae(r,0),o=new Ae(r,Number.POSITIVE_INFINITY);this.ds.forEachInRange([i,o],a=>{s=s.add(a.ls)})}),x.resolve(this.gs(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;B.isDocumentKey(i)||(i=i.child(""));const o=new Ae(new B(i),0);let a=new De(re);return this.ds.forEachWhile(l=>{const c=l.key.path;return!!s.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.ls)),!0)},o),x.resolve(this.gs(a))}gs(e){const n=[];return e.forEach(s=>{const r=this.ws(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){ve(this.ys(n.batchId,"removed")===0),this.In.shift();let s=this.ds;return x.forEach(n.mutations,r=>{const i=new Ae(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.ds=s})}te(e){}containsKey(e,n){const s=new Ae(n,0),r=this.ds.firstAfterOrEqual(s);return x.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.In.length,x.resolve()}ys(e,n){return this._s(e)}_s(e){return this.In.length===0?0:e-this.In[0].batchId}ws(e){const n=this._s(e);return n<0||n>=this.In.length?null:this.In[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,n){this.Ht=e,this.ps=n,this.docs=new He(B.comparator),this.size=0}addEntry(e,n,s){const r=n.key,i=this.docs.get(r),o=i?i.size:0,a=this.ps(n);return this.docs=this.docs.insert(r,{document:n.clone(),size:a,readTime:s}),this.size+=a-o,this.Ht.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return x.resolve(s?s.document.clone():Le.newInvalidDocument(n))}getEntries(e,n){let s=rn();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.clone():Le.newInvalidDocument(r))}),x.resolve(s)}getDocumentsMatchingQuery(e,n,s){let r=rn();const i=new B(n.path.child("")),o=this.docs.getIteratorFrom(i);for(;o.hasNext();){const{key:a,value:{document:l,readTime:c}}=o.getNext();if(!n.path.isPrefixOf(a.path))break;c.compareTo(s)<=0||ai(n,l)&&(r=r.insert(l.key,l.clone()))}return x.resolve(r)}Ts(e,n){return x.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new Kw(this)}getSize(e){return x.resolve(this.size)}}class Kw extends Mw{constructor(e){super(),this.Se=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.document.isValidDocument()?n.push(this.Se.addEntry(e,r.document,this.getReadTime(s))):this.Se.removeEntry(s)}),x.waitFor(n)}getFromCache(e,n){return this.Se.getEntry(e,n)}getAllFromCache(e,n){return this.Se.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e){this.persistence=e,this.Es=new Bs(n=>Ta(n),ba),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.Is=0,this.As=new $a,this.targetCount=0,this.Rs=Hn.se()}forEachTarget(e,n){return this.Es.forEach((s,r)=>n(r)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.Is)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.Is&&(this.Is=n),x.resolve()}ae(e){this.Es.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Rs=new Hn(n),this.highestTargetId=n),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}addTargetData(e,n){return this.ae(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.ae(n),x.resolve()}removeTargetData(e,n){return this.Es.delete(n.target),this.As.cs(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.Es.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.Es.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),x.waitFor(i).next(()=>r)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){const s=this.Es.get(n)||null;return x.resolve(s)}addMatchingKeys(e,n,s){return this.As.ss(n,s),x.resolve()}removeMatchingKeys(e,n,s){this.As.os(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),x.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.As.cs(n),x.resolve()}getMatchingKeysForTargetId(e,n){const s=this.As.hs(n);return x.resolve(s)}containsKey(e,n){return x.resolve(this.As.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e,n){this.bs={},this.Le=new ma(0),this.Be=!1,this.Be=!0,this.referenceDelegate=e(this),this.ze=new zw(this),this.Ht=new Pw,this.He=function(s,r){return new Hw(s,r)}(this.Ht,s=>this.referenceDelegate.Ps(s)),this.N=new Dw(n),this.Je=new qw(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(e){let n=this.bs[e.toKey()];return n||(n=new Bw(this.Ht,this.referenceDelegate),this.bs[e.toKey()]=n),n}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(e,n,s){U("MemoryPersistence","Starting transaction:",e);const r=new Ww(this.Le.next());return this.referenceDelegate.vs(),s(r).next(i=>this.referenceDelegate.Vs(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ss(e,n){return x.or(Object.values(this.bs).map(s=>()=>s.containsKey(e,n)))}}class Ww extends Rw{constructor(e){super(),this.currentSequenceNumber=e}}class ja{constructor(e){this.persistence=e,this.Ds=new $a,this.Cs=null}static Ns(e){return new ja(e)}get xs(){if(this.Cs)return this.Cs;throw G()}addReference(e,n,s){return this.Ds.addReference(s,n),this.xs.delete(s.toString()),x.resolve()}removeReference(e,n,s){return this.Ds.removeReference(s,n),this.xs.add(s.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.xs.add(n.toString()),x.resolve()}removeTarget(e,n){this.Ds.cs(n.targetId).forEach(r=>this.xs.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.xs.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}vs(){this.Cs=new Set}Vs(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.xs,s=>{const r=B.fromPath(s);return this.ks(e,r).next(i=>{i||n.removeEntry(r)})}).next(()=>(this.Cs=null,n.apply(e)))}updateLimboDocument(e,n){return this.ks(e,n).next(s=>{s?this.xs.delete(n.toString()):this.xs.add(n.toString())})}Ps(e){return 0}ks(e,n){return x.or([()=>x.resolve(this.Ds.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ss(e,n)])}}class bf{constructor(){this.activeTargetIds=sf()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ms(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Qw{constructor(){this.yi=new bf,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e){return this.yi.Fs(e),this.pi[e]||"not-current"}updateQueryState(e,n,s){this.pi[e]=n}removeLocalQueryTarget(e){this.yi.Ms(e)}isLocalQueryTarget(e){return this.yi.activeTargetIds.has(e)}clearQueryState(e){delete this.pi[e]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(e){return this.yi.activeTargetIds.has(e)}start(){return this.yi=new bf,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{Ti(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(){this.Ei=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ti(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ai)}Ii(){U("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Ri(){U("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e){this.vi=e.vi,this.Vi=e.Vi}Si(e){this.Di=e}Ci(e){this.Ni=e}onMessage(e){this.xi=e}close(){this.Vi()}send(e){this.vi(e)}ki(){this.Di()}$i(e){this.Ni(e)}Oi(e){this.xi(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.Fi=n+"://"+e.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(e,n,s,r){const i=this.Bi(e,n);U("RestConnection","Sending: ",i,s);const o={};return this.Ui(o,r),this.qi(e,i,o,s).then(a=>(U("RestConnection","Received: ",a),a),a=>{throw Ah("RestConnection",`${e} failed with error: `,a,"url: ",i,"request:",s),a})}Ki(e,n,s,r){return this.Li(e,n,s,r)}Ui(e,n){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+Ln,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n)for(const s in n.authHeaders)n.authHeaders.hasOwnProperty(s)&&(e[s]=n.authHeaders[s])}Bi(e,n){const s=Xw[e];return`${this.Fi}/v1/${n}:${s}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}qi(e,n,s,r){return new Promise((i,o)=>{const a=new Pv;a.listenOnce(xv.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case pa.NO_ERROR:const c=a.getResponseJson();U("Connection","XHR received:",JSON.stringify(c)),i(c);break;case pa.TIMEOUT:U("Connection",'RPC "'+e+'" timed out'),o(new P(A.DEADLINE_EXCEEDED,"Request time out"));break;case pa.HTTP_ERROR:const u=a.getStatus();if(U("Connection",'RPC "'+e+'" failed with status:',u,"response text:",a.getResponseText()),u>0){const h=a.getResponseJson().error;if(h&&h.status&&h.message){const d=function(g){const w=g.toLowerCase().replace(/_/g,"-");return Object.values(A).indexOf(w)>=0?w:A.UNKNOWN}(h.status);o(new P(d,h.message))}else o(new P(A.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new P(A.UNAVAILABLE,"Connection failed."));break;default:G()}}finally{U("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(r);a.send(n,"POST",l,s,15)})}ji(e,n){const s=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=Nv(),i=Rv(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Ov({})),this.Ui(o.initMessageHeaders,n),Cm()||Rm()||xm()||Dm()||Om()||Nm()||(o.httpHeadersOverwriteParam="$httpHeaders");const a=s.join("");U("Connection","Creating WebChannel: "+a,o);const l=r.createWebChannel(a,o);let c=!1,u=!1;const h=new Jw({vi:g=>{u?U("Connection","Not sending because WebChannel is closed:",g):(c||(U("Connection","Opening WebChannel transport."),l.open(),c=!0),U("Connection","WebChannel sending:",g),l.send(g))},Vi:()=>l.close()}),d=(g,w,M)=>{g.listen(w,S=>{try{M(S)}catch(N){setTimeout(()=>{throw N},0)}})};return d(l,ti.EventType.OPEN,()=>{u||U("Connection","WebChannel transport opened.")}),d(l,ti.EventType.CLOSE,()=>{u||(u=!0,U("Connection","WebChannel transport closed"),h.$i())}),d(l,ti.EventType.ERROR,g=>{u||(u=!0,Ah("Connection","WebChannel transport errored:",g),h.$i(new P(A.UNAVAILABLE,"The operation could not be completed")))}),d(l,ti.EventType.MESSAGE,g=>{var w;if(!u){const M=g.data[0];ve(!!M);const S=M,N=S.error||((w=S[0])===null||w===void 0?void 0:w.error);if(N){U("Connection","WebChannel received error:",N);const $=N.status;let Q=function(Oe){const Pe=Ee[Oe];if(Pe!==void 0)return tf(Pe)}($),J=N.message;Q===void 0&&(Q=A.INTERNAL,J="Unknown error status: "+$+" with message "+N.message),u=!0,h.$i(new P(Q,J)),l.close()}else U("Connection","WebChannel received:",M),h.Oi(M)}}),d(i,Dv.STAT_EVENT,g=>{g.stat===Ih.PROXY?U("Connection","Detected buffering proxy"):g.stat===Ih.NOPROXY&&U("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.ki()},0),h}}function qa(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(t){return new yw(t,!0)}class _f{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Oe=e,this.timerId=n,this.Qi=s,this.Wi=r,this.Gi=i,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(e){this.cancel();const n=Math.floor(this.zi+this.Zi()),s=Math.max(0,Date.now()-this.Ji),r=Math.max(0,n-s);r>0&&U("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.zi} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,r,()=>(this.Ji=Date.now(),e())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){this.Hi!==null&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){this.Hi!==null&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e,n,s,r,i,o){this.Oe=e,this.er=s,this.nr=r,this.credentialsProvider=i,this.listener=o,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new _f(e,n)}ar(){return this.state===1||this.state===2||this.state===4}cr(){return this.state===2}start(){this.state!==3?this.auth():this.ur()}async stop(){this.ar()&&await this.close(0)}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&this.ir===null&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this.dr()))}wr(e){this._r(),this.stream.send(e)}async dr(){if(this.cr())return this.close(0)}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}async close(e,n){this._r(),this.rr.cancel(),this.sr++,e!==3?this.rr.reset():n&&n.code===A.RESOURCE_EXHAUSTED?(Ft(n.toString()),Ft("Using maximum backoff delay to prevent overloading the backend."),this.rr.Yi()):n&&n.code===A.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),this.stream!==null&&(this.mr(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ci(n)}mr(){}auth(){this.state=1;const e=this.gr(this.sr),n=this.sr;this.credentialsProvider.getToken().then(s=>{this.sr===n&&this.yr(s)},s=>{e(()=>{const r=new P(A.UNKNOWN,"Fetching auth token failed: "+s.message);return this.pr(r)})})}yr(e){const n=this.gr(this.sr);this.stream=this.Tr(e),this.stream.Si(()=>{n(()=>(this.state=2,this.listener.Si()))}),this.stream.Ci(s=>{n(()=>this.pr(s))}),this.stream.onMessage(s=>{n(()=>this.onMessage(s))})}ur(){this.state=4,this.rr.Xi(async()=>{this.state=0,this.start()})}pr(e){return U("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(3,e)}gr(e){return n=>{this.Oe.enqueueAndForget(()=>this.sr===e?n():(U("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class t0 extends e0{constructor(e,n,s,r,i){super(e,"listen_stream_connection_backoff","listen_stream_idle",n,s,i),this.N=r}Tr(e){return this.nr.ji("Listen",e)}onMessage(e){this.rr.reset();const n=ww(this.N,e),s=function(r){if(!("targetChange"in r))return se.min();const i=r.targetChange;return i.targetIds&&i.targetIds.length?se.min():i.readTime?js(i.readTime):se.min()}(e);return this.listener.Er(n,s)}Ir(e){const n={};n.database=df(this.N),n.addTarget=function(r,i){let o;const a=i.target;return o=Aa(a)?{documents:Ew(r,a)}:{query:Iw(r,a)},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0?o.resumeToken=uf(r,i.resumeToken):i.snapshotVersion.compareTo(se.min())>0&&(o.readTime=ka(r,i.snapshotVersion.toTimestamp())),o}(this.N,e);const s=bw(this.N,e);s&&(n.labels=s),this.wr(n)}Ar(e){const n={};n.database=df(this.N),n.removeTarget=e,this.wr(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0 extends class{}{constructor(e,n,s){super(),this.credentials=e,this.nr=n,this.N=s,this.Dr=!1}Cr(){if(this.Dr)throw new P(A.FAILED_PRECONDITION,"The client has already been terminated.")}Li(e,n,s){return this.Cr(),this.credentials.getToken().then(r=>this.nr.Li(e,n,s,r)).catch(r=>{throw r.name==="FirebaseError"?(r.code===A.UNAUTHENTICATED&&this.credentials.invalidateToken(),r):new P(A.UNKNOWN,r.toString())})}Ki(e,n,s){return this.Cr(),this.credentials.getToken().then(r=>this.nr.Ki(e,n,s,r)).catch(r=>{throw r.name==="FirebaseError"?(r.code===A.UNAUTHENTICATED&&this.credentials.invalidateToken(),r):new P(A.UNKNOWN,r.toString())})}terminate(){this.Dr=!0}}class s0{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){this.Nr===0&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve())))}Lr(e){this.state==="Online"?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Fr("Offline")))}set(e){this.Br(),this.Nr=0,e==="Online"&&(this.$r=!1),this.Fr(e)}Fr(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Mr(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(Ft(n),this.$r=!1):U("OnlineStateTracker",n)}Br(){this.kr!==null&&(this.kr.cancel(),this.kr=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=i,this.Qr.Ti(o=>{s.enqueueAndForget(async()=>{Ks(this)&&(U("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=ee(a);l.Kr.add(4),await Hs(l),l.Wr.set("Unknown"),l.Kr.delete(4),await mi(l)}(this))})}),this.Wr=new s0(s,r)}}async function mi(t){if(Ks(t))for(const e of t.jr)await e(!0)}async function Hs(t){for(const e of t.jr)await e(!1)}function Sf(t,e){const n=ee(t);n.qr.has(e.targetId)||(n.qr.set(e.targetId,e),Ka(n)?Ha(n):Kn(n).cr()&&Ba(n,e))}function Cf(t,e){const n=ee(t),s=Kn(n);n.qr.delete(e),s.cr()&&Nf(n,e),n.qr.size===0&&(s.cr()?s.lr():Ks(n)&&n.Wr.set("Unknown"))}function Ba(t,e){t.Gr.Y(e.targetId),Kn(t).Ir(e)}function Nf(t,e){t.Gr.Y(e),Kn(t).Ar(e)}function Ha(t){t.Gr=new pw({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>t.qr.get(e)||null}),Kn(t).start(),t.Wr.Or()}function Ka(t){return Ks(t)&&!Kn(t).ar()&&t.qr.size>0}function Ks(t){return ee(t).Kr.size===0}function Rf(t){t.Gr=void 0}async function i0(t){t.qr.forEach((e,n)=>{Ba(t,e)})}async function o0(t,e){Rf(t),Ka(t)?(t.Wr.Lr(e),Ha(t)):t.Wr.set("Unknown")}async function a0(t,e,n){if(t.Wr.set("Online"),e instanceof of&&e.state===2&&e.cause)try{await async function(s,r){const i=r.cause;for(const o of r.targetIds)s.qr.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.qr.delete(o),s.Gr.removeTarget(o))}(t,e)}catch(s){U("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await xf(t,s)}else if(e instanceof pi?t.Gr.rt(e):e instanceof rf?t.Gr.ft(e):t.Gr.ct(e),!n.isEqual(se.min()))try{const s=await If(t.localStore);n.compareTo(s)>=0&&await function(r,i){const o=r.Gr._t(i);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const c=r.qr.get(l);c&&r.qr.set(l,c.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach(a=>{const l=r.qr.get(a);if(!l)return;r.qr.set(a,l.withResumeToken(Me.EMPTY_BYTE_STRING,l.snapshotVersion)),Nf(r,a);const c=new on(l.target,a,1,l.sequenceNumber);Ba(r,c)}),r.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(s){U("RemoteStore","Failed to raise snapshot:",s),await xf(t,s)}}async function xf(t,e,n){if(!qs(e))throw e;t.Kr.add(1),await Hs(t),t.Wr.set("Offline"),n||(n=()=>If(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{U("RemoteStore","Retrying IndexedDB access"),await n(),t.Kr.delete(1),await mi(t)})}async function l0(t,e){const n=ee(t);e?(n.Kr.delete(2),await mi(n)):e||(n.Kr.add(2),await Hs(n),n.Wr.set("Unknown"))}function Kn(t){return t.zr||(t.zr=function(e,n,s){const r=ee(e);return r.Cr(),new t0(n,r.nr,r.credentials,r.N,s)}(t.datastore,t.asyncQueue,{Si:i0.bind(null,t),Ci:o0.bind(null,t),Er:a0.bind(null,t)}),t.jr.push(async e=>{e?(t.zr.hr(),Ka(t)?Ha(t):t.Wr.set("Unknown")):(await t.zr.stop(),Rf(t))})),t.zr}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new tn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new za(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(A.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Df(t,e){if(Ft("AsyncQueue",`${e}: ${t}`),qs(t))return new P(A.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.comparator=e?(n,s)=>e(n,s)||B.comparator(n.key,s.key):(n,s)=>B.comparator(n.key,s.key),this.keyedMap=Pa(),this.sortedSet=new He(this.comparator)}static emptySet(e){return new zn(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof zn)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new zn;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(){this.Jr=new He(B.comparator)}track(e){const n=e.doc.key,s=this.Jr.get(n);s?e.type!==0&&s.type===3?this.Jr=this.Jr.insert(n,e):e.type===3&&s.type!==1?this.Jr=this.Jr.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Jr=this.Jr.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Jr=this.Jr.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Jr=this.Jr.remove(n):e.type===1&&s.type===2?this.Jr=this.Jr.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Jr=this.Jr.insert(n,{type:2,doc:e.doc}):G():this.Jr=this.Jr.insert(n,e)}Yr(){const e=[];return this.Jr.inorderTraversal((n,s)=>{e.push(s)}),e}}class Gn{constructor(e,n,s,r,i,o,a,l){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l}static fromInitialDocuments(e,n,s,r){const i=[];return n.forEach(o=>{i.push({type:0,doc:o})}),new Gn(e,n,zn.emptySet(n),i,s,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&oi(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(){this.Xr=void 0,this.listeners=[]}}class u0{constructor(){this.queries=new Bs(e=>$h(e),oi),this.onlineState="Unknown",this.Zr=new Set}}async function h0(t,e){const n=ee(t),s=e.query;let r=!1,i=n.queries.get(s);if(i||(r=!0,i=new c0),r)try{i.Xr=await n.onListen(s)}catch(o){const a=Df(o,`Initialization of query '${Na(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.listeners.push(e),e.eo(n.onlineState),i.Xr&&e.no(i.Xr)&&Ga(n)}async function f0(t,e){const n=ee(t),s=e.query;let r=!1;const i=n.queries.get(s);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),r=i.listeners.length===0)}if(r)return n.queries.delete(s),n.onUnlisten(s)}function d0(t,e){const n=ee(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.no(r)&&(s=!0);o.Xr=r}}s&&Ga(n)}function p0(t,e,n){const s=ee(t),r=s.queries.get(e);if(r)for(const i of r.listeners)i.onError(n);s.queries.delete(e)}function Ga(t){t.Zr.forEach(e=>{e.next()})}class g0{constructor(e,n,s){this.query=e,this.so=n,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=s||{}}no(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Gn(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.io?this.oo(e)&&(this.so.next(e),n=!0):this.ao(e,this.onlineState)&&(this.co(e),n=!0),this.ro=e,n}onError(e){this.so.error(e)}eo(e){this.onlineState=e;let n=!1;return this.ro&&!this.io&&this.ao(this.ro,e)&&(this.co(this.ro),n=!0),n}ao(e,n){if(!e.fromCache)return!0;const s=n!=="Offline";return(!this.options.uo||!s)&&(!e.docs.isEmpty()||n==="Offline")}oo(e){if(e.docChanges.length>0)return!0;const n=this.ro&&this.ro.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}co(e){e=Gn.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.io=!0,this.so.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e){this.key=e}}class kf{constructor(e){this.key=e}}class m0{constructor(e,n){this.query=e,this._o=n,this.mo=null,this.current=!1,this.yo=ge(),this.mutatedKeys=ge(),this.po=jh(e),this.To=new zn(this.po)}get Eo(){return this._o}Io(e,n){const s=n?n.Ao:new Of,r=n?n.To:this.To;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=ri(this.query)&&r.size===this.query.limit?r.last():null,c=ii(this.query)&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,h)=>{const d=r.get(u),g=ai(this.query,h)?h:null,w=!!d&&this.mutatedKeys.has(d.key),M=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let S=!1;d&&g?d.data.isEqual(g.data)?w!==M&&(s.track({type:3,doc:g}),S=!0):this.Ro(d,g)||(s.track({type:2,doc:g}),S=!0,(l&&this.po(g,l)>0||c&&this.po(g,c)<0)&&(a=!0)):!d&&g?(s.track({type:0,doc:g}),S=!0):d&&!g&&(s.track({type:1,doc:d}),S=!0,(l||c)&&(a=!0)),S&&(g?(o=o.add(g),i=M?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),ri(this.query)||ii(this.query))for(;o.size>this.query.limit;){const u=ri(this.query)?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),s.track({type:1,doc:u})}return{To:o,Ao:s,Ln:a,mutatedKeys:i}}Ro(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s){const r=this.To;this.To=e.To,this.mutatedKeys=e.mutatedKeys;const i=e.Ao.Yr();i.sort((c,u)=>function(h,d){const g=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G()}};return g(h)-g(d)}(c.type,u.type)||this.po(c.doc,u.doc)),this.bo(s);const o=n?this.Po():[],a=this.yo.size===0&&this.current?1:0,l=a!==this.mo;return this.mo=a,i.length!==0||l?{snapshot:new Gn(this.query,e.To,r,i,e.mutatedKeys,a===0,l,!1),vo:o}:{vo:o}}eo(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({To:this.To,Ao:new Of,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(e){return!this._o.has(e)&&!!this.To.has(e)&&!this.To.get(e).hasLocalMutations}bo(e){e&&(e.addedDocuments.forEach(n=>this._o=this._o.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this._o=this._o.delete(n)),this.current=e.current)}Po(){if(!this.current)return[];const e=this.yo;this.yo=ge(),this.To.forEach(s=>{this.Vo(s.key)&&(this.yo=this.yo.add(s.key))});const n=[];return e.forEach(s=>{this.yo.has(s)||n.push(new kf(s))}),this.yo.forEach(s=>{e.has(s)||n.push(new Pf(s))}),n}So(e){this._o=e.Gn,this.yo=ge();const n=this.Io(e.documents);return this.applyChanges(n,!0)}Do(){return Gn.fromInitialDocuments(this.query,this.To,this.mutatedKeys,this.mo===0)}}class y0{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class v0{constructor(e){this.key=e,this.Co=!1}}class w0{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.No={},this.xo=new Bs(a=>$h(a),oi),this.ko=new Map,this.$o=new Set,this.Oo=new He(B.comparator),this.Fo=new Map,this.Mo=new $a,this.Lo={},this.Bo=new Map,this.Uo=Hn.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return this.qo===!0}}async function E0(t,e){const n=C0(t);let s,r;const i=n.xo.get(e);if(i)s=i.targetId,n.sharedClientState.addLocalQueryTarget(s),r=i.view.Do();else{const o=await jw(n.localStore,sn(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);s=o.targetId,r=await I0(n,e,s,a==="current"),n.isPrimaryClient&&Sf(n.remoteStore,o)}return r}async function I0(t,e,n,s){t.Ko=(u,h,d)=>async function(g,w,M,S){let N=w.view.Io(M);N.Ln&&(N=await Tf(g.localStore,w.query,!1).then(({documents:J})=>w.view.Io(J,N)));const $=S&&S.targetChanges.get(w.targetId),Q=w.view.applyChanges(N,g.isPrimaryClient,$);return Vf(g,w.targetId,Q.vo),Q.snapshot}(t,u,h,d);const r=await Tf(t.localStore,e,!0),i=new m0(e,r.Gn),o=i.Io(r.documents),a=$s.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline"),l=i.applyChanges(o,t.isPrimaryClient,a);Vf(t,n,l.vo);const c=new y0(e,n,i);return t.xo.set(e,c),t.ko.has(n)?t.ko.get(n).push(e):t.ko.set(n,[e]),l.snapshot}async function T0(t,e){const n=ee(t),s=n.xo.get(e),r=n.ko.get(s.targetId);if(r.length>1)return n.ko.set(s.targetId,r.filter(i=>!oi(i,e))),void n.xo.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Ua(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),Cf(n.remoteStore,s.targetId),Wa(n,s.targetId)}).catch(Fa)):(Wa(n,s.targetId),await Ua(n.localStore,s.targetId,!0))}async function Mf(t,e){const n=ee(t);try{const s=await Uw(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Fo.get(i);o&&(ve(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.Co=!0:r.modifiedDocuments.size>0?ve(o.Co):r.removedDocuments.size>0&&(ve(o.Co),o.Co=!1))}),await Uf(n,s,e)}catch(s){await Fa(s)}}function Lf(t,e,n){const s=ee(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.xo.forEach((i,o)=>{const a=o.view.eo(e);a.snapshot&&r.push(a.snapshot)}),function(i,o){const a=ee(i);a.onlineState=o;let l=!1;a.queries.forEach((c,u)=>{for(const h of u.listeners)h.eo(o)&&(l=!0)}),l&&Ga(a)}(s.eventManager,e),r.length&&s.No.Er(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function b0(t,e,n){const s=ee(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Fo.get(e),i=r&&r.key;if(i){let o=new He(B.comparator);o=o.insert(i,Le.newNoDocument(i,se.min()));const a=ge().add(i),l=new di(se.min(),new Map,new De(re),o,a);await Mf(s,l),s.Oo=s.Oo.remove(i),s.Fo.delete(e),Qa(s)}else await Ua(s.localStore,e,!1).then(()=>Wa(s,e,n)).catch(Fa)}function Wa(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.ko.get(e))t.xo.delete(s),n&&t.No.jo(s,n);t.ko.delete(e),t.isPrimaryClient&&t.Mo.cs(e).forEach(s=>{t.Mo.containsKey(s)||Ff(t,s)})}function Ff(t,e){t.$o.delete(e.path.canonicalString());const n=t.Oo.get(e);n!==null&&(Cf(t.remoteStore,n),t.Oo=t.Oo.remove(e),t.Fo.delete(n),Qa(t))}function Vf(t,e,n){for(const s of n)s instanceof Pf?(t.Mo.addReference(s.key,e),A0(t,s)):s instanceof kf?(U("SyncEngine","Document no longer in limbo: "+s.key),t.Mo.removeReference(s.key,e),t.Mo.containsKey(s.key)||Ff(t,s.key)):G()}function A0(t,e){const n=e.key,s=n.path.canonicalString();t.Oo.get(n)||t.$o.has(s)||(U("SyncEngine","New document in limbo: "+n),t.$o.add(s),Qa(t))}function Qa(t){for(;t.$o.size>0&&t.Oo.size<t.maxConcurrentLimboResolutions;){const e=t.$o.values().next().value;t.$o.delete(e);const n=new B(me.fromString(e)),s=t.Uo.next();t.Fo.set(s,new v0(n)),t.Oo=t.Oo.insert(n,s),Sf(t.remoteStore,new on(sn(Fh(n.path)),s,2,ma.T))}}async function Uf(t,e,n){const s=ee(t),r=[],i=[],o=[];s.xo.isEmpty()||(s.xo.forEach((a,l)=>{o.push(s.Ko(l,e,n).then(c=>{if(c){s.isPrimaryClient&&s.sharedClientState.updateQueryState(l.targetId,c.fromCache?"not-current":"current"),r.push(c);const u=Va.kn(l.targetId,c);i.push(u)}}))}),await Promise.all(o),s.No.Er(r),await async function(a,l){const c=ee(a);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>x.forEach(l,h=>x.forEach(h.Nn,d=>c.persistence.referenceDelegate.addReference(u,h.targetId,d)).next(()=>x.forEach(h.xn,d=>c.persistence.referenceDelegate.removeReference(u,h.targetId,d)))))}catch(u){if(!qs(u))throw u;U("LocalStore","Failed to update sequence numbers: "+u)}for(const u of l){const h=u.targetId;if(!u.fromCache){const d=c.Un.get(h),g=d.snapshotVersion,w=d.withLastLimboFreeSnapshotVersion(g);c.Un=c.Un.insert(h,w)}}}(s.localStore,i))}async function _0(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){U("SyncEngine","User change. New user:",e.toKey());const s=await Ef(n.localStore,e);n.currentUser=e,function(r,i){r.Bo.forEach(o=>{o.forEach(a=>{a.reject(new P(A.CANCELLED,i))})}),r.Bo.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Uf(n,s.Wn)}}function S0(t,e){const n=ee(t),s=n.Fo.get(e);if(s&&s.Co)return ge().add(s.key);{let r=ge();const i=n.ko.get(e);if(!i)return r;for(const o of i){const a=n.xo.get(o);r=r.unionWith(a.view.Eo)}return r}}function C0(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Mf.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=S0.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=b0.bind(null,e),e.No.Er=d0.bind(null,e.eventManager),e.No.jo=p0.bind(null,e.eventManager),e}class N0{constructor(){this.synchronizeTabs=!1}async initialize(e){this.N=gi(e.databaseInfo.databaseId),this.sharedClientState=this.Wo(e),this.persistence=this.Go(e),await this.persistence.start(),this.gcScheduler=this.zo(e),this.localStore=this.Ho(e)}zo(e){return null}Ho(e){return Vw(this.persistence,new Lw,e.initialUser,this.N)}Go(e){return new Gw(ja.Ns,this.N)}Wo(e){return new Qw}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class R0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Lf(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=_0.bind(null,this.syncEngine),await l0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new u0}createDatastore(e){const n=gi(e.databaseInfo.databaseId),s=(r=e.databaseInfo,new Zw(r));var r;return function(i,o,a){return new n0(i,o,a)}(e.credentials,s,n)}createRemoteStore(e){return n=this.localStore,s=this.datastore,r=e.asyncQueue,i=a=>Lf(this.syncEngine,a,0),o=Af.bt()?new Af:new Yw,new r0(n,s,r,i,o);var n,s,r,i,o}createSyncEngine(e,n){return function(s,r,i,o,a,l,c){const u=new w0(s,r,i,o,a,l);return c&&(u.qo=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=ee(e);U("RemoteStore","RemoteStore shutting down."),n.Kr.add(5),await Hs(n),n.Qr.shutdown(),n.Wr.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Yo(this.observer.next,e)}error(e){this.observer.error?this.Yo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Xo(){this.muted=!0}Yo(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e,n,s){this.credentials=e,this.asyncQueue=n,this.databaseInfo=s,this.user=ze.UNAUTHENTICATED,this.clientId=$v.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(n,async r=>{U("FirestoreClient","Received user=",r.uid),await this.credentialListener(r),this.user=r})}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new P(A.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new tn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.credentials.shutdown(),e.resolve()}catch(n){const s=Df(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function O0(t,e){t.asyncQueue.verifyOperationInProgress(),U("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await Ef(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function P0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await k0(t);U("FirestoreClient","Initializing OnlineComponentProvider");const s=await t.getConfiguration();await e.initialize(n,s),t.setCredentialChangeListener(r=>async function(i,o){const a=ee(i);a.asyncQueue.verifyOperationInProgress(),U("RemoteStore","RemoteStore received new credentials");const l=Ks(a);a.Kr.add(3),await Hs(a),l&&a.Wr.set("Unknown"),await a.remoteSyncer.handleCredentialChange(o),a.Kr.delete(3),await mi(a)}(e.remoteStore,r)),t.onlineComponents=e}async function k0(t){return t.offlineComponents||(U("FirestoreClient","Using default OfflineComponentProvider"),await O0(t,new N0)),t.offlineComponents}async function M0(t){return t.onlineComponents||(U("FirestoreClient","Using default OnlineComponentProvider"),await P0(t,new R0)),t.onlineComponents}async function L0(t){const e=await M0(t),n=e.eventManager;return n.onListen=E0.bind(null,e.syncEngine),n.onUnlisten=T0.bind(null,e.syncEngine),n}function F0(t,e,n={}){const s=new tn;return t.asyncQueue.enqueueAndForget(async()=>function(r,i,o,a,l){const c=new x0({next:h=>{i.enqueueAndForget(()=>f0(r,u)),h.fromCache&&a.source==="server"?l.reject(new P(A.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),u=new g0(o,c,{includeMetadataChanges:!0,uo:!0});return h0(r,u)}(await L0(t),t.asyncQueue,e,n,s)),s.promise}class V0{constructor(e,n,s,r,i,o,a,l){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class zs{constructor(e,n){this.projectId=e,this.database=n||"(default)"}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof zs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(t,e,n){if(!n)throw new P(A.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $0(t,e,n,s){if(e===!0&&s===!0)throw new P(A.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function jf(t){if(B.isDocumentKey(t))throw new P(A.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function yi(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":G()}function qf(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new P(A.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yi(t);throw new P(A.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function j0(t,e){if(e<=0)throw new P(A.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new P(A.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(A.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,$0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,n){this._credentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bf({}),this._settingsFrozen=!1,e instanceof zs?this._databaseId=e:(this._app=e,this._databaseId=function(s){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new P(A.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zs(s.options.projectId)}(e))}get app(){if(!this._app)throw new P(A.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new P(A.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bf(e),e.credentials!==void 0&&(this._credentials=function(n){if(!n)return new Mv;switch(n.type){case"gapi":const s=n.client;return ve(!(typeof s!="object"||s===null||!s.auth||!s.auth.getAuthHeaderValueForFirstParty)),new Vv(s,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new P(A.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=$f.get(e);n&&(U("ComponentProvider","Removing Datastore"),$f.delete(e),n.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new St(this.firestore,e,this._key)}}class an{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new an(this.firestore,e,this._query)}}class Wn extends an{constructor(e,n,s){super(e,n,Fh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new St(this.firestore,null,new B(e))}withConverter(e){return new Wn(this.firestore,e,this._path)}}function bE(t,e,...n){if(t=Sr(t),U0("collection","path",e),t instanceof Hf){const s=me.fromString(e,...n);return jf(s),new Wn(t,null,s)}{if(!(t instanceof St||t instanceof Wn))throw new P(A.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(me.fromString(e,...n));return jf(s),new Wn(t.firestore,null,s)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new _f(this,"async_queue_retry"),this.Ta=()=>{const n=qa();n&&U("AsyncQueue","Visibility state changed to "+n.visibilityState),this.rr.tr()};const e=qa();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Ta)}get isShuttingDown(){return this.wa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ea(),this.Ia(e)}enterRestrictedMode(e){if(!this.wa){this.wa=!0,this.ya=e||!1;const n=qa();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Ta)}}enqueue(e){if(this.Ea(),this.wa)return new Promise(()=>{});const n=new tn;return this.Ia(()=>this.wa&&this.ya?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.da.push(e),this.Aa()))}async Aa(){if(this.da.length!==0){try{await this.da[0](),this.da.shift(),this.rr.reset()}catch(e){if(!qs(e))throw e;U("AsyncQueue","Operation failed with retryable error: "+e)}this.da.length>0&&this.rr.Xi(()=>this.Aa())}}Ia(e){const n=this.fa.then(()=>(this.ga=!0,e().catch(s=>{this.ma=s,this.ga=!1;const r=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(s);throw Ft("INTERNAL UNHANDLED ERROR: ",r),s}).then(s=>(this.ga=!1,s))));return this.fa=n,n}enqueueAfterDelay(e,n,s){this.Ea(),this.pa.indexOf(e)>-1&&(n=0);const r=za.createAndSchedule(this,e,n,s,i=>this.Ra(i));return this._a.push(r),r}Ea(){this.ma&&G()}verifyOperationInProgress(){}async ba(){let e;do e=this.fa,await e;while(e!==this.fa)}Pa(e){for(const n of this._a)if(n.timerId===e)return!0;return!1}va(e){return this.ba().then(()=>{this._a.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this._a)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ba()})}Va(e){this.pa.push(e)}Ra(e){const n=this._a.indexOf(e);this._a.splice(n,1)}}class Kf extends Hf{constructor(e,n){super(e,n),this.type="firestore",this._queue=new q0,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||zf(this),this._firestoreClient.terminate()}}function AE(t=by()){return wy(t,"firestore").getImmediate()}function B0(t){return t._firestoreClient||zf(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function zf(t){var e;const n=t._freezeSettings(),s=function(r,i,o,a){return new V0(r,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new D0(t._credentials,t._queue,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new P(A.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qn(Me.fromBase64String(e))}catch(n){throw new P(A.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Qn(Me.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new P(A.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new P(A.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0=/^__.*__$/;function Qf(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G()}}class Xa{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.N=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Sa(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(e){return new Xa(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Ca({path:s,xa:!1});return r.ka(e),r}$a(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Ca({path:s,xa:!1});return r.Sa(),r}Oa(e){return this.Ca({path:void 0,xa:!0})}Fa(e){return Za(e,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Sa(){if(this.path)for(let e=0;e<this.path.length;e++)this.ka(this.path.get(e))}ka(e){if(e.length===0)throw this.Fa("Document fields must not be empty");if(Qf(this.Da)&&H0.test(e))throw this.Fa('Document fields cannot begin and end with "__"')}}class K0{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.N=s||gi(e)}Ba(e,n,s,r=!1){return new Xa({Da:e,methodName:n,La:s,path:tt.emptyPath(),xa:!1,Ma:r},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function z0(t){const e=t._freezeSettings(),n=gi(t._databaseId);return new K0(t._databaseId,!!e.ignoreUndefinedProperties,n)}function G0(t,e,n,s=!1){return Ja(n,t.Ba(s?4:3,e))}function Ja(t,e){if(Yf(t=Sr(t)))return Q0("Unsupported field value:",e,t),W0(t,e);if(t instanceof Wf)return function(n,s){if(!Qf(s.Da))throw s.Fa(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Fa(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xa&&e.Da!==4)throw e.Fa("Nested arrays are not supported");return function(n,s){const r=[];let i=0;for(const o of n){let a=Ja(o,s.Oa(i));a==null&&(a={nullValue:"NULL_VALUE"}),r.push(a),i++}return{arrayValue:{values:r}}}(t,e)}return function(n,s){if((n=Sr(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return sw(s.N,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=et.fromDate(n);return{timestampValue:ka(s.N,r)}}if(n instanceof et){const r=new et(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:ka(s.N,r)}}if(n instanceof Ya)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Qn)return{bytesValue:uf(s.N,n._byteString)};if(n instanceof St){const r=s.databaseId,i=n.firestore._databaseId;if(!i.isEqual(r))throw s.Fa(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:hf(n.firestore._databaseId||s.databaseId,n._key.path)}}throw s.Fa(`Unsupported field value: ${yi(n)}`)}(t,e)}function W0(t,e){const n={};return Sh(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ks(t,(s,r)=>{const i=Ja(r,e.Na(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function Yf(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof et||t instanceof Ya||t instanceof Qn||t instanceof St||t instanceof Wf)}function Q0(t,e,n){if(!Yf(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const s=yi(n);throw s==="an object"?e.Fa(t+" a custom object"):e.Fa(t+" "+s)}}const Y0=new RegExp("[~\\*/\\[\\]]");function X0(t,e,n){if(e.search(Y0)>=0)throw Za(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Gf(...e.split("."))._internalPath}catch{throw Za(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Za(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${s}`),o&&(l+=` in document ${r}`),l+=")"),new P(A.INVALID_ARGUMENT,a+t+l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new St(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new J0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(vi("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class J0 extends Xf{data(){return super.data()}}function vi(t,e){return typeof e=="string"?X0(t,e):e instanceof Gf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Z0 extends Xf{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ei(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(vi("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Ei extends Z0{data(e={}){return super.data(e)}}class eE{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new wi(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Ei(this._firestore,this._userDataWriter,s.key,s,new wi(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new P(A.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>({type:"added",doc:new Ei(s._firestore,s._userDataWriter,o.doc.key,o.doc,new wi(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:i++}))}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>r||o.type!==3).map(o=>{const a=new Ei(s._firestore,s._userDataWriter,o.doc.key,o.doc,new wi(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let l=-1,c=-1;return o.type!==0&&(l=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),c=i.indexOf(o.doc.key)),{type:tE(o.type),doc:a,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function tE(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(t){if(ii(t)&&t.explicitOrderBy.length===0)throw new P(A.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class el{}function _E(t,...e){for(const n of e)t=n._apply(t);return t}class sE extends el{constructor(e,n,s){super(),this.Ka=e,this.ja=n,this.Qa=s,this.type="where"}_apply(e){const n=z0(e.firestore),s=function(r,i,o,a,l,c,u){let h;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new P(A.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on FieldPath.documentId().`);if(c==="in"||c==="not-in"){Zf(u,c);const g=[];for(const w of u)g.push(Jf(a,r,w));h={arrayValue:{values:g}}}else h=Jf(a,r,u)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||Zf(u,c),h=G0(o,i,u,c==="in"||c==="not-in");const d=Be.create(l,c,h);return function(g,w){if(w.v()){const S=Ca(g);if(S!==null&&!S.isEqual(w.field))throw new P(A.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${S.toString()}' and '${w.field.toString()}'`);const N=Sa(g);N!==null&&ed(g,w.field,N)}const M=function(S,N){for(const $ of S.filters)if(N.indexOf($.op)>=0)return $.op;return null}(g,function(S){switch(S){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(w.op));if(M!==null)throw M===w.op?new P(A.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${w.op.toString()}' filter.`):new P(A.INVALID_ARGUMENT,`Invalid query. You cannot use '${w.op.toString()}' filters with '${M.toString()}' filters.`)}(r,d),d}(e._query,"where",n,e.firestore._databaseId,this.Ka,this.ja,this.Qa);return new an(e.firestore,e.converter,function(r,i){const o=r.filters.concat([i]);return new jn(r.path,r.collectionGroup,r.explicitOrderBy.slice(),o,r.limit,r.limitType,r.startAt,r.endAt)}(e._query,s))}}function SE(t,e,n){const s=e,r=vi("where",t);return new sE(r,s,n)}class rE extends el{constructor(e,n){super(),this.Ka=e,this.Wa=n,this.type="orderBy"}_apply(e){const n=function(s,r,i){if(s.startAt!==null)throw new P(A.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new P(A.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new $n(r,i);return function(a,l){if(Sa(a)===null){const c=Ca(a);c!==null&&ed(a,c,l.field)}}(s,o),o}(e._query,this.Ka,this.Wa);return new an(e.firestore,e.converter,function(s,r){const i=s.explicitOrderBy.concat([r]);return new jn(s.path,s.collectionGroup,i,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function CE(t,e="asc"){const n=e,s=vi("orderBy",t);return new rE(s,n)}class iE extends el{constructor(e,n,s){super(),this.type=e,this.Ga=n,this.za=s}_apply(e){return new an(e.firestore,e.converter,Uh(e._query,this.Ga,this.za))}}function NE(t){return j0("limit",t),new iE("limit",t,"F")}function Jf(t,e,n){if(typeof(n=Sr(n))=="string"){if(n==="")throw new P(A.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vh(e)&&n.indexOf("/")!==-1)throw new P(A.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(me.fromString(n));if(!B.isDocumentKey(s))throw new P(A.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return xh(t,new B(s))}if(n instanceof St)return xh(t,n._key);throw new P(A.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${yi(n)}.`)}function Zf(t,e){if(!Array.isArray(t)||t.length===0)throw new P(A.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new P(A.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function ed(t,e,n){if(!n.isEqual(e))throw new P(A.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{convertValue(e,n="none"){switch(nn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return we(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Fn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw G()}}convertObject(e,n){const s={};return ks(e.fields,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertGeoPoint(e){return new Ya(we(e.latitude),we(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Nh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Ls(e));default:return null}}convertTimestamp(e){const n=Vt(e);return new et(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=me.fromString(e);ve(vf(s));const r=new zs(s.get(1),s.get(3)),i=new B(s.popFirst(5));return r.isEqual(n)||Ft(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}class aE extends oE{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new St(this.firestore,null,n)}}function RE(t){t=qf(t,an);const e=qf(t.firestore,Kf),n=B0(e),s=new aE(e);return nE(t._query),F0(n,t._query).then(r=>new eE(e,s,t,r))}var lE;(function(t){Ln=t})(Ty),bo(new Cr("firestore",(t,{options:e})=>{const n=t.getProvider("app").getImmediate(),s=new Kf(n,new Lv(t.getProvider("auth-internal")));return e=Object.assign({useFetchStreams:!0},e),s._setSettings(e),s},"PUBLIC")),xn(Th,"3.1.1",lE),xn(Th,"3.1.1","esm2017");export{Tc as A,SE as B,IE as C,EE as D,wr as E,It as F,_E as M,AE as O,Ze as a,ac as b,pE as c,mE as d,hE as e,Lp as f,wE as g,vE as h,TE as i,yE as j,gE as k,op as l,Bd as m,cp as n,dE as o,uE as p,ht as q,fE as r,NE as s,cE as t,ns as u,CE as v,Qd as w,bE as x,RE as y,Vl as z};
